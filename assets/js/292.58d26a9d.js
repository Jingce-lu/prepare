(window.webpackJsonp=window.webpackJsonp||[]).push([[292],{439:function(s,a,n){"use strict";n.r(a);var e=n(1),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"mongodb"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mongodb","aria-hidden":"true"}},[s._v("#")]),s._v(" mongodb")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"#mongodb"}},[s._v("mongodb")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"#%E5%AE%89%E8%A3%85"}},[s._v("安装")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6"}},[s._v("创建数据文件")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8"}},[s._v("开机自启动")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"#1-%E8%AE%BE%E7%BD%AEplist%E6%96%87%E4%BB%B6-%E6%9F%A5%E6%89%BE%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6mongod%E7%9A%84%E4%BD%8D%E7%BD%AE"}},[s._v("1. 设置plist文件 查找可执行文件mongod的位置")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#2-%E6%9F%A5%E6%89%BEplist%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8%E9%A1%B9%E6%96%87%E4%BB%B6"}},[s._v("2. 查找plist配置启动项文件")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#3-%E4%BF%AE%E6%94%B9plist%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8%E9%A1%B9%E6%96%87%E4%BB%B6"}},[s._v("3. 修改plist配置启动项文件")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#4-%E6%8B%B7%E8%B4%9Dplist%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8%E9%A1%B9%E6%96%87%E4%BB%B6"}},[s._v("4. 拷贝plist配置启动项文件")])])])]),s._v(" "),n("li",[n("a",{attrs:{href:"#5%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1"}},[s._v("5.启动服务")])])])])]),s._v(" "),n("h2",{attrs:{id:"安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ brew update\n$ brew info mongodb\n$ brew "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mongodb\n\n$ mongo --version\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("启动")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("mongod —config /usr/local/etc/mongod.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("连接到MongoDb,可以用命令行工具mongo连接：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ mongo\nMongoDB shell version: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.6")]),s._v(".5\nconnecting to: "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\nWelcome to the MongoDB shell.\nFor interactive help, "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" “help”.\nFor "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" comprehensive documentation, see\nhttp://docs.mongodb.org/\nQuestions? Try the support group\nhttp://groups.google.com/group/mongodb-user\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"创建数据文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建数据文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建数据文件")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("进入根目录")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("创建目录")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /data/db\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("设置权限，并输入用户密码")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" -R "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" /data\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])])]),s._v(" "),n("blockquote",[n("p",[s._v("提示：其中"),n("code",[s._v("-p")]),s._v("是创建多个文件目录使用的参数,"),n("code",[s._v("-R")]),s._v("表示对目录进行递归操作，就是data目录下的子文件也设置该权限。")])]),s._v(" "),n("h2",{attrs:{id:"开机自启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开机自启动","aria-hidden":"true"}},[s._v("#")]),s._v(" 开机自启动")]),s._v(" "),n("h3",{attrs:{id:"_1-设置plist文件-查找可执行文件mongod的位置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-设置plist文件-查找可执行文件mongod的位置","aria-hidden":"true"}},[s._v("#")]),s._v(" 1. 设置plist文件 查找可执行文件mongod的位置")]),s._v(" "),n("ol",[n("li",[s._v("查看安装位置"),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" mongod\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[s._v("右击Dock中的Finder选中前往文件夹...，输入/usr/local/bin找到这个mongod可执行文件")]),s._v(" "),n("li",[s._v("右击mongod可执行文件，选中显示简介...，可以看到路径例：/usr/local/Cellar/mongodb/3.2.6/bin/mongod")])]),s._v(" "),n("h3",{attrs:{id:"_2-查找plist配置启动项文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-查找plist配置启动项文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 2. 查找plist配置启动项文件")]),s._v(" "),n("p",[s._v("使用homebrew安装mongodb会产生一个启动项配置文件，一般位于mongod可执行文件的上一级bin文件所在的目录文件中。")]),s._v(" "),n("h3",{attrs:{id:"_3-修改plist配置启动项文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-修改plist配置启动项文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 3. 修改plist配置启动项文件")]),s._v(" "),n("ol",[n("li",[s._v("使用vim或者xcode打开plist配置文件，该文件名可能类似于homebrew.mxcl.mongodb.plist")]),s._v(" "),n("li",[s._v("方便起见，修改文件名为mongodb.plist")]),s._v(" "),n("li",[s._v("修改其中的Label为mongodb,与文件名相同")]),s._v(" "),n("li",[s._v("修改ProgramArguments的可执行进程为可执行文件mongod的位置，例如以上/usr/local/Cellar/mongodb/3.2.6/bin/mongod，可删除ProgramArguments的其余项。")])]),s._v(" "),n("h3",{attrs:{id:"_4-拷贝plist配置启动项文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-拷贝plist配置启动项文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 4. 拷贝plist配置启动项文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cp mongodb.plist /Library/LaunchDaemons/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[s._v("提示："),n("code",[s._v("mongodb.plist")]),s._v("如果不是在当前的文件夹路径下，先进入所在文件夹，注意该目录与"),n("code",[s._v("~/Library/LaunchDaemons/")]),s._v("和"),n("code",[s._v("/System/Library/LaunchDaemons/")]),s._v("的区别。")])]),s._v(" "),n("h2",{attrs:{id:"_5-启动服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-启动服务","aria-hidden":"true"}},[s._v("#")]),s._v(" 5.启动服务")]),s._v(" "),n("p",[s._v("使用root权限")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" -s\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("启动服务")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" launchctl load -w /Library/LaunchDaemons/mongodb.plist \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("关闭服务")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" launchctl unload -w /Library/LaunchDaemons/mongodb.plist   \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("若发现以下错误：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("Path had bad permissions\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("是因为文件的权限不够，将权限修改为root,执行以下命令，再执行启动服务")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" root mongodb.plist \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("测试数据库是否可启动\n使用"),n("code",[s._v("CMD + N")]),s._v("新建一个终端，输入"),n("code",[s._v("mongo")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("Last login: Tue Jun  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":50:28 on ttys001\nvictor:~ victor$ mongo\nMongoDB shell version: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v(".6\nconnecting to: "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("表明连接成功！如果关机重新启动，仍然可以连接数据库。")]),s._v(" "),n("blockquote",[n("p",[s._v("提示：如果有"),n("code",[s._v("RoboMongo")]),s._v("等mongdodb可视化工具，在启动服务时可以尝试连接数据库，此时应该可以连接上数据库。")])])])}),[],!1,null,null,null);a.default=t.exports}}]);