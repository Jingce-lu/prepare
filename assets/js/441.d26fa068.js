(window.webpackJsonp=window.webpackJsonp||[]).push([[441],{594:function(s,e,a){"use strict";a.r(e);var t=a(1),n=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"gitlab-ci初探"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-ci初探","aria-hidden":"true"}},[s._v("#")]),s._v(" Gitlab-CI初探")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#gitlab-ci%E5%88%9D%E6%8E%A2"}},[s._v("Gitlab-CI初探")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#1%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"}},[s._v("1.准备工作")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#2%E6%96%B0%E5%BB%BAgitlab-ciyml"}},[s._v("2.新建.gitlab-ci.yml")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#3%E5%AE%89%E8%A3%85gitlab-runner%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8"}},[s._v("3.安装Gitlab Runner到服务器")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#4pipeline"}},[s._v("4.Pipeline")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#5stages"}},[s._v("5.stages")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#6%E9%85%8D%E7%BD%AEgitlab-ciyml"}},[s._v("6.配置.gitlab-ci.yml")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#7%E6%9B%B4%E6%94%B9%E6%89%A7%E8%A1%8C%E7%94%A8%E6%88%B7"}},[s._v("7.更改执行用户")])])])])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://gitlab.com/help/ci/quick_start/README",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方README"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"_1-准备工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-准备工作","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.准备工作")]),s._v(" "),a("ul",[a("li",[s._v("一台服务器")]),s._v(" "),a("li",[s._v("注册"),a("code",[s._v("gitlab")]),s._v("账号，并且新建一个项目")])]),s._v(" "),a("h2",{attrs:{id:"_2-新建-gitlab-ci-yml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-新建-gitlab-ci-yml","aria-hidden":"true"}},[s._v("#")]),s._v(" 2.新建.gitlab-ci.yml")]),s._v(" "),a("p",[s._v("项目下新建文件 "),a("code",[s._v(".gitlab-ci.yml")]),s._v("，你也可以使用 "),a("code",[s._v("Web IDE")]),s._v(" 在线新建文件")]),s._v(" "),a("h2",{attrs:{id:"_3-安装gitlab-runner到服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装gitlab-runner到服务器","aria-hidden":"true"}},[s._v("#")]),s._v(" 3.安装Gitlab Runner到服务器")]),s._v(" "),a("p",[s._v("登录你的服务器")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# For Debian/Ubuntu")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -L https://packages.gitlab.com/install/repositories/runner/gitlab-ci-multi-runner/script.deb.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gitlab-ci-multi-runner\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# For CentOS")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -L https://packages.gitlab.com/install/repositories/runner/gitlab-ci-multi-runner/script.rpm.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gitlab-ci-multi-runner\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("ol",[a("li",[a("p",[s._v("接下来注册一个"),a("code",[s._v("Runner")])]),s._v(" "),a("div",{staticClass:"language-bash\\ line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo gitlab-runner register\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("然后会出现以下提示，我们直接输入 https://gitlab.com")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com )\nhttps://gitlab.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("输入"),a("code",[s._v("gitlab")]),s._v("新建项目"),a("code",[s._v("CI")]),s._v("的"),a("code",[s._v("token")]),s._v("，token在项目内的 "),a("code",[s._v("Setting")]),s._v(" -> "),a("code",[s._v("CI/CD")]),s._v(" -> "),a("code",[s._v("Runners")]),s._v("（点击expand展开）")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Please enter the gitlab-ci token for this runner\n这里填token\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),s._v(" "),a("img",{attrs:{src:s.$withBase("/images/other/git/ci-token.jpg"),alt:"other/git/ci-token.jpg"}})]),s._v(" "),a("li",[a("p",[s._v("输入"),a("code",[s._v("runner")]),s._v("的描述")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Please enter the gitlab-ci description for this runner\n这里随便填\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("命名"),a("code",[s._v("tag")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Please enter the gitlab-ci tags for this runner (comma separated):\nmy-tag // 每一个runner的唯一id，也可以在gitlab后台修改。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("是否接收未指定 "),a("code",[s._v("tags")]),s._v(" 的任务")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Whether to run untagged builds [true/false]\n[false]: false\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("选择是否为当前项目锁定该 "),a("code",[s._v("Runner")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Whether to lock Runner to current project [true/false]:\n[false]: false\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("选择 "),a("code",[s._v("Runner executor")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("Please enter the executor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" virtualbox"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("machine"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ssh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" shell"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ssh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ssh"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("machine"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" kubernetes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" docker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parallels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\nshell  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这里选shell，很多人使用的是docker")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 最后会告诉你注册成功")]),s._v("\nRunner registered successfully"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" Feel free to start it"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" but "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" it's running already the config should be automatically reloaded"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])]),s._v(" "),a("p",[s._v("现在刷新一下之前复制token的地方看看，是不是刚刚新建的runner生效了")]),s._v(" "),a("h2",{attrs:{id:"_4-pipeline"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-pipeline","aria-hidden":"true"}},[s._v("#")]),s._v(" 4.Pipeline")]),s._v(" "),a("p",[s._v("一次 "),a("code",[s._v("Pipeline")]),s._v(" 相当于一次构建任务，里面可以包含多个流程，如安装依赖、运行测试、编译、部署测试服务器、部署生产服务器等流程。我们的任何提交或者 "),a("code",[s._v("Merge Request")]),s._v(" 的合并都可以触发 "),a("code",[s._v("Pipeline")]),s._v("。如下图：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("+------------------+           +----------------+\n|                  |  trigger  |                |\n|   Commit / MR    +----------\x3e+    Pipeline    |\n|                  |           |                |\n+------------------+           +----------------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"_5-stages"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-stages","aria-hidden":"true"}},[s._v("#")]),s._v(" 5.stages")]),s._v(" "),a("p",[a("code",[s._v("stages")]),s._v("表示构建阶段")]),s._v(" "),a("ul",[a("li",[s._v("所有 "),a("code",[s._v("stages")]),s._v(" 会按照顺序运行，即当一个 "),a("code",[s._v("stage")]),s._v(" 完成后，下一个 "),a("code",[s._v("stage")]),s._v(" 才会开始")]),s._v(" "),a("li",[s._v("只有当所有 "),a("code",[s._v("stages")]),s._v(" 完成后，该构建任务 (Pipeline) 才会成功")]),s._v(" "),a("li",[s._v("如果任何一个 "),a("code",[s._v("stage")]),s._v(" 失败，那么后面的 "),a("code",[s._v("stages")]),s._v(" 不会执行，该构建任务 (Pipeline) 失败")])]),s._v(" "),a("p",[s._v("一个"),a("code",[s._v("Pipeline")]),s._v("会有多个"),a("code",[s._v("Stage")]),s._v("，一步步执行")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("+--------------------------------------------------------+\n|                                                        |\n|  Pipeline                                              |\n|                                                        |\n|  +-----------+     +------------+      +------------+  |\n|  |  Stage 1  |----\x3e|   Stage 2  |-----\x3e|   Stage 3  |  |\n|  +-----------+     +------------+      +------------+  |\n|                                                        |\n+--------------------------------------------------------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"_6-配置-gitlab-ci-yml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-配置-gitlab-ci-yml","aria-hidden":"true"}},[s._v("#")]),s._v(" 6.配置.gitlab-ci.yml")]),s._v(" "),a("p",[s._v("之前我们新建了"),a("code",[s._v(".gitlab-ci.yml")]),s._v("，那么我们来填写一些内容，让"),a("code",[s._v("CI")]),s._v("变得可用")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("stages: \n    - build\n    - test\n    \njob2:\n  stage: test \n  script:\n    - touch test.json\n  only:\n    - master  \n  tags:\n    - my-tag  \n    \njob1:\n  stage: build  \n  script:\n    - npm init -y\n  only:\n    - master  \n  tags:\n    - my-tag\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("stages")]),s._v(" 就是我们上面讲的构建阶段，这里有两个阶段，先"),a("code",[s._v("build")]),s._v("然后"),a("code",[s._v("test")]),s._v("，会先执行任务 "),a("code",[s._v("job1")]),s._v(" 然后 执行 "),a("code",[s._v("job2")]),s._v("，这里"),a("code",[s._v("job1/2")]),s._v("名称可用随便取，不影响")]),s._v(" "),a("li",[a("code",[s._v("stage")]),s._v(" 表示构建的子任务")]),s._v(" "),a("li",[a("code",[s._v("script")]),s._v(" 执行的"),a("code",[s._v("shell")]),s._v("命令")]),s._v(" "),a("li",[a("code",[s._v("only")]),s._v(" 这里填写表示只有在"),a("code",[s._v("master")]),s._v("做操作的时候会触发这个构建")]),s._v(" "),a("li",[a("code",[s._v("tags")]),s._v(" 这就是我们之前在服务器命名的"),a("code",[s._v("tag")]),s._v("，必填")])]),s._v(" "),a("p",[s._v("我们把这个文件"),a("code",[s._v("push")]),s._v("到"),a("code",[s._v("master")]),s._v("，然后在 "),a("code",[s._v("CI/CD -> Pipelines")]),s._v(" 查看我们正在执行的任务")]),s._v(" "),a("img",{attrs:{src:s.$withBase("/images/other/git/ci-pipe.jpg"),alt:"other/git/ci-pipe.jpg"}}),s._v(" "),a("p",[s._v("如果"),a("code",[s._v("status")]),s._v("显示"),a("code",[s._v("passed")]),s._v("了，则代表运行成功")]),s._v(" "),a("p",[s._v("至此，大功告成")]),s._v(" "),a("h2",{attrs:{id:"_7-更改执行用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-更改执行用户","aria-hidden":"true"}},[s._v("#")]),s._v(" 7.更改执行用户")]),s._v(" "),a("p",[s._v("你可能在上面一步会发现 "),a("code",[s._v("npm not found")]),s._v("的情况，但是服务器已经安装了"),a("code",[s._v("node")])]),s._v(" "),a("p",[s._v("因为"),a("code",[s._v("gitlab-ci")]),s._v("的"),a("code",[s._v("runner")]),s._v("默认使用"),a("code",[s._v("gitlab-runner")]),s._v("用户执行操作")]),s._v(" "),a("p",[s._v("通过指令"),a("code",[s._v("ps aux|grep gitlab-runner")]),s._v("可以看到：")]),s._v(" "),a("p",[a("code",[s._v("/usr/bin/gitlab-ci-multi-runner run --working-directory /home/gitlab-runner --config /etc/gitlab-runner/config.toml --service gitlab-runner --syslog --user gitlab-runner")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("--working-directory")]),s._v("：设置工作目录, 默认是/home/{执行user}")]),s._v(" "),a("li",[a("code",[s._v("--config")]),s._v("：设置配置文件目录，默认是/etc/gitlab-runner/config.toml")]),s._v(" "),a("li",[a("code",[s._v("--user")]),s._v("：设置执行用户名，默认是gitlab-runner")])]),s._v(" "),a("p",[s._v("因此想要更改"),a("code",[s._v("user")]),s._v("为"),a("code",[s._v("root")]),s._v("只需要重新设置"),a("code",[s._v("--user")]),s._v("属性即可，步骤如下：")]),s._v(" "),a("ol",[a("li",[s._v("删除"),a("code",[s._v("gitlab-runner")]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" gitlab-runner uninstall\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[s._v("切换为"),a("code",[s._v("root")]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("gitlab-runner "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --working-directory /home/gitlab-runner --user root\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[s._v("重启"),a("code",[s._v("gitlab-runner")]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" gitlab-runner restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("p",[s._v("重新提交一下"),a("code",[s._v(".gitlab-cli.yaml")]),s._v("，应该就能够跑通了")])])}),[],!1,null,null,null);e.default=n.exports}}]);