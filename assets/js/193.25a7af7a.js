(window.webpackJsonp=window.webpackJsonp||[]).push([[193],{742:function(a,s,t){"use strict";t.r(s);var n=t(1),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"webpack面试题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack面试题","aria-hidden":"true"}},[a._v("#")]),a._v(" webpack面试题")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#webpack%E9%9D%A2%E8%AF%95%E9%A2%98"}},[a._v("webpack面试题")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#webpack%E4%B8%8Egruntgulp%E7%9A%84%E4%B8%8D%E5%90%8C"}},[a._v("webpack与grunt、gulp的不同？")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#webpackrollupparcel%E4%BC%98%E5%8A%A3"}},[a._v("webpack、rollup、parcel优劣？")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B8%B8%E8%A7%81%E7%9A%84loader"}},[a._v("有哪些常见的Loader？")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B8%B8%E8%A7%81%E7%9A%84plugin"}},[a._v("有哪些常见的Plugin？")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E5%88%86%E5%88%AB%E4%BB%8B%E7%BB%8Dbundlechunkmodule%E6%98%AF%E4%BB%80%E4%B9%88"}},[a._v("分别介绍bundle，chunk，module是什么")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#loader%E5%92%8Cplugin%E7%9A%84%E4%B8%8D%E5%90%8C"}},[a._v("Loader和Plugin的不同？")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#webpack%E7%9A%84%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88"}},[a._v("webpack的构建流程是什么?")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E6%98%AF%E5%90%A6%E5%86%99%E8%BF%87loader%E5%92%8Cplugin%E6%8F%8F%E8%BF%B0%E4%B8%80%E4%B8%8B%E7%BC%96%E5%86%99loader%E6%88%96plugin%E7%9A%84%E6%80%9D%E8%B7%AF"}},[a._v("是否写过Loader和Plugin？描述一下编写loader或plugin的思路？")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#webpack%E7%9A%84%E7%83%AD%E6%9B%B4%E6%96%B0%E6%98%AF%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E7%9A%84%E8%AF%B4%E6%98%8E%E5%85%B6%E5%8E%9F%E7%90%86"}},[a._v("webpack的热更新是如何做到的？说明其原理？")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E5%A6%82%E4%BD%95%E7%94%A8webpack%E6%9D%A5%E4%BC%98%E5%8C%96%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD"}},[a._v("如何用webpack来优化前端性能？")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98webpack%E7%9A%84%E6%89%93%E5%8C%85%E9%80%9F%E5%BA%A6"}},[a._v("如何提高webpack的打包速度?")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98webpack%E7%9A%84%E6%9E%84%E5%BB%BA%E9%80%9F%E5%BA%A6"}},[a._v("如何提高webpack的构建速度？")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E6%80%8E%E4%B9%88%E9%85%8D%E7%BD%AE%E5%8D%95%E9%A1%B5%E5%BA%94%E7%94%A8%E6%80%8E%E4%B9%88%E9%85%8D%E7%BD%AE%E5%A4%9A%E9%A1%B5%E5%BA%94%E7%94%A8"}},[a._v("怎么配置单页应用？怎么配置多页应用？")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#webpack-%E7%83%AD%E6%9B%B4%E6%96%B0%E5%8E%9F%E7%90%86"}},[a._v("webpack 热更新原理")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#code-split-%E4%BB%8B%E7%BB%8D"}},[a._v("code split 介绍")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#webpack%E4%BC%98%E5%8C%96"}},[a._v("webpack优化")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#%E6%89%93%E5%8C%85%E5%8E%9F%E7%90%86"}},[a._v("打包原理")])])])])]),a._v(" "),t("h2",{attrs:{id:"webpack与grunt、gulp的不同？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack与grunt、gulp的不同？","aria-hidden":"true"}},[a._v("#")]),a._v(" webpack与grunt、gulp的不同？")]),a._v(" "),t("p",[a._v("Grunt、Gulp是基于任务运行的工具：")]),a._v(" "),t("p",[a._v("它们会自动执行指定的任务，就像流水线，把资源放上去然后通过不同插件进行加工，它们包含活跃的社区，丰富的插件，能方便的打造各种工作流。")]),a._v(" "),t("p",[a._v("Webpack是基于模块化打包的工具:")]),a._v(" "),t("p",[a._v("自动化处理模块,webpack把一切当成模块，当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。")]),a._v(" "),t("p",[a._v("因此这是完全不同的两类工具,而现在主流的方式是用npm script代替Grunt、Gulp,npm script同样可以打造任务流.")]),a._v(" "),t("h2",{attrs:{id:"webpack、rollup、parcel优劣？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack、rollup、parcel优劣？","aria-hidden":"true"}},[a._v("#")]),a._v(" webpack、rollup、parcel优劣？")]),a._v(" "),t("p",[t("strong",[a._v("webpack")]),a._v("适用于大型复杂的前端站点构建: webpack有强大的loader和插件生态,\b打包后的文件实际上就是一个立即执行函数，这个立即执行函数接收一个参数，这个参数是模块对象，键为各个模块的路径，值为模块内容。立即执行函数内部则处理模块之间的引用，执行模块等,这种情况更适合文件依赖复杂的应用开发.")]),a._v(" "),t("p",[t("strong",[a._v("rollup")]),a._v("适用于基础库的打包，如vue、d3等: Rollup 就是将各个模块打包进一个文件中，并且通过 Tree-shaking 来删除无用的代码,可以最大程度上降低代码体积,但是rollup没有webpack如此多的的如代码分割、按需加载等高级功能，其更聚焦于库的打包，因此更适合库的开发.")]),a._v(" "),t("p",[t("strong",[a._v("parcel")]),a._v("适用于简单的实验性项目: 他可以满足低门槛的快速看到效果,但是生态差、报错信息不够全面都是他的硬伤，除了一些玩具项目或者实验项目不建议使用")]),a._v(" "),t("h2",{attrs:{id:"有哪些常见的loader？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#有哪些常见的loader？","aria-hidden":"true"}},[a._v("#")]),a._v(" 有哪些常见的Loader？")]),a._v(" "),t("ul",[t("li",[a._v("file-loader：把文件输出到一个文件夹中，在代码中通过相对 URL 去引用输出的文件")]),a._v(" "),t("li",[a._v("url-loader：和 file-loader 类似，但是能在文件很小的情况下以 base64 的方式把文件内容注入到代码中去")]),a._v(" "),t("li",[a._v("source-map-loader：加载额外的 Source Map 文件，以方便断点调试")]),a._v(" "),t("li",[a._v("image-loader：加载并且压缩图片文件")]),a._v(" "),t("li",[a._v("babel-loader：把 ES6 转换成 ES5")]),a._v(" "),t("li",[a._v("css-loader：加载 CSS，支持模块化、压缩、文件导入等特性")]),a._v(" "),t("li",[a._v("style-loader：把 CSS 代码注入到 JavaScript 中，通过 DOM 操作去加载 CSS。")]),a._v(" "),t("li",[a._v("eslint-loader：通过 ESLint 检查 JavaScript 代码")])]),a._v(" "),t("h2",{attrs:{id:"有哪些常见的plugin？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#有哪些常见的plugin？","aria-hidden":"true"}},[a._v("#")]),a._v(" 有哪些常见的Plugin？")]),a._v(" "),t("ul",[t("li",[a._v("define-plugin：定义环境变量")]),a._v(" "),t("li",[a._v("html-webpack-plugin：简化html文件创建")]),a._v(" "),t("li",[a._v("uglifyjs-webpack-plugin：通过UglifyES压缩ES6代码")]),a._v(" "),t("li",[a._v("webpack-parallel-uglify-plugin: 多核压缩,提高压缩速度")]),a._v(" "),t("li",[a._v("webpack-bundle-analyzer: 可视化webpack输出文件的体积")]),a._v(" "),t("li",[a._v("mini-css-extract-plugin: CSS提取到单独的文件中,支持按需加载")])]),a._v(" "),t("h2",{attrs:{id:"分别介绍bundle，chunk，module是什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分别介绍bundle，chunk，module是什么","aria-hidden":"true"}},[a._v("#")]),a._v(" 分别介绍bundle，chunk，module是什么")]),a._v(" "),t("ul",[t("li",[a._v("bundle：是由webpack打包出来的文件")]),a._v(" "),t("li",[a._v("chunk：代码块，一个chunk由多个模块组合而成，用于代码的合并和分割")]),a._v(" "),t("li",[a._v("module：是开发中的单个模块，在webpack的世界，一切皆模块，一个模块对应一个文件，webpack会从配置的entry中递归开始找出所有依赖的模块")])]),a._v(" "),t("h2",{attrs:{id:"loader和plugin的不同？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#loader和plugin的不同？","aria-hidden":"true"}},[a._v("#")]),a._v(" Loader和Plugin的不同？")]),a._v(" "),t("p",[t("strong",[a._v("不同的作用")]),a._v(":")]),a._v(" "),t("ul",[t("li",[t("strong",[a._v("Loader")]),a._v('直译为"加载器"。Webpack将一切文件视为模块，但是webpack原生是只能解析js文件，如果想将其他文件也打包的话，就会用到'),t("code",[a._v("loader")]),a._v("。 所以Loader的作用是让webpack拥有了加载和解析_非JavaScript文件_的能力。")]),a._v(" "),t("li",[t("strong",[a._v("Plugin")]),a._v('直译为"插件"。Plugin可以扩展webpack的功能，让webpack具有更多的灵活性。 在 Webpack 运行的生命周期中会广播出许多事件，Plugin 可以监听这些事件，在合适的时机通过 Webpack 提供的 API 改变输出结果。')])]),a._v(" "),t("p",[t("strong",[a._v("不同的用法")]),a._v(":")]),a._v(" "),t("ul",[t("li",[t("strong",[a._v("Loader")]),a._v("在"),t("code",[a._v("module.rules")]),a._v("中配置，也就是说他作为模块的解析规则而存在。 类型为数组，每一项都是一个"),t("code",[a._v("Object")]),a._v("，里面描述了对于什么类型的文件（"),t("code",[a._v("test")]),a._v("），使用什么加载("),t("code",[a._v("loader")]),a._v(")和使用的参数（"),t("code",[a._v("options")]),a._v("）")]),a._v(" "),t("li",[t("strong",[a._v("Plugin")]),a._v("在"),t("code",[a._v("plugins")]),a._v("中单独配置。 类型为数组，每一项是一个"),t("code",[a._v("plugin")]),a._v("的实例，参数都通过构造函数传入。")])]),a._v(" "),t("h2",{attrs:{id:"webpack的构建流程是什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack的构建流程是什么","aria-hidden":"true"}},[a._v("#")]),a._v(" webpack的构建流程是什么?")]),a._v(" "),t("p",[a._v("Webpack 的运行流程是一个串行的过程，从启动到结束会依次执行以下流程：")]),a._v(" "),t("ol",[t("li",[a._v("初始化参数：从配置文件和 Shell 语句中读取与合并参数，得出最终的参数；")]),a._v(" "),t("li",[a._v("开始编译：用上一步得到的参数初始化 Compiler 对象，加载所有配置的插件，执行对象的 run 方法开始执行编译；")]),a._v(" "),t("li",[a._v("确定入口：根据配置中的 entry 找出所有的入口文件；")]),a._v(" "),t("li",[a._v("编译模块：从入口文件出发，调用所有配置的 Loader 对模块进行翻译，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理；")]),a._v(" "),t("li",[a._v("完成模块编译：在经过第4步使用 Loader 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的依赖关系；")]),a._v(" "),t("li",[a._v("输出资源：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会；")]),a._v(" "),t("li",[a._v("输出完成：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统。")])]),a._v(" "),t("p",[a._v("在以上过程中，Webpack 会在特定的时间点广播出特定的事件，插件在监听到感兴趣的事件后会执行特定的逻辑，并且插件可以调用 Webpack 提供的 API 改变 Webpack 的运行结果。")]),a._v(" "),t("h2",{attrs:{id:"是否写过loader和plugin？描述一下编写loader或plugin的思路？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#是否写过loader和plugin？描述一下编写loader或plugin的思路？","aria-hidden":"true"}},[a._v("#")]),a._v(" 是否写过Loader和Plugin？描述一下编写loader或plugin的思路？")]),a._v(" "),t("p",[a._v('Loader像一个"翻译官"把读到的源文件内容转义成新的文件内容，并且每个Loader通过链式操作，将源文件一步步翻译成想要的样子。')]),a._v(" "),t("p",[a._v('编写Loader时要遵循单一原则，每个Loader只做一种"转义"工作。 每个Loader的拿到的是源文件内容（'),t("code",[a._v("source")]),a._v("），可以通过返回值的方式将处理后的内容输出，也可以调用"),t("code",[a._v("this.callback()")]),a._v("方法，将内容返回给webpack。 还可以通过 "),t("code",[a._v("this.async()")]),a._v("生成一个"),t("code",[a._v("callback")]),a._v("函数，再用这个callback将处理后的内容输出出去。 此外webpack还为开发者准备了开发loader的工具函数集——"),t("code",[a._v("loader-utils")]),a._v("。")]),a._v(" "),t("p",[a._v("相对于Loader而言，Plugin的编写就灵活了许多。 webpack在运行的生命周期中会广播出许多事件，Plugin 可以监听这些事件，在合适的时机通过 Webpack 提供的 API 改变输出结果。")]),a._v(" "),t("h2",{attrs:{id:"webpack的热更新是如何做到的？说明其原理？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack的热更新是如何做到的？说明其原理？","aria-hidden":"true"}},[a._v("#")]),a._v(" webpack的热更新是如何做到的？说明其原理？")]),a._v(" "),t("p",[a._v("webpack的热更新又称热替换（Hot Module Replacement），缩写为HMR。 这个机制可以做到不用刷新浏览器而将新变更的模块替换掉旧的模块。")]),a._v(" "),t("p",[a._v("原理：")]),a._v(" "),t("img",{attrs:{src:a.$withBase("/images/engineering/hmr.png"),alt:"images/engineering/hmr.png"}}),a._v(" "),t("p",[a._v("首先要知道server端和client端都做了处理工作")]),a._v(" "),t("ol",[t("li",[a._v("第一步，在 webpack 的 watch 模式下，文件系统中某一个文件发生修改，webpack 监听到文件变化，根据配置文件对模块重新编译打包，并将打包后的代码通过简单的 JavaScript 对象保存在内存中。")]),a._v(" "),t("li",[a._v("第二步是 webpack-dev-server 和 webpack 之间的接口交互，而在这一步，主要是 dev-server 的中间件 webpack-dev-middleware 和 webpack 之间的交互，webpack-dev-middleware 调用 webpack 暴露的 API对代码变化进行监控，并且告诉 webpack，将代码打包到内存中。")]),a._v(" "),t("li",[a._v("第三步是 webpack-dev-server 对文件变化的一个监控，这一步不同于第一步，并不是监控代码变化重新打包。当我们在配置文件中配置了devServer.watchContentBase 为 true 的时候，Server 会监听这些配置文件夹中静态文件的变化，变化后会通知浏览器端对应用进行 live reload。注意，这儿是浏览器刷新，和 HMR 是两个概念。")]),a._v(" "),t("li",[a._v("第四步也是 webpack-dev-server 代码的工作，该步骤主要是通过 sockjs（webpack-dev-server 的依赖）在浏览器端和服务端之间建立一个 websocket 长连接，将 webpack 编译打包的各个阶段的状态信息告知浏览器端，同时也包括第三步中 Server 监听静态文件变化的信息。浏览器端根据这些 socket 消息进行不同的操作。当然服务端传递的最主要信息还是新模块的 hash 值，后面的步骤根据这一 hash 值来进行模块热替换。")]),a._v(" "),t("li",[a._v("webpack-dev-server/client 端并不能够请求更新的代码，也不会执行热更模块操作，而把这些工作又交回给了 webpack，webpack/hot/dev-server 的工作就是根据 webpack-dev-server/client 传给它的信息以及 dev-server 的配置决定是刷新浏览器呢还是进行模块热更新。当然如果仅仅是刷新浏览器，也就没有后面那些步骤了。")]),a._v(" "),t("li",[a._v("HotModuleReplacement.runtime 是客户端 HMR 的中枢，它接收到上一步传递给他的新模块的 hash 值，它通过 JsonpMainTemplate.runtime 向 server 端发送 Ajax 请求，服务端返回一个 json，该 json 包含了所有要更新的模块的 hash 值，获取到更新列表后，该模块再次通过 jsonp 请求，获取到最新的模块代码。这就是上图中 7、8、9 步骤。")]),a._v(" "),t("li",[a._v("而第 10 步是决定 HMR 成功与否的关键步骤，在该步骤中，HotModulePlugin 将会对新旧模块进行对比，决定是否更新模块，在决定更新模块后，检查模块之间的依赖关系，更新模块的同时更新模块间的依赖引用。")]),a._v(" "),t("li",[a._v("最后一步，当 HMR 失败后，回退到 live reload 操作，也就是进行浏览器刷新来获取最新打包代码。")])]),a._v(" "),t("h2",{attrs:{id:"如何用webpack来优化前端性能？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何用webpack来优化前端性能？","aria-hidden":"true"}},[a._v("#")]),a._v(" 如何用webpack来优化前端性能？")]),a._v(" "),t("p",[a._v("用webpack优化前端性能是指优化webpack的输出结果，让打包的最终结果在浏览器运行快速高效。")]),a._v(" "),t("ul",[t("li",[a._v("压缩代码:删除多余的代码、注释、简化代码的写法等等方式。可以利用webpack的"),t("code",[a._v("UglifyJsPlugin")]),a._v("和"),t("code",[a._v("ParallelUglifyPlugin")]),a._v("来压缩JS文件， 利用"),t("code",[a._v("cssnano")]),a._v("（css-loader?minimize）来压缩css")]),a._v(" "),t("li",[a._v("利用CDN加速: 在构建过程中，将引用的静态资源路径修改为CDN上对应的路径。可以利用webpack对于"),t("code",[a._v("output")]),a._v("参数和各loader的"),t("code",[a._v("publicPath")]),a._v("参数来修改资源路径")]),a._v(" "),t("li",[a._v("Tree Shaking: 将代码中永远不会走到的片段删除掉。可以通过在启动webpack时追加参数"),t("code",[a._v("--optimize-minimize")]),a._v("来实现")]),a._v(" "),t("li",[a._v("Code Splitting: 将代码按路由维度或者组件分块(chunk),这样做到按需加载,同时可以充分利用浏览器缓存")]),a._v(" "),t("li",[a._v("提取公共第三方库:  SplitChunksPlugin插件来进行公共模块抽取,利用浏览器缓存可以长期缓存这些无需频繁变动的公共代码")])]),a._v(" "),t("h2",{attrs:{id:"如何提高webpack的打包速度"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何提高webpack的打包速度","aria-hidden":"true"}},[a._v("#")]),a._v(" 如何提高webpack的打包速度?")]),a._v(" "),t("ul",[t("li",[a._v("happypack: 利用进程并行编译loader,利用缓存来使得 rebuild 更快,遗憾的是作者表示已经不会继续开发此项目,类似的替代者是"),t("a",{attrs:{href:"https://github.com/webpack-contrib/thread-loader",target:"_blank",rel:"noopener noreferrer"}},[a._v("thread-loader"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://webpack.docschina.org/configuration/externals/",target:"_blank",rel:"noopener noreferrer"}},[a._v("外部扩展(externals)"),t("OutboundLink")],1),a._v(": 将不怎么需要更新的第三方库脱离webpack打包，不被打入bundle中，从而减少打包时间,比如jQuery用script标签引入")]),a._v(" "),t("li",[a._v("dll: 采用webpack的 DllPlugin 和 DllReferencePlugin 引入dll，让一些基本不会改动的代码先打包成静态资源,避免反复编译浪费时间")]),a._v(" "),t("li",[a._v("利用缓存: "),t("code",[a._v("webpack.cache")]),a._v("、babel-loader.cacheDirectory、HappyPack.cache都可以利用缓存提高rebuild效率")]),a._v(" "),t("li",[a._v("缩小文件搜索范围: 比如babel-loader插件,如果你的文件仅存在于src中,那么可以"),t("code",[a._v("include: path.resolve(__dirname, 'src')")]),a._v(",当然绝大多数情况下这种操作的提升有限,除非不小心build了node_modules文件")])]),a._v(" "),t("h2",{attrs:{id:"如何提高webpack的构建速度？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何提高webpack的构建速度？","aria-hidden":"true"}},[a._v("#")]),a._v(" 如何提高webpack的构建速度？")]),a._v(" "),t("ol",[t("li",[a._v("多入口情况下，使用"),t("code",[a._v("CommonsChunkPlugin")]),a._v("来提取公共代码")]),a._v(" "),t("li",[a._v("通过"),t("code",[a._v("externals")]),a._v("配置来提取常用库")]),a._v(" "),t("li",[a._v("利用"),t("code",[a._v("DllPlugin")]),a._v("和"),t("code",[a._v("DllReferencePlugin")]),a._v("预编译资源模块 通过"),t("code",[a._v("DllPlugin")]),a._v("来对那些我们引用但是绝对不会修改的npm包来进行预编译，再通过"),t("code",[a._v("DllReferencePlugin")]),a._v("将预编译的模块加载进来。")]),a._v(" "),t("li",[a._v("使用"),t("code",[a._v("Happypack")]),a._v(" 实现多线程加速编译")]),a._v(" "),t("li",[a._v("使用"),t("code",[a._v("webpack-uglify-parallel")]),a._v("来提升"),t("code",[a._v("uglifyPlugin")]),a._v("的压缩速度。 原理上"),t("code",[a._v("webpack-uglify-parallel")]),a._v("采用了多核并行压缩来提升压缩速度")]),a._v(" "),t("li",[a._v("使用"),t("code",[a._v("Tree-shaking")]),a._v("和"),t("code",[a._v("Scope Hoisting")]),a._v("来剔除多余代码")])]),a._v(" "),t("h2",{attrs:{id:"怎么配置单页应用？怎么配置多页应用？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#怎么配置单页应用？怎么配置多页应用？","aria-hidden":"true"}},[a._v("#")]),a._v(" 怎么配置单页应用？怎么配置多页应用？")]),a._v(" "),t("p",[a._v("单页应用可以理解为webpack的标准模式，直接在"),t("code",[a._v("entry")]),a._v("中指定单页应用的入口即可，这里不再赘述")]),a._v(" "),t("p",[a._v("多页应用的话，可以使用webpack的 "),t("code",[a._v("AutoWebPlugin")]),a._v("来完成简单自动化的构建，但是前提是项目的目录结构必须遵守他预设的规范。 多页应用中要注意的是：")]),a._v(" "),t("ul",[t("li",[a._v("每个页面都有公共的代码，可以将这些代码抽离出来，避免重复的加载。比如，每个页面都引用了同一套css样式表")]),a._v(" "),t("li",[a._v("随着业务的不断扩展，页面可能会不断的追加，所以一定要让入口的配置足够灵活，避免每次添加新页面还需要修改构建配置")])]),a._v(" "),t("h2",{attrs:{id:"webpack-热更新原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack-热更新原理","aria-hidden":"true"}},[a._v("#")]),a._v(" webpack 热更新原理")]),a._v(" "),t("ol",[t("li",[a._v("当修改了一个或多个文件；")]),a._v(" "),t("li",[a._v("文件系统接收更改并通知webpack；")]),a._v(" "),t("li",[a._v("webpack重新编译构建一个或多个模块，并通知HMR服务器进行更新；")]),a._v(" "),t("li",[a._v("HMR Server 使用webSocket通知HMR runtime 需要更新，HMR运行时通过HTTP请求更新jsonp；")]),a._v(" "),t("li",[a._v("HMR运行时替换更新中的模块，如果确定这些模块无法更新，则触发整个页面刷新。")])]),a._v(" "),t("h2",{attrs:{id:"code-split-介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#code-split-介绍","aria-hidden":"true"}},[a._v("#")]),a._v(" code split 介绍")]),a._v(" "),t("p",[a._v("为了减少HTTP请求，通常我们会讲所有代码打包到一个文件中，但是如果文件过大，也会影响页面的加载速度，尤其是会增加白屏时间，所以我们不妨将代码分成一块一块的；并且只在需要的时候去加载它；还可以利用浏览器将这些模块缓存起来；一般情况下分离有两种")]),a._v(" "),t("ul",[t("li",[a._v("将第三方代码从业务代码中抽离（verdor）")]),a._v(" "),t("li",[a._v("根据不同入口的业务代码按需加载（利用 import()语法）")])]),a._v(" "),t("h2",{attrs:{id:"webpack优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack优化","aria-hidden":"true"}},[a._v("#")]),a._v(" webpack优化")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("loader处理结果缓存")]),a._v(" "),t("ol",[t("li",[a._v("babel-loader缓存,通过"),t("code",[a._v("cacheDirectory")]),a._v("开启缓存"),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("webpack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("rules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[a._v("/\\.js$/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  use"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      loader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'babel-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        babelrc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 将 babel 编译过的模块缓存在 webpack_cache 目录下，下次优先复用")]),a._v("\n        cacheDirectory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br")])])]),a._v(" "),t("li",[a._v("eslint-loader缓存,通过"),t("code",[a._v("cache")]),a._v("选项指定缓存路径；注：配置更后如果不起作用则需要将"),t("code",[a._v("cache")]),a._v("文件删除"),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("webpack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("rules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[a._v("/\\.(js|vue)$/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  enforce"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'pre'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  use"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 启动缓存")]),a._v("\n        cache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      loader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" require"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'eslint-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br")])])]),a._v(" "),t("li",[a._v("css/scss缓存通过cache-loader辅助构建结果缓存")])])]),a._v(" "),t("li",[t("p",[a._v("缩小编译范围，减少不必要的编译工作")]),a._v(" "),t("ol",[t("li",[a._v("指定模块解析路径，加速模块查找"),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("webpack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("resolve"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 指定以下目录寻找第三方模块，避免webpack往父级目录递归搜索")]),a._v("\n  modules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'node_modules'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" \n    path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("projectDir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'src'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" \n    path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("projectDir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'node_modules'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])])]),a._v(" "),t("li",[a._v("忽略未用模块化的库，不去解析它们以提升编译速度"),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("webpack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  noParse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[a._v("/node_modules\\/(jQuery|chart\\.js)/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])])]),a._v(" "),t("li",[a._v("为loader添加"),t("code",[a._v("include/exclude")]),a._v("缩小babel的编译范围"),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("webpack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("rules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[a._v("/\\.js$/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    use"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      loader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'babel-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      query"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 将 babel 编译过的模块缓存在 webpack_cache 目录下，下次优先复用")]),a._v("\n        cacheDirectory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./webpack_cache/'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 减少 babel 编译范围，忘记设置会让 webpack 编译慢上好几倍")]),a._v("\n    include"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'src'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br")])])])])]),a._v(" "),t("li",[t("p",[a._v("通过"),t("code",[a._v("webpack-parallel-uglify-plugin")]),a._v("插件开启多个子线程压缩代码")])]),a._v(" "),t("li",[t("p",[a._v("通过"),t("code",[a._v("Happypack")]),a._v("开启多线程加速loader对文件的转换速度")]),a._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    rules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[a._v("/\\.js?$/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        use"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'happypack/loader?id=babel'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        include"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'src'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  plugins"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("HappyPack")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'babel'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      loaders"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        loader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'babel-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        query"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("  \n          cacheDirectory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./webpack_cache/'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br")])])]),a._v(" "),t("li",[t("p",[a._v("用"),t("code",[a._v("DllPlugin")]),a._v("和"),t("code",[a._v("DllReferencePlugin")]),a._v("提前打包公共模块；注：不建议将所有公共模块放在dll中，否则无法用webpack的"),t("code",[a._v("代码分割")]),a._v("和"),t("code",[a._v("按需加载")]),a._v("功能")])]),a._v(" "),t("li",[t("p",[a._v("使用"),t("code",[a._v("ModuleConcatenationPlugin")]),a._v("插件开启"),t("code",[a._v("scope-hoisting(作用域提升)")]),a._v("功能，尽可能的把打包出来的模块合并到一个函数中去（代码需要符合es6的module规范）")]),a._v(" "),t("blockquote",[t("p",[a._v("注意： webpack4中，去掉了这个插件改为"),t("code",[a._v("optimization.concatenateModules")]),a._v("配置，默认"),t("code",[a._v("在生产环境是开启的")])])])]),a._v(" "),t("li",[t("p",[a._v("使用 ES6 模块来开启 "),t("code",[a._v("tree shaking")])])]),a._v(" "),t("li",[t("p",[a._v("按照路由拆分代码，实现按需加载")])]),a._v(" "),t("li",[t("p",[a._v("使用"),t("code",[a._v("webpack-bundle-analyzer对")]),a._v("打包文件进行分析，将大文件模块提取出来在html中单独加载\nwebpack配置：")]),a._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// ...")]),a._v("\nexternals"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'element-ui'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Element'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'v-charts'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'VCharts'")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[a._v("html:")]),a._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("script")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("src")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("https://unpkg.com/element-ui@2.10.0/lib/index.js"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),t("span",{pre:!0,attrs:{class:"token script"}}),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("webpack持久化缓存")])])]),a._v(" "),t("h2",{attrs:{id:"打包原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打包原理","aria-hidden":"true"}},[a._v("#")]),a._v(" 打包原理")]),a._v(" "),t("ul",[t("li",[a._v("识别入口文件, 分析代码, 获取模块依赖, 并且将代码打包为浏览器可以识别的代码")]),a._v(" "),t("li",[a._v("递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle")])])])}),[],!1,null,null,null);s.default=e.exports}}]);