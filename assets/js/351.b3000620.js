(window.webpackJsonp=window.webpackJsonp||[]).push([[351],{480:function(s,a,t){"use strict";t.r(a);var e=t(1),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"发布到github-pages"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布到github-pages","aria-hidden":"true"}},[s._v("#")]),s._v(" 发布到github pages")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#%E5%8F%91%E5%B8%83%E5%88%B0github-pages"}},[s._v("发布到github pages")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#%E6%9E%84%E5%BB%BA%E4%B9%A6%E7%B1%8D"}},[s._v("构建书籍")])]),s._v(" "),t("li",[t("a",{attrs:{href:"#%E5%88%9B%E5%BB%BA-gh-pages-%E5%88%86%E6%94%AF"}},[s._v("创建 gh-pages 分支")])]),s._v(" "),t("li",[t("a",{attrs:{href:"#%E4%B8%8A%E4%BC%A0%E4%B9%A6%E7%B1%8D%E5%86%85%E5%AE%B9%E5%88%B0-github"}},[s._v("上传书籍内容到 GitHub")])]),s._v(" "),t("li",[t("a",{attrs:{href:"#%E9%83%A8%E7%BD%B2%E5%88%B0-gh-pages-%E5%88%86%E6%94%AF"}},[s._v("部署到 gh-pages 分支")])]),s._v(" "),t("li",[t("a",{attrs:{href:"#github-pages-%E7%9A%84%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%94%AF%E6%8C%81%E4%B8%8B%E9%9D%A2-3-%E4%B8%AA%E6%9D%A5%E6%BA%90"}},[s._v("GitHub Pages 的静态资源支持下面 3 个来源：")])])])])]),s._v(" "),t("h2",{attrs:{id:"构建书籍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建书籍","aria-hidden":"true"}},[s._v("#")]),s._v(" 构建书籍")]),s._v(" "),t("p",[s._v("首先，使用 gitbook build 将书籍内容输出到默认目录，也就是当前目录下的 _book 目录。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ gitbook build\nStarting build "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nSuccessfully built"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" _book\nGLOSSARY.html       chapter1            chapter2            gitbook             glossary_index.json index.html          search_index.json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"创建-gh-pages-分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建-gh-pages-分支","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建 gh-pages 分支")]),s._v(" "),t("p",[s._v("执行如下命令来创建分支，并且删除不需要的文件：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout --orphan gh-pages\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" --cached -r "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clean -df\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf *~\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("现在，目录下应该只剩下 _book 目录了，首先，忽略一些文件：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*~"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" .gitignore\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_book"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" .gitignore\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" .gitignore\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Ignore some files"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("然后，加入 _book 下的内容到分支中：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -r _book/* "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Publish book"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"上传书籍内容到-github"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#上传书籍内容到-github","aria-hidden":"true"}},[s._v("#")]),s._v(" 上传书籍内容到 GitHub")]),s._v(" "),t("p",[s._v("现在，可以将编译好的书籍内容上传到 GitHub 中 test 项目的 gh-pages 分支了，虽然这里还没有创建分支，上传和创建会一步完成！")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -u origin gh-pages\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"部署到-gh-pages-分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署到-gh-pages-分支","aria-hidden":"true"}},[s._v("#")]),s._v(" 部署到 gh-pages 分支")]),s._v(" "),t("p",[s._v("这个步骤我使用了 "),t("code",[s._v("gh-pages")]),s._v(" 这个工具，它可以将文件夹一键发布到 GitHub 项目下的 "),t("code",[s._v("gh-pages")]),s._v(" 分支中（其他分支也可以发布，但是在本文下用到的就是 "),t("code",[s._v("gh-pages")]),s._v(" 这个分支）")]),s._v(" "),t("p",[s._v("安装 "),t("code",[s._v("gh-pages")]),s._v(" 工具")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g gh-pages\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("输入以下指令")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ gh-pages -d _book\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后 _book 下的所有文档都会部署到 gh-pages 分支")]),s._v(" "),t("h2",{attrs:{id:"github-pages-的静态资源支持下面-3-个来源："}},[t("a",{staticClass:"header-anchor",attrs:{href:"#github-pages-的静态资源支持下面-3-个来源：","aria-hidden":"true"}},[s._v("#")]),s._v(" GitHub Pages 的静态资源支持下面 3 个来源：")]),s._v(" "),t("ol",[t("li",[s._v("master 分支")]),s._v(" "),t("li",[s._v("master 分支的 /docs 目录")]),s._v(" "),t("li",[s._v("gh-pages 分支")])]),s._v(" "),t("p",[s._v("执行下面命令，将 _book 目录推送到 GitHub 仓库的 gh-pages 分支。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" subtree push --prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("_book origin gh-pages\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("或者在生成静态网页时，将保存的目录指定为 ./docs")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ gitbook build ./ ./docs\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后直接推送到 GitHub 仓库的")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin master\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);