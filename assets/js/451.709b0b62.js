(window.webpackJsonp=window.webpackJsonp||[]).push([[451],{674:function(t,a,s){"use strict";s.r(a);var e=s(1),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"prepare-vue-141-160"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prepare-vue-141-160","aria-hidden":"true"}},[t._v("#")]),t._v(" Prepare Vue 141-160")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#prepare-vue-141-160"}},[t._v("Prepare Vue 141-160")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#141elementui%E8%A1%A8%E6%A0%BC%E7%BB%84%E4%BB%B6%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E8%A1%A8%E5%A4%B4"}},[t._v("141.ElementUI表格组件如何实现动态表头？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#142elementui%E7%9A%84%E7%A9%BF%E6%A2%AD%E7%BB%84%E4%BB%B6%E5%A6%82%E6%9E%9C%E6%95%B0%E6%8D%AE%E9%87%8F%E5%A4%A7%E4%BC%9A%E5%8F%98%E5%8D%A1%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E4%B8%8D%E5%8D%A1%E7%9A%84%E9%97%AE%E9%A2%98%E5%91%A2"}},[t._v("142.ElementUI的穿梭组件如果数据量大会变卡怎么解决不卡的问题呢？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#143elementui%E6%98%AF%E6%80%8E%E4%B9%88%E5%81%9A%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81%E7%9A%84%E5%9C%A8%E5%BE%AA%E7%8E%AF%E9%87%8C%E5%AF%B9%E6%AF%8F%E4%B8%AAinput%E9%AA%8C%E8%AF%81%E6%80%8E%E4%B9%88%E5%81%9A%E5%91%A2"}},[t._v("143.ElementUI是怎么做表单验证的？在循环里对每个input验证怎么做呢？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#144%E8%A7%89%E5%BE%97%E8%A6%81%E6%98%AF%E4%B8%8D%E7%94%A8vuex%E7%9A%84%E8%AF%9D%E4%BC%9A%E5%B8%A6%E6%9D%A5%E5%93%AA%E4%BA%9B%E9%97%AE%E9%A2%98"}},[t._v("144.觉得要是不用vuex的话会带来哪些问题？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#145vuex%E4%BD%BF%E7%94%A8actions%E6%97%B6%E4%B8%8D%E6%94%AF%E6%8C%81%E5%A4%9A%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E6%80%8E%E4%B9%88%E5%8A%9E"}},[t._v("145.vuex使用actions时不支持多参数传递怎么办？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#146%E8%AF%B4%E8%AF%B4%E4%BD%A0%E5%AF%B9router-link%E7%9A%84%E4%BA%86%E8%A7%A3"}},[t._v("146.说说你对router-link的了解")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#147vue-router%E6%9C%89%E5%93%AA%E5%87%A0%E7%A7%8D%E5%AF%BC%E8%88%AA%E9%92%A9%E5%AD%90-%E5%AF%BC%E8%88%AA%E5%AE%88%E5%8D%AB-"}},[t._v("147.vue-router有哪几种导航钩子（ 导航守卫 ）？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#148vue-router%E8%B7%AF%E7%94%B1%E6%9C%89%E5%87%A0%E7%A7%8D%E6%A8%A1%E5%BC%8F%E8%AF%B4%E8%AF%B4%E5%AE%83%E4%BB%AC%E7%9A%84%E5%8C%BA%E5%88%AB"}},[t._v("148.vue-router路由有几种模式？说说它们的区别？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#149%E5%88%87%E6%8D%A2%E8%B7%AF%E7%94%B1%E6%97%B6%E9%9C%80%E8%A6%81%E4%BF%9D%E5%AD%98%E8%8D%89%E7%A8%BF%E7%9A%84%E5%8A%9F%E8%83%BD%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E5%91%A2"}},[t._v("149.切换路由时，需要保存草稿的功能，怎么实现呢？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#150vue-router%E6%80%8E%E4%B9%88%E9%85%8D%E7%BD%AE404%E9%A1%B5%E9%9D%A2"}},[t._v("150.vue-router怎么配置404页面？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#151vue-router%E6%80%8E%E4%B9%88%E9%87%8D%E5%AE%9A%E5%90%91%E9%A1%B5%E9%9D%A2"}},[t._v("151.vue-router怎么重定向页面？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#152vue%E4%B8%AD%E6%98%AF%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8event%E5%AF%B9%E8%B1%A1%E7%9A%84"}},[t._v("152.vue中是如何使用event对象的？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#153vue%E8%83%BD%E7%9B%91%E5%90%AC%E5%88%B0%E6%95%B0%E7%BB%84%E5%8F%98%E5%8C%96%E7%9A%84%E6%96%B9%E6%B3%95%E6%9C%89%E5%93%AA%E4%BA%9B%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%99%E4%BA%9B%E6%96%B9%E6%B3%95%E8%83%BD%E7%9B%91%E5%90%AC%E5%88%B0%E5%91%A2"}},[t._v("153.vue能监听到数组变化的方法有哪些？为什么这些方法能监听到呢？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#154ajaxfetchaxios%E8%BF%99%E4%B8%89%E9%83%BD%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB"}},[t._v("154.ajax、fetch、axios这三都有什么区别？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#155vue%E6%89%93%E5%8C%85%E6%88%90%E6%9C%80%E7%BB%88%E7%9A%84%E6%96%87%E4%BB%B6%E6%9C%89%E5%93%AA%E4%BA%9B"}},[t._v("155.vue打包成最终的文件有哪些？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#156vue%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96%E9%A6%96%E9%A1%B5%E7%9A%84%E5%8A%A0%E8%BD%BD%E9%80%9F%E5%BA%A6"}},[t._v("156.vue如何优化首页的加载速度？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#157%E4%BD%A0%E4%BA%86%E8%A7%A3vue%E7%9A%84diff%E7%AE%97%E6%B3%95%E5%90%97"}},[t._v("157.你了解vue的diff算法吗？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#158%E7%AE%80%E8%BF%B0vue%E4%B8%AD%E7%9A%84dom-diff%E7%AE%97%E6%B3%95"}},[t._v("158.简述vue中的DOM DIFF算法")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#159%E8%AF%B4%E8%AF%B4%E4%BD%A0%E5%AF%B9vue%E7%BB%84%E4%BB%B6%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99%E7%9A%84%E7%90%86%E8%A7%A3"}},[t._v("159.说说你对vue组件的设计原则的理解")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#160%E6%80%8E%E4%B9%88%E7%BC%93%E5%AD%98%E5%BD%93%E5%89%8D%E6%89%93%E5%BC%80%E7%9A%84%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6%E7%BC%93%E5%AD%98%E5%90%8E%E6%83%B3%E6%9B%B4%E6%96%B0%E5%BD%93%E5%89%8D%E7%BB%84%E4%BB%B6%E6%80%8E%E4%B9%88%E5%8A%9E%E5%91%A2"}},[t._v("160.怎么缓存当前打开的路由组件，缓存后想更新当前组件怎么办呢？")])])])])]),t._v(" "),s("h2",{attrs:{id:"_141-elementui表格组件如何实现动态表头？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_141-elementui表格组件如何实现动态表头？","aria-hidden":"true"}},[t._v("#")]),t._v(" 141.ElementUI表格组件如何实现动态表头？")]),t._v(" "),s("p",[t._v("使用自定义表头，即 "),s("code",[t._v("<el-table-column>")]),t._v(" 中传入自定义 slot。")]),t._v(" "),s("p",[t._v("表头整体结构变化则得自己 v-for 表头配置拼 "),s("code",[t._v("<el-table-column>")]),t._v(" 重绘")]),t._v(" "),s("h2",{attrs:{id:"_142-elementui的穿梭组件如果数据量大会变卡怎么解决不卡的问题呢？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_142-elementui的穿梭组件如果数据量大会变卡怎么解决不卡的问题呢？","aria-hidden":"true"}},[t._v("#")]),t._v(" 142.ElementUI的穿梭组件如果数据量大会变卡怎么解决不卡的问题呢？")]),t._v(" "),s("p",[t._v("在 left-footer 的 slot 里面加个翻页组件，"),s("br"),t._v("\n并修改 filter-method 方法重绘穿梭机组件，"),s("br"),t._v("\n大概保持每页 50 条这样子。")]),t._v(" "),s("h2",{attrs:{id:"_143-elementui是怎么做表单验证的？在循环里对每个input验证怎么做呢？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_143-elementui是怎么做表单验证的？在循环里对每个input验证怎么做呢？","aria-hidden":"true"}},[t._v("#")]),t._v(" 143.ElementUI是怎么做表单验证的？在循环里对每个input验证怎么做呢？")]),t._v(" "),s("p",[s("code",[t._v("model")]),t._v(" 绑定表单数据 通过"),s("code",[t._v("prop")]),t._v(" 取表单数值，根据"),s("code",[t._v("rule取form-item rules")]),t._v(" 或则"),s("code",[t._v("rules[prop]")]),t._v("校验")]),t._v(" "),s("h2",{attrs:{id:"_144-觉得要是不用vuex的话会带来哪些问题？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_144-觉得要是不用vuex的话会带来哪些问题？","aria-hidden":"true"}},[t._v("#")]),t._v(" 144.觉得要是不用vuex的话会带来哪些问题？")]),t._v(" "),s("ul",[s("li",[t._v("数据共享不方便")]),t._v(" "),s("li",[t._v("牢牢绑定了this，不好扩展")])]),t._v(" "),s("h2",{attrs:{id:"_145-vuex使用actions时不支持多参数传递怎么办？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_145-vuex使用actions时不支持多参数传递怎么办？","aria-hidden":"true"}},[t._v("#")]),t._v(" 145.vuex使用actions时不支持多参数传递怎么办？")]),t._v(" "),s("p",[t._v("一个Object解决所有问题")]),t._v(" "),s("h2",{attrs:{id:"_146-说说你对router-link的了解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_146-说说你对router-link的了解","aria-hidden":"true"}},[t._v("#")]),t._v(" 146.说说你对router-link的了解")]),t._v(" "),s("p",[t._v("vue-router插件的其中一个组件, 用于跳转路由, 类似于"),s("code",[t._v("a")]),t._v("标签, 它一般也会渲染成a标签, 但是可以通过"),s("code",[t._v("tag")]),t._v("来变更默认渲染元素, 通过"),s("code",[t._v("to")]),t._v("来跳转")]),t._v(" "),s("h2",{attrs:{id:"_147-vue-router有哪几种导航钩子（-导航守卫-）？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_147-vue-router有哪几种导航钩子（-导航守卫-）？","aria-hidden":"true"}},[t._v("#")]),t._v(" 147.vue-router有哪几种导航钩子（ 导航守卫 ）？")]),t._v(" "),s("p",[t._v("三种导航钩子：")]),t._v(" "),s("ol",[s("li",[t._v("全局导航钩子："),s("code",[t._v("router.beforeEach(to,from,next)")]),t._v(" 作用：跳转前进行判断拦截")]),t._v(" "),s("li",[t._v("组件内的钩子")]),t._v(" "),s("li",[t._v("单独路由独享组件")])]),t._v(" "),s("h2",{attrs:{id:"_148-vue-router路由有几种模式？说说它们的区别？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_148-vue-router路由有几种模式？说说它们的区别？","aria-hidden":"true"}},[t._v("#")]),t._v(" 148.vue-router路由有几种模式？说说它们的区别？")]),t._v(" "),s("p",[t._v("共有两种模式")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("hash")]),t._v(": 使用变更hash不会刷新页面的特性, 来变更路由, 做到单页面无刷新,"),s("br"),t._v("\nhash虽然会出现在URL中, 但是不会被包含在Http请求中, 因此hash值改变不会重新加载页面.\n由于hash值变化不会引起浏览器向服务器发出请求, 而且hash改变会触发hashchange事件, 浏览器的进后退也能对其进行控制, 所以在HTML5之前, 基本都是使用hash来实现前端路由.")]),t._v(" "),s("li",[s("strong",[t._v("history")]),t._v(": 利用了HTML5新增的"),s("code",[t._v("pushState()")]),t._v("和"),s("code",[t._v("replaceState()")]),t._v("两个api, 通过这两个api完成URL跳转不会重新加载页面,同时history模式解决了hash模式存在的问题. hash的传参是基于URL的, 如果要传递复杂的数据, 会有体积限制, 而history模式不仅可以在URL里传参, 也可以将数据存放到一个特定的对象中")])]),t._v(" "),s("h2",{attrs:{id:"_149-切换路由时，需要保存草稿的功能，怎么实现呢？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_149-切换路由时，需要保存草稿的功能，怎么实现呢？","aria-hidden":"true"}},[t._v("#")]),t._v(" 149.切换路由时，需要保存草稿的功能，怎么实现呢？")]),t._v(" "),s("p",[t._v("在beforeDestroy中加入check功能,\n当检测到有草稿时, 自动保存到vuex或者storage中或者window中等等")]),t._v(" "),s("p",[t._v("可以用beforeDestroy结合window.onbeforeunload解决性能问题")]),t._v(" "),s("p",[t._v("用keep-alive缓存那个路由")]),t._v(" "),s("h2",{attrs:{id:"_150-vue-router怎么配置404页面？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_150-vue-router怎么配置404页面？","aria-hidden":"true"}},[t._v("#")]),t._v(" 150.vue-router怎么配置404页面？")]),t._v(" "),s("p",[s("code",[t._v("path: '*'")]),t._v("放在最后一个")]),t._v(" "),s("p",[s("code",[t._v("const router = new VueRouter({ mode: 'history', routes: [ { path: '*', component: NotFoundComponent } ] })")])]),t._v(" "),s("h2",{attrs:{id:"_151-vue-router怎么重定向页面？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_151-vue-router怎么重定向页面？","aria-hidden":"true"}},[t._v("#")]),t._v(" 151.vue-router怎么重定向页面？")]),t._v(" "),s("p",[t._v("路由中配置"),s("code",[t._v("redirect")]),t._v("属性")]),t._v(" "),s("h2",{attrs:{id:"_152-vue中是如何使用event对象的？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_152-vue中是如何使用event对象的？","aria-hidden":"true"}},[t._v("#")]),t._v(" 152.vue中是如何使用event对象的？")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("@click=“func”")]),t._v(" 默认第一个参数传入event对象")]),t._v(" "),s("li",[s("code",[t._v('@click="func(0, $event)"')]),t._v(" 如果自己需要传入参数和event对象，则需要使用"),s("code",[t._v("$event")]),t._v("来获取event对象并传入func")])]),t._v(" "),s("h2",{attrs:{id:"_153-vue能监听到数组变化的方法有哪些？为什么这些方法能监听到呢？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_153-vue能监听到数组变化的方法有哪些？为什么这些方法能监听到呢？","aria-hidden":"true"}},[t._v("#")]),t._v(" 153.vue能监听到数组变化的方法有哪些？为什么这些方法能监听到呢？")]),t._v(" "),s("ul",[s("li",[t._v("push()")]),t._v(" "),s("li",[t._v("pop()")]),t._v(" "),s("li",[t._v("shift()")]),t._v(" "),s("li",[t._v("unshift()")]),t._v(" "),s("li",[t._v("splice()")]),t._v(" "),s("li",[t._v("sort()")]),t._v(" "),s("li",[t._v("reverse()")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-images.githubusercontent.com/20291026/60637403-de8d0e00-9e4c-11e9-8793-3c29f24dda59.png",alt:"源码"}})]),t._v(" "),s("h2",{attrs:{id:"_154-ajax、fetch、axios这三都有什么区别？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_154-ajax、fetch、axios这三都有什么区别？","aria-hidden":"true"}},[t._v("#")]),t._v(" 154.ajax、fetch、axios这三都有什么区别？")]),t._v(" "),s("ul",[s("li",[t._v("ajax是概念 异步交换数据的概念")]),t._v(" "),s("li",[t._v("fetch是浏览器提供的webAPI 原理是基于xmlHttpRequest的封装")]),t._v(" "),s("li",[t._v("axios是第三方库 基于xmlHttpRequest的封装 使用更便捷")])]),t._v(" "),s("h2",{attrs:{id:"_155-vue打包成最终的文件有哪些？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_155-vue打包成最终的文件有哪些？","aria-hidden":"true"}},[t._v("#")]),t._v(" 155.vue打包成最终的文件有哪些？")]),t._v(" "),s("p",[t._v("vendor.js, app.js, app.css,")]),t._v(" "),s("ol",[s("li",[t._v("xxx.js")]),t._v(" "),s("li",[t._v("xxx.js")])]),t._v(" "),s("p",[t._v("如果有设置到单独提取css的话\n还有")]),t._v(" "),s("ol",[s("li",[t._v("xxx.css\n......")])]),t._v(" "),s("h2",{attrs:{id:"_156-vue如何优化首页的加载速度？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_156-vue如何优化首页的加载速度？","aria-hidden":"true"}},[t._v("#")]),t._v(" 156.vue如何优化首页的加载速度？")]),t._v(" "),s("p",[t._v("异步路由和异步加载\n还有分屏加载, 按需加载, 延时加载图片等, cdn, 域名才分")]),t._v(" "),s("p",[t._v("不要什么东西动不动就打包到vendor中")]),t._v(" "),s("h2",{attrs:{id:"_157-你了解vue的diff算法吗？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_157-你了解vue的diff算法吗？","aria-hidden":"true"}},[t._v("#")]),t._v(" 157.你了解vue的diff算法吗？")]),t._v(" "),s("ul",[s("li",[t._v("diff算法比较新旧节点的时候，比较只会在同层级进行, 不会跨层级比较。")]),t._v(" "),s("li",[t._v("当数据发生改变时，set方法会让调用Dep.notify通知所有订阅者Watcher，订阅者就会调用patch给真实的DOM打补丁，更新相应的视图。")])]),t._v(" "),s("p",[t._v("patchVnode")]),t._v(" "),s("p",[t._v("当我们确定两个节点值得比较之后我们会对两个节点指定patchVnode方法。那么这个方法做了什么呢？")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("patchVnode")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vnode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" el "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("el "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("el\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldCh "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ch "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldVnode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTextContent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateEle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldCh "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" ch "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" oldCh "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" ch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateChildren")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldCh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createEle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//create el's children dom")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldCh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeChildren")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("p",[t._v("这个函数做了以下事情：")]),t._v(" "),s("ul",[s("li",[t._v("找到对应的真实dom，称为el")]),t._v(" "),s("li",[t._v("判断Vnode和oldVnode是否指向同一个对象，如果是，那么直接return")]),t._v(" "),s("li",[t._v("如果他们都有文本节点并且不相等，那么将el的文本节点设置为Vnode的文本节点。")]),t._v(" "),s("li",[t._v("如果oldVnode有子节点而Vnode没有，则删除el的子节点")]),t._v(" "),s("li",[t._v("如果oldVnode没有子节点而Vnode有，则将Vnode的子节点真实化之后添加到el")]),t._v(" "),s("li",[t._v("如果两者都有子节点，则执行updateChildren函数比较子节点，这一步很重要")])]),t._v(" "),s("h2",{attrs:{id:"_158-简述vue中的dom-diff算法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_158-简述vue中的dom-diff算法","aria-hidden":"true"}},[t._v("#")]),t._v(" 158.简述vue中的DOM DIFF算法")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/slbyml/code/tree/master/vnode",target:"_blank",rel:"noopener noreferrer"}},[t._v("精简源码"),s("OutboundLink")],1),t._v("；"),s("code",[t._v("采用深度优先遍历，把树形结构按照层级分解，只比较同级元素")]),t._v(";当数据发生改变时，"),s("code",[t._v("set")]),t._v("方法会让调用"),s("code",[t._v("Dep.notify")]),t._v("通知所有订阅者"),s("code",[t._v("Watcher")]),t._v("，订阅者就会调用"),s("code",[t._v("patch")]),t._v("给真实的DOM打补丁(两个重要函数"),s("code",[t._v("patchVnode")]),t._v("和"),s("code",[t._v("updateChildren")]),t._v(")：")]),t._v(" "),s("ul",[s("li",[t._v("先判断根结点及变化后的节点是否是"),s("code",[t._v("sameVnode")]),t._v("，如果不是的化，就会创建新的根结点并进行替换")]),t._v(" "),s("li",[t._v("如果是"),s("code",[t._v("sameVnode")]),t._v("，则进入"),s("code",[t._v("patchVnode")]),t._v("函数，其基本判断\n"),s("ol",[s("li",[t._v("如果两个节点是相等"),s("code",[t._v("oldVnode === vnode")]),t._v("则直接"),s("code",[t._v("return")])]),t._v(" "),s("li",[t._v("如果"),s("code",[t._v("新节点是文本节点")]),t._v("，则判断新旧文本节点是否一致，不一致("),s("code",[t._v("oldVnode.text !== vnode.text")]),t._v(")则替换")]),t._v(" "),s("li",[t._v("如果"),s("code",[t._v("新节点不是文本节点")]),t._v("，则开始比较新旧节点的子节点"),s("code",[t._v("oldCh")]),t._v("和"),s("code",[t._v("ch")]),t._v("：")]),t._v(" "),s("li",[t._v("如果"),s("code",[t._v("子节点都存在")]),t._v("，则进行"),s("code",[t._v("updateChildren")]),t._v("计算（稍后讲）")]),t._v(" "),s("li",[t._v("如果"),s("code",[t._v("只有新子节点存在")]),t._v(",则如果旧节点有文本节点，则移除文本节点，然后将新子节点拆入")]),t._v(" "),s("li",[t._v("如果"),s("code",[t._v("只有旧子节点存在")]),t._v("，则移除所有子节点")]),t._v(" "),s("li",[t._v("如果"),s("code",[t._v("均无子节点且旧节点是文本节点")]),t._v("，则移除文本节点（此时新节点一定不是文本节点）")])])]),t._v(" "),s("li",[s("code",[t._v("updateChildren")]),t._v("函数做细致对比\n"),s("ol",[s("li",[s("p",[t._v("start && oldStart对比")])]),t._v(" "),s("li",[s("p",[t._v("end && oldEnd对比")])]),t._v(" "),s("li",[s("p",[t._v("start && oldEnd对比")])]),t._v(" "),s("li",[s("p",[t._v("end && oldStart 对比")])]),t._v(" "),s("li",[s("p",[t._v("生成map映射，（key:旧子节点上的key，value:旧子节点在自己点中的位置）,根据key记录下老节点的位置（"),s("code",[t._v("idxInOld")]),t._v("）")]),t._v(" "),s("ol",[s("li",[t._v("如果找到了"),s("code",[t._v("idxInOld")]),t._v(",如果是"),s("code",[t._v("相同节点")]),t._v("则移动旧节点到新的对应的地方，否则虽然"),s("code",[t._v("key")]),t._v("相同但元素不同，当作新元素节点去创建")]),t._v(" "),s("li",[t._v("如果"),s("code",[t._v("没有找到idxInOld")]),t._v("，则创建节点")])]),t._v(" "),s("p",[t._v("对应代码：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 检测重复的key")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建vnode的key；eq：{key: 0, key: 1, key: 2}}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isUndef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldKeyToIdx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  oldKeyToIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createKeyToOldIdx")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldCh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldStartIdx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldEndIdx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果newStartVnode(新的VNode节点)存在key并且这个key在oldVnode中能找到，则idxInOld等于oldKeyToIdx中对应key的索引")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 否则寻找旧节点数组中与当前newStartVnode(新的VNode节点)相同的节点索引赋予idxInOld")]),t._v("\nidxInOld "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isDef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newStartVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" oldKeyToIdx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("newStartVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findIdxInOld")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newStartVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldCh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldStartIdx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldEndIdx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isUndef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("idxInOld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果没有找到这个key,则创建这个节点")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElm")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newStartVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" insertedVnodeQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" parentElm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldStartVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在旧节点数组中找到了相应的节点的索引时，则移动节点")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将vnodeToMove赋值为相应的节点")]),t._v("\n  vnodeToMove "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" oldCh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("idxInOld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sameVnode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vnodeToMove"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newStartVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果相同，则继续对比子级")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("patchVnode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vnodeToMove"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newStartVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" insertedVnodeQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将旧节点数组中的该节点设置为undefined")]),t._v("\n    oldCh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("idxInOld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 移动找到的节点到当前旧首节点之前")]),t._v("\n    nodeOps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertBefore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parentElm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vnodeToMove"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldStartVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如不同，则说明虽然key相同，但是不同元素，当作新元素处理")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElm")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newStartVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" insertedVnodeQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" parentElm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldStartVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newCh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newStartIdx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("如果"),s("code",[t._v("老节点先遍历完")]),t._v("，则新节点比老节点多,将新节点多余的插入进去")])]),t._v(" "),s("li",[s("p",[t._v("如果"),s("code",[t._v("新节点先遍历完")]),t._v("，则就节点比新节点多,将旧节点多余的删除\n代码：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新旧节点开始索引任一方大于其结束索引时结束循环")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldStartIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" oldEndIdx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*如果oldStartIdx > oldEndIdx的话，说明老节点已经遍历完了，新节点比老节点多，所以这时候多出来的新节点需要一个一个创建出来加入到真实Dom中*/")]),t._v("\n  refElm "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isUndef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newCh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("newEndIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" newCh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("newEndIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elm\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addVnodes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parentElm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" refElm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newCh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newStartIdx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newEndIdx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" insertedVnodeQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newStartIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" newEndIdx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*如果newStartIdx > newEndIdx，说明新节点已经遍历完了，老节点多余新节点，则在父级中移除未处理的剩余旧节点，范围是oldStartIdx~oldEndIdx*/")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeVnodes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parentElm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldCh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldStartIdx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldEndIdx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])])])])])]),t._v(" "),s("h2",{attrs:{id:"_159-说说你对vue组件的设计原则的理解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_159-说说你对vue组件的设计原则的理解","aria-hidden":"true"}},[t._v("#")]),t._v(" 159.说说你对vue组件的设计原则的理解")]),t._v(" "),s("ul",[s("li",[t._v("第一: 容错处理, 这个要做好, 极端场景要考虑到, 不能我传错了一个参数你就原地爆炸")]),t._v(" "),s("li",[t._v("第二: 缺省值(默认值)要有, 一般把应用较多的设为缺省值")]),t._v(" "),s("li",[t._v("第三: 颗粒化, 把组件拆分出来.")]),t._v(" "),s("li",[t._v("第四: 一切皆可配置, 如有必要, 组件里面使用中文标点符号, 还是英文的标点符号, 都要考虑到")]),t._v(" "),s("li",[t._v("第五: 场景化, 如一个dialog弹出, 还需要根据不同的状态封装成success, waring, 等")]),t._v(" "),s("li",[t._v("第六: 有详细的文档/注释和变更历史, 能查到来龙去脉, 新版本加了什么功能是因为什么")]),t._v(" "),s("li",[t._v("第七: 组件名称, 参数prop, emit, 名称设计要通俗易懂, 最好能做到代码即注释这种程度")]),t._v(" "),s("li",[t._v("第八: 可拓展性, 前期可能不需要这个功能, 但是后期可能会用上, 要预留什么, 要注意什么, 心里要有逼数")]),t._v(" "),s("li",[t._v("第九: 规范化,我这个input组件, 叫on-change, 我另外一个select组件叫change, 信不信老子捶死你")]),t._v(" "),s("li",[t._v("第十: 分阶段: 不是什么都要一期开发完成看具体业务, 如果一个select, 我只是个简单的select功能, 什么multi老子这个版本压根不需要, 别TM瞎折腾! 给自己加戏")])]),t._v(" "),s("h2",{attrs:{id:"_160-怎么缓存当前打开的路由组件，缓存后想更新当前组件怎么办呢？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_160-怎么缓存当前打开的路由组件，缓存后想更新当前组件怎么办呢？","aria-hidden":"true"}},[t._v("#")]),t._v(" 160.怎么缓存当前打开的路由组件，缓存后想更新当前组件怎么办呢？")]),t._v(" "),s("p",[t._v("可以在路由meta中加入参数, 对打开的路由进行keep-alive的判断, 通过钩子active等")])])}),[],!1,null,null,null);a.default=n.exports}}]);