(window.webpackJsonp=window.webpackJsonp||[]).push([[379],{767:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"一道十面埋伏的原型链面试题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一道十面埋伏的原型链面试题","aria-hidden":"true"}},[t._v("#")]),t._v(" 一道十面埋伏的原型链面试题")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#题目是这样的"}},[t._v("题目是这样的")])]),a("li",[a("a",{attrs:{href:"#题目涉及的知识点"}},[t._v("题目涉及的知识点")])]),a("li",[a("a",{attrs:{href:"#解题需要的知识点细节"}},[t._v("解题需要的知识点细节")])]),a("li",[a("a",{attrs:{href:"#开始剖题"}},[t._v("开始剖题")]),a("ul",[a("li",[a("a",{attrs:{href:"#_1-parent-show"}},[t._v("1.parent.show()")])]),a("li",[a("a",{attrs:{href:"#_2-child1-show"}},[t._v("2.child1.show()")])]),a("li",[a("a",{attrs:{href:"#_3-child2-show"}},[t._v("3.child2.show()")])]),a("li",[a("a",{attrs:{href:"#_4-parent-show"}},[t._v("4.parent.show()")])]),a("li",[a("a",{attrs:{href:"#_5-child1-show-child2-show"}},[t._v("5.child1.show(),child2.show()")])]),a("li",[a("a",{attrs:{href:"#延伸思考"}},[t._v("延伸思考")])])])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"题目是这样的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#题目是这样的","aria-hidden":"true"}},[t._v("#")]),t._v(" 题目是这样的")]),t._v(" "),a("p",[t._v("要求写出控制台的输出.")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Parent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" demo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("show")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("demo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Child")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("change")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("demo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Child")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Parent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" parent "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Parent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" child1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Child")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" child2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Child")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nchild1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nchild2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nchild1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nchild2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nchild1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("change")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nchild2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("change")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nchild1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nchild2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br")])]),a("h2",{attrs:{id:"题目涉及的知识点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#题目涉及的知识点","aria-hidden":"true"}},[t._v("#")]),t._v(" 题目涉及的知识点")]),t._v(" "),a("ul",[a("li",[t._v("this 的指向")]),t._v(" "),a("li",[t._v("原型机原型链")]),t._v(" "),a("li",[t._v("类的继承")]),t._v(" "),a("li",[t._v("原始类型和引用类型的区别")])]),t._v(" "),a("h2",{attrs:{id:"解题需要的知识点细节"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解题需要的知识点细节","aria-hidden":"true"}},[t._v("#")]),t._v(" 解题需要的知识点细节")]),t._v(" "),a("ol",[a("li",[t._v("构造函数，都有一个 "),a("code",[t._v("prototype")]),t._v(" 属性，指向构造函数的原型对象，实例会共享同一个原型对象;")]),t._v(" "),a("li",[t._v("实例生成时，会在内存中产生一块新的堆内存，对实例的一般操作将不影响其他实例，因为在堆内存里占据不同空间，互不影响;")]),t._v(" "),a("li",[t._v("每一个实例都有一个隐式原型"),a("code",[t._v("__proto__")]),t._v("指向构造函数的原型对象;")]),t._v(" "),a("li",[a("code",[t._v("this")]),t._v(" 的指向问题,常见的情况包含如下几种：\n"),a("ol",[a("li",[t._v("作为对象方法时，谁调用就指向谁(本题中主要涉及这一条)")]),t._v(" "),a("li",[t._v("作为函数调用时，指向全局顶层变量 window")]),t._v(" "),a("li",[t._v("作为构造函数调用时，即 "),a("code",[t._v("new")]),t._v(" 操作符生成实例时，构造函数中的 this 指向实例")]),t._v(" "),a("li",[a("code",[t._v("call")]),t._v(" 和 "),a("code",[t._v("apply")]),t._v(" 方法中，显示指定 this 的绑定为指定上下文")])])]),t._v(" "),a("li",[t._v("字面量的方式(也有资料将 literal 翻译为"),a("strong",[t._v("直接量")]),t._v(",个人认为后一种翻译其实更直观更形象)进行对象和数组赋值（数组本质也是对象）时，都是引用，即在堆内存生成资源，在栈内存生成变量，然后变量指向资源的地址。")]),t._v(" "),a("li",[t._v("原型链的查找规则遵循"),a("strong",[t._v("最短路径原则")]),t._v("，即先查找实例属性，然后顺着原型链去查找指定的属性，直至原型链末端的 "),a("code",[t._v("Object.prototype")]),t._v(" 和 "),a("code",[t._v("null")]),t._v("，如果实例自身及整个原型链都不存在所查找的属性则返回 "),a("code",[t._v("undefined")])]),t._v(" "),a("li",[t._v("赋值语句对于原始值赋值和引用类型赋值时的细节区别.")])]),t._v(" "),a("h2",{attrs:{id:"开始剖题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始剖题","aria-hidden":"true"}},[t._v("#")]),t._v(" 开始剖题")]),t._v(" "),a("h3",{attrs:{id:"_1-parent-show"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-parent-show","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.parent.show()")]),t._v(" "),a("p",[t._v("基本没什么可解释的。"),a("br"),t._v("\n直接取值就能得出答案 1 [1,2,1] 5;")]),t._v(" "),a("h3",{attrs:{id:"_2-child1-show"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-child1-show","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.child1.show()")]),t._v(" "),a("p",[a("code",[t._v("Child")]),t._v(" 的构造函数原本是指向 "),a("code",[t._v("Child")]),t._v(" 的")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Child")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constructor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" Child"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("题目中显式将 "),a("code",[t._v("Child")]),t._v(" 类的原型对象指向了 "),a("code",[t._v("Parent")]),t._v(" 类的一个实例，这是 javascript 面向对象编程中常见的继承方式之一。此处需要注意 "),a("code",[t._v("Child.prototype")]),t._v(" 指向的是 "),a("code",[t._v("Parent")]),t._v(" 的实例 "),a("code",[t._v("parent")]),t._v("，而不是指向 "),a("code",[t._v("Parent")]),t._v(" 这个类")]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:t.$withBase("/images/js/collection/2020061301.png"),alt:"js/collection/2020061301.png"}})]),t._v(" "),a("p",[t._v("直接在控制台操作输出答案可得"),a("code",[t._v("11 [1,2,1] 5")])]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:t.$withBase("/images/js/collection/2020061302.png"),alt:"js/collection/2020061302.png"}})]),t._v(" "),a("blockquote",[a("p",[t._v("此处令人迷惑的是 this.b 指向的数组最后一列为什么是 "),a("code",[t._v("1")]),t._v(" 而不是 "),a("code",[t._v("11")]),t._v("?")])]),t._v(" "),a("p",[t._v("先来看一下 child1 的样子：")]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:t.$withBase("/images/js/collection/2020061303.png"),alt:"js/collection/2020061303.png"}})]),t._v(" "),a("p",[t._v("当执行"),a("code",[t._v("child1.show()")]),t._v("这个方法时，由于 "),a("code",[t._v("child1")]),t._v(" 作为 "),a("code",[t._v("Child")]),t._v(" 的实例，是拥有 a 这个属性的,所以 "),a("code",[t._v("show()")]),t._v("方法中的 "),a("code",[t._v("this.a")]),t._v(" 会直接指向这个属性的值，也就是 "),a("code",[t._v("11")]),t._v(",而不会继续沿原型链取到"),a("code",[t._v("__proto__")]),t._v("所指的对象上的 a 属性;")]),t._v(" "),a("p",[t._v("接着寻找 "),a("code",[t._v("this.b")]),t._v(",由于 "),a("code",[t._v("child1")]),t._v(" 是没有 b 这个属性的，所以会沿原型链取到 "),a("code",[t._v("parent")]),t._v(" 上的 b 属性，其值是一个数组,前 2 项是常量没什么好说的，数组的最后一项是一个引用，"),a("strong",[t._v("而此处的指针并不是一个动态指向,因为在 new Parent()这一步的时候它已经被执行过一次，确定指向了 parent.a 所指向的资源")]),t._v("，也就是 "),a("code",[t._v("child1.__proto__")]),t._v("中的 a 属性所指向的资源，即数值 1。")]),t._v(" "),a("p",[t._v("从代码上看,"),a("code",[t._v("child1.__proto__.b")]),t._v("数组的第三项是指向"),a("code",[t._v("child1.__proto__.a")]),t._v("的，那我们此时修改"),a("code",[t._v("child1.__proto__.a")]),t._v("的值，是否会影响"),a("code",[t._v("child1.show()")]),t._v("的结果呢:")]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:t.$withBase("/images/js/collection/2020061304.png"),alt:"js/collection/2020061304.png"}})]),t._v(" "),a("p",[t._v("答案是木有影响，为什么看起来指向同一个地址的属性却出现值不一样的情形？因为 parent 实例生成的时候，this.a 指向了一个原始值 2,所以 this.b 中的第三项实际上是被赋值了一个原始值，故此处乍看起来像是引用类型的赋值，实则不是。原始值赋值会开辟新的存储空间，使得 this.a 和 this.b[2]的值相等，但是却指向了堆内存里的不同地址")]),t._v(" "),a("blockquote",[a("p",[t._v("那怎样让"),a("code",[t._v("child1.__proto__.b")]),t._v("数组的第三项也输出 11 呢?")])]),t._v(" "),a("ul",[a("li",[t._v("实例化后修改"),a("br"),t._v("\n由于在 "),a("code",[t._v("Parent")]),t._v(" 类定义中，b 属性数组的第三项是指向 a 属性的值的，意味着在 "),a("code",[t._v("Parent")]),t._v(" 实例化之前这个引用是动态指向的，所以只要在 "),a("code",[t._v("Parent")]),t._v(" 实例化之前改变类定义中 "),a("code",[t._v("this.a")]),t._v(" 的值，就可以达到想要的效果，如果在 "),a("code",[t._v("Parent")]),t._v(" 已经实例化，则只能显式修改"),a("code",[t._v("\\*.b[2]")]),t._v("这个属性的值。")]),t._v(" "),a("li",[t._v("get/set 方法同步"),a("br"),t._v("\n另一种方式是通过为 a 属性设置"),a("code",[t._v("get/set")]),t._v("方法，是的每当 a 属性的值发生变化时，同步修改"),a("code",[t._v("b[2]")]),t._v("的值，代码和运行结果如下所示：")])]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:t.$withBase("/images/js/collection/2020061305.png"),alt:"js/collection/2020061305.png"}})]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:t.$withBase("/images/js/collection/2020061306.png"),alt:"js/collection/2020061306.png"}})]),t._v(" "),a("h3",{attrs:{id:"_3-child2-show"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-child2-show","aria-hidden":"true"}},[t._v("#")]),t._v(" 3.child2.show()")]),t._v(" "),a("p",[t._v("如果理解了上面的解释，那么此处同理即可得出答案："),a("code",[t._v("12 [1,2,1] 5")])]),t._v(" "),a("p",[t._v("接着代码执行了： child1.change(); child2.change();")]),t._v(" "),a("h3",{attrs:{id:"_4-parent-show"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-parent-show","aria-hidden":"true"}},[t._v("#")]),t._v(" 4.parent.show()")]),t._v(" "),a("p",[a("code",[t._v("parent")]),t._v(" 是一个 "),a("code",[t._v("Parent")]),t._v(" 类的实例，"),a("code",[t._v("Child.prototype")]),t._v(" 指向的是 "),a("code",[t._v("Parent")]),t._v(" 类的另一个实例，两者在堆内存中是两份资源，互不影响，所以上述操作不影响 "),a("code",[t._v("parent")]),t._v(" 实例，\n输出结果保持不变:"),a("code",[t._v("1 [1,2,1] 5")]),t._v(";")]),t._v(" "),a("h3",{attrs:{id:"_5-child1-show-child2-show"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-child1-show-child2-show","aria-hidden":"true"}},[t._v("#")]),t._v(" 5.child1.show(),child2.show()")]),t._v(" "),a("p",[a("code",[t._v("child1")]),t._v(" 执行了 "),a("code",[t._v("change()")]),t._v("方法后，发生了怎样的变化呢?")]),t._v(" "),a("blockquote",[a("p",[t._v("this.b.push(this.a)"),a("br"),t._v("\n由于 this 的动态指向特性，this.b 会指向"),a("code",[t._v("Child.prototype")]),t._v("上的 b 数组,this.a 会指向"),a("code",[t._v("child1")]),t._v("的 a 属性,所以"),a("code",[t._v("Child.prototype.b")]),t._v("变成了[1,2,1,11];")]),t._v(" "),a("p",[t._v("this.a = this.b.length"),a("br"),t._v("\n这条语句中 "),a("code",[t._v("this.a")]),t._v(" 和 "),a("code",[t._v("this.b")]),t._v(" 的指向与上一句一致，故结果为 "),a("code",[t._v("child1.a")]),t._v(" 变为 4;")]),t._v(" "),a("p",[t._v("this.c.demo = this.a++"),a("br"),t._v("\n由于 "),a("code",[t._v("child1")]),t._v(" 自身属性并没有 c 这个属性，所以此处的 "),a("code",[t._v("this.c")]),t._v(" 会指向 "),a("code",[t._v("Child.prototype.c")]),t._v("，"),a("code",[t._v("this.a")]),t._v(" 值为 4，为原始类型，故赋值操作时会直接赋值，"),a("code",[t._v("Child.prototype.c.demo")]),t._v(" 的结果为 4，而 "),a("code",[t._v("this.a")]),t._v(" 随后自增为 5(4 + 1 = 5).")])]),t._v(" "),a("p",[t._v("接着，"),a("code",[t._v("child2")]),t._v(" 执行了 "),a("code",[t._v("change()")]),t._v("方法, 而 "),a("code",[t._v("child2")]),t._v(" 和 "),a("code",[t._v("child1")]),t._v(" 均是 "),a("code",[t._v("Child")]),t._v(" 类的实例，所以他们的原型链指向同一个原型对象 "),a("code",[t._v("Child.prototype")]),t._v(",也就是同一个 "),a("code",[t._v("parent")]),t._v(" 实例，"),a("strong",[t._v("所以 "),a("code",[t._v("child2.change()")]),t._v("中所有影响到原型对象的语句都会影响 child1 的最终输出结果")])]),t._v(" "),a("blockquote",[a("p",[t._v("this.b.push(this.a)"),a("br"),t._v("\n由于 this 的动态指向特性，this.b 会指向 Child.prototype 上的 b 数组,this.a 会指向 child2 的 a 属性,所以 Child.prototype.b 变成了[1,2,1,11,12];")]),t._v(" "),a("p",[t._v("this.a = this.b.length"),a("br"),t._v("\n这条语句中 this.a 和 this.b 的指向与上一句一致，故结果为 child2.a 变为 5;")]),t._v(" "),a("p",[t._v("this.c.demo = this.a++"),a("br"),t._v("\n由于 child2 自身属性并没有 c 这个属性，所以此处的 this.c 会指向 Child.prototype.c，故执行结果为 Child.prototype.c.demo 的值变为 child2.a 的值 5，而 child2.a 最终自增为 6(5 + 1 = 6).")])]),t._v(" "),a("p",[t._v("接下来执行输出命令，最终结果将输出:")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("child1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5 [1,2,1,11,12] 5")]),t._v("\nchild2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 6 [1,2,1,11,12] 5")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"延伸思考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#延伸思考","aria-hidden":"true"}},[t._v("#")]),t._v(" 延伸思考")]),t._v(" "),a("p",[t._v("自己在解题时，在 "),a("code",[t._v("this.c.demo = this.a++")]),t._v("出错，本以为这里会传引用，但实际是传了值，分析后明白因为 "),a("code",[t._v("this.a")]),t._v(" 指向的是一个原始值，故此处相当于"),a("strong",[t._v("将原始值赋值给对象属性")]),t._v(",所以赋值后 "),a("code",[t._v("child.c.demo")]),t._v(" 的值不会再受到 "),a("code",[t._v("child.a")]),t._v(" 的变化的影响。如果 "),a("code",[t._v("child.a")]),t._v(" 是一个引用类型，那么结果会变成什么样子呢？"),a("br"),t._v("\n我们对源码做一些修改，将 "),a("code",[t._v("child.a")]),t._v(" 指向一个对象（即引用类型）：")]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:t.$withBase("/images/js/collection/2020061307.png"),alt:"js/collection/2020061307.png"}})]),t._v(" "),a("p",[t._v("然后运行后就会发现，"),a("code",[t._v("Child.prototype.c")]),t._v(" 的值会随着 "),a("code",[t._v("child1.a")]),t._v(" 的变化而变化，因为此时 "),a("code",[t._v("child1.a")]),t._v(" 的值是一个引用类型，赋值过程会使得 "),a("code",[t._v("Child.prototype.c")]),t._v(" 和 "),a("code",[t._v("child1.a")]),t._v(" 指向同一份资源的内存空间地址。")])])}),[],!1,null,null,null);s.default=e.exports}}]);