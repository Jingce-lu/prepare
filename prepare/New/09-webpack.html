<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Add 2020 webpack | Lu notes</title>
    <meta name="description" content=" ">
    <link rel=" " href=" ">
    
    <link rel="preload" href="/prepare/assets/css/0.styles.792b4dee.css" as="style"><link rel="preload" href="/prepare/assets/js/app.1447db77.js" as="script"><link rel="preload" href="/prepare/assets/js/3.e41e0c50.js" as="script"><link rel="preload" href="/prepare/assets/js/2.1e70219e.js" as="script"><link rel="preload" href="/prepare/assets/js/498.acc34f7b.js" as="script"><link rel="prefetch" href="/prepare/assets/js/10.bbc67679.js"><link rel="prefetch" href="/prepare/assets/js/100.4aba638e.js"><link rel="prefetch" href="/prepare/assets/js/101.7e2ec42d.js"><link rel="prefetch" href="/prepare/assets/js/102.19908bd4.js"><link rel="prefetch" href="/prepare/assets/js/103.6b296085.js"><link rel="prefetch" href="/prepare/assets/js/104.0ff13a56.js"><link rel="prefetch" href="/prepare/assets/js/105.cfad3965.js"><link rel="prefetch" href="/prepare/assets/js/106.a8c3a91b.js"><link rel="prefetch" href="/prepare/assets/js/107.e384e404.js"><link rel="prefetch" href="/prepare/assets/js/108.c5104043.js"><link rel="prefetch" href="/prepare/assets/js/109.b1fbaed6.js"><link rel="prefetch" href="/prepare/assets/js/11.332086a0.js"><link rel="prefetch" href="/prepare/assets/js/110.c8478bae.js"><link rel="prefetch" href="/prepare/assets/js/111.edfe9422.js"><link rel="prefetch" href="/prepare/assets/js/112.1f0e6ae6.js"><link rel="prefetch" href="/prepare/assets/js/113.85512b50.js"><link rel="prefetch" href="/prepare/assets/js/114.d7dbc9ab.js"><link rel="prefetch" href="/prepare/assets/js/115.730da032.js"><link rel="prefetch" href="/prepare/assets/js/116.3b1fe419.js"><link rel="prefetch" href="/prepare/assets/js/117.c3498278.js"><link rel="prefetch" href="/prepare/assets/js/118.56b2f2af.js"><link rel="prefetch" href="/prepare/assets/js/119.d56caad4.js"><link rel="prefetch" href="/prepare/assets/js/12.ba74a8ed.js"><link rel="prefetch" href="/prepare/assets/js/120.3bf58cb6.js"><link rel="prefetch" href="/prepare/assets/js/121.da9d415d.js"><link rel="prefetch" href="/prepare/assets/js/122.b2b61816.js"><link rel="prefetch" href="/prepare/assets/js/123.35cc21ab.js"><link rel="prefetch" href="/prepare/assets/js/124.12007ab8.js"><link rel="prefetch" href="/prepare/assets/js/125.3a6de690.js"><link rel="prefetch" href="/prepare/assets/js/126.64ba4fcd.js"><link rel="prefetch" href="/prepare/assets/js/127.4afbdbf9.js"><link rel="prefetch" href="/prepare/assets/js/128.8ed2f444.js"><link rel="prefetch" href="/prepare/assets/js/129.38187c48.js"><link rel="prefetch" href="/prepare/assets/js/13.2a7f4de4.js"><link rel="prefetch" href="/prepare/assets/js/130.297b5de5.js"><link rel="prefetch" href="/prepare/assets/js/131.35c49c90.js"><link rel="prefetch" href="/prepare/assets/js/132.14d2c7bc.js"><link rel="prefetch" href="/prepare/assets/js/133.f2b8cca8.js"><link rel="prefetch" href="/prepare/assets/js/134.2b7b620d.js"><link rel="prefetch" href="/prepare/assets/js/135.be9f9954.js"><link rel="prefetch" href="/prepare/assets/js/136.a5bbc557.js"><link rel="prefetch" href="/prepare/assets/js/137.bb4e4058.js"><link rel="prefetch" href="/prepare/assets/js/138.87bc3efb.js"><link rel="prefetch" href="/prepare/assets/js/139.45068d40.js"><link rel="prefetch" href="/prepare/assets/js/14.c1176aba.js"><link rel="prefetch" href="/prepare/assets/js/140.d700dc26.js"><link rel="prefetch" href="/prepare/assets/js/141.fd984293.js"><link rel="prefetch" href="/prepare/assets/js/142.cf6dd7c9.js"><link rel="prefetch" href="/prepare/assets/js/143.61331d4c.js"><link rel="prefetch" href="/prepare/assets/js/144.b5ad84a3.js"><link rel="prefetch" href="/prepare/assets/js/145.9b0d9672.js"><link rel="prefetch" href="/prepare/assets/js/146.9185bf35.js"><link rel="prefetch" href="/prepare/assets/js/147.0fcc9739.js"><link rel="prefetch" href="/prepare/assets/js/148.175afb33.js"><link rel="prefetch" href="/prepare/assets/js/149.67330907.js"><link rel="prefetch" href="/prepare/assets/js/15.51c9231d.js"><link rel="prefetch" href="/prepare/assets/js/150.11109c59.js"><link rel="prefetch" href="/prepare/assets/js/151.8894149f.js"><link rel="prefetch" href="/prepare/assets/js/152.5bbfff26.js"><link rel="prefetch" href="/prepare/assets/js/153.a28e3c80.js"><link rel="prefetch" href="/prepare/assets/js/154.df54fdd6.js"><link rel="prefetch" href="/prepare/assets/js/155.7f3b4a86.js"><link rel="prefetch" href="/prepare/assets/js/156.e8da3cc6.js"><link rel="prefetch" href="/prepare/assets/js/157.ea05b94b.js"><link rel="prefetch" href="/prepare/assets/js/158.e2a66b35.js"><link rel="prefetch" href="/prepare/assets/js/159.8d46b0a0.js"><link rel="prefetch" href="/prepare/assets/js/16.068b31cf.js"><link rel="prefetch" href="/prepare/assets/js/160.489915d0.js"><link rel="prefetch" href="/prepare/assets/js/161.6379fdee.js"><link rel="prefetch" href="/prepare/assets/js/162.6f976e8e.js"><link rel="prefetch" href="/prepare/assets/js/163.0f0b54cf.js"><link rel="prefetch" href="/prepare/assets/js/164.c0bc1b84.js"><link rel="prefetch" href="/prepare/assets/js/165.b98f13c2.js"><link rel="prefetch" href="/prepare/assets/js/166.9d667c65.js"><link rel="prefetch" href="/prepare/assets/js/167.32a81ef2.js"><link rel="prefetch" href="/prepare/assets/js/168.42365edb.js"><link rel="prefetch" href="/prepare/assets/js/169.c7b680cb.js"><link rel="prefetch" href="/prepare/assets/js/17.009774c1.js"><link rel="prefetch" href="/prepare/assets/js/170.40d1014d.js"><link rel="prefetch" href="/prepare/assets/js/171.8f3e3efa.js"><link rel="prefetch" href="/prepare/assets/js/172.aaa0bbc5.js"><link rel="prefetch" href="/prepare/assets/js/173.8e75b0b4.js"><link rel="prefetch" href="/prepare/assets/js/174.e5b05d99.js"><link rel="prefetch" href="/prepare/assets/js/175.d430c906.js"><link rel="prefetch" href="/prepare/assets/js/176.dc06223c.js"><link rel="prefetch" href="/prepare/assets/js/177.f3f198a9.js"><link rel="prefetch" href="/prepare/assets/js/178.59ffa9a9.js"><link rel="prefetch" href="/prepare/assets/js/179.5b68865f.js"><link rel="prefetch" href="/prepare/assets/js/18.a2ce5f07.js"><link rel="prefetch" href="/prepare/assets/js/180.af09ecbe.js"><link rel="prefetch" href="/prepare/assets/js/181.4cfaa94d.js"><link rel="prefetch" href="/prepare/assets/js/182.3362b244.js"><link rel="prefetch" href="/prepare/assets/js/183.befaf20c.js"><link rel="prefetch" href="/prepare/assets/js/184.9b12ae06.js"><link rel="prefetch" href="/prepare/assets/js/185.90ff6b58.js"><link rel="prefetch" href="/prepare/assets/js/186.d5a7dd42.js"><link rel="prefetch" href="/prepare/assets/js/187.3af53a23.js"><link rel="prefetch" href="/prepare/assets/js/188.8f1fd929.js"><link rel="prefetch" href="/prepare/assets/js/189.14dd6383.js"><link rel="prefetch" href="/prepare/assets/js/19.7ac214b0.js"><link rel="prefetch" href="/prepare/assets/js/190.5ce561a4.js"><link rel="prefetch" href="/prepare/assets/js/191.2099e116.js"><link rel="prefetch" href="/prepare/assets/js/192.55f4873f.js"><link rel="prefetch" href="/prepare/assets/js/193.8821cd1f.js"><link rel="prefetch" href="/prepare/assets/js/194.a1a809a7.js"><link rel="prefetch" href="/prepare/assets/js/195.1dd9472e.js"><link rel="prefetch" href="/prepare/assets/js/196.73482820.js"><link rel="prefetch" href="/prepare/assets/js/197.eae9178c.js"><link rel="prefetch" href="/prepare/assets/js/198.fd26898b.js"><link rel="prefetch" href="/prepare/assets/js/199.d6c49f9d.js"><link rel="prefetch" href="/prepare/assets/js/20.b3338522.js"><link rel="prefetch" href="/prepare/assets/js/200.912fe735.js"><link rel="prefetch" href="/prepare/assets/js/201.39d22444.js"><link rel="prefetch" href="/prepare/assets/js/202.398f920e.js"><link rel="prefetch" href="/prepare/assets/js/203.a245b7fb.js"><link rel="prefetch" href="/prepare/assets/js/204.ba8c1722.js"><link rel="prefetch" href="/prepare/assets/js/205.93e6dd5d.js"><link rel="prefetch" href="/prepare/assets/js/206.a4947409.js"><link rel="prefetch" href="/prepare/assets/js/207.4893bd3d.js"><link rel="prefetch" href="/prepare/assets/js/208.d65aa223.js"><link rel="prefetch" href="/prepare/assets/js/209.95483bdb.js"><link rel="prefetch" href="/prepare/assets/js/21.f5e9bcdd.js"><link rel="prefetch" href="/prepare/assets/js/210.5036a519.js"><link rel="prefetch" href="/prepare/assets/js/211.2a09c5e6.js"><link rel="prefetch" href="/prepare/assets/js/212.98f7899a.js"><link rel="prefetch" href="/prepare/assets/js/213.aa0be5a3.js"><link rel="prefetch" href="/prepare/assets/js/214.89be6e64.js"><link rel="prefetch" href="/prepare/assets/js/215.9fdb22de.js"><link rel="prefetch" href="/prepare/assets/js/216.e5052023.js"><link rel="prefetch" href="/prepare/assets/js/217.7de857bc.js"><link rel="prefetch" href="/prepare/assets/js/218.d17f4bb9.js"><link rel="prefetch" href="/prepare/assets/js/219.d47bade8.js"><link rel="prefetch" href="/prepare/assets/js/22.1d071724.js"><link rel="prefetch" href="/prepare/assets/js/220.4df2c089.js"><link rel="prefetch" href="/prepare/assets/js/221.c14bba6a.js"><link rel="prefetch" href="/prepare/assets/js/222.97160240.js"><link rel="prefetch" href="/prepare/assets/js/223.8d0dacf5.js"><link rel="prefetch" href="/prepare/assets/js/224.7bfd9c12.js"><link rel="prefetch" href="/prepare/assets/js/225.c3a647be.js"><link rel="prefetch" href="/prepare/assets/js/226.aa9b9527.js"><link rel="prefetch" href="/prepare/assets/js/227.72ec0ba5.js"><link rel="prefetch" href="/prepare/assets/js/228.4c351230.js"><link rel="prefetch" href="/prepare/assets/js/229.dd2a113a.js"><link rel="prefetch" href="/prepare/assets/js/23.7e49453b.js"><link rel="prefetch" href="/prepare/assets/js/230.9d28562c.js"><link rel="prefetch" href="/prepare/assets/js/231.ded6b694.js"><link rel="prefetch" href="/prepare/assets/js/232.c33c396b.js"><link rel="prefetch" href="/prepare/assets/js/233.7f164e50.js"><link rel="prefetch" href="/prepare/assets/js/234.cc1b99c5.js"><link rel="prefetch" href="/prepare/assets/js/235.8b0084d2.js"><link rel="prefetch" href="/prepare/assets/js/236.85329b67.js"><link rel="prefetch" href="/prepare/assets/js/237.3f2db78d.js"><link rel="prefetch" href="/prepare/assets/js/238.69f10760.js"><link rel="prefetch" href="/prepare/assets/js/239.b560e4d2.js"><link rel="prefetch" href="/prepare/assets/js/24.c0b874ca.js"><link rel="prefetch" href="/prepare/assets/js/240.929744d9.js"><link rel="prefetch" href="/prepare/assets/js/241.80dda930.js"><link rel="prefetch" href="/prepare/assets/js/242.dcb5a451.js"><link rel="prefetch" href="/prepare/assets/js/243.a7ae3b93.js"><link rel="prefetch" href="/prepare/assets/js/244.5a26fe45.js"><link rel="prefetch" href="/prepare/assets/js/245.a622856f.js"><link rel="prefetch" href="/prepare/assets/js/246.b70a54c0.js"><link rel="prefetch" href="/prepare/assets/js/247.e4d14231.js"><link rel="prefetch" href="/prepare/assets/js/248.c52688c5.js"><link rel="prefetch" href="/prepare/assets/js/249.7ab5e7ca.js"><link rel="prefetch" href="/prepare/assets/js/25.1cfbad6d.js"><link rel="prefetch" href="/prepare/assets/js/250.bd86b8c8.js"><link rel="prefetch" href="/prepare/assets/js/251.d2f65c48.js"><link rel="prefetch" href="/prepare/assets/js/252.6775570a.js"><link rel="prefetch" href="/prepare/assets/js/253.d6e4fe7a.js"><link rel="prefetch" href="/prepare/assets/js/254.fbd26282.js"><link rel="prefetch" href="/prepare/assets/js/255.c290462d.js"><link rel="prefetch" href="/prepare/assets/js/256.3736f3a3.js"><link rel="prefetch" href="/prepare/assets/js/257.548f6a3c.js"><link rel="prefetch" href="/prepare/assets/js/258.22b0eb6f.js"><link rel="prefetch" href="/prepare/assets/js/259.9c2c61c2.js"><link rel="prefetch" href="/prepare/assets/js/26.de029bb7.js"><link rel="prefetch" href="/prepare/assets/js/260.e8ab24f6.js"><link rel="prefetch" href="/prepare/assets/js/261.a8b00ba3.js"><link rel="prefetch" href="/prepare/assets/js/262.0230fed4.js"><link rel="prefetch" href="/prepare/assets/js/263.1daaa958.js"><link rel="prefetch" href="/prepare/assets/js/264.f34eb2d4.js"><link rel="prefetch" href="/prepare/assets/js/265.b7ec02e3.js"><link rel="prefetch" href="/prepare/assets/js/266.4e4ea536.js"><link rel="prefetch" href="/prepare/assets/js/267.b55926b2.js"><link rel="prefetch" href="/prepare/assets/js/268.7538460c.js"><link rel="prefetch" href="/prepare/assets/js/269.0ff32dc1.js"><link rel="prefetch" href="/prepare/assets/js/27.76d97f8d.js"><link rel="prefetch" href="/prepare/assets/js/270.7a7e6b43.js"><link rel="prefetch" href="/prepare/assets/js/271.bd9d603e.js"><link rel="prefetch" href="/prepare/assets/js/272.1cbdf28e.js"><link rel="prefetch" href="/prepare/assets/js/273.3e99e105.js"><link rel="prefetch" href="/prepare/assets/js/274.6e6894af.js"><link rel="prefetch" href="/prepare/assets/js/275.151efa9b.js"><link rel="prefetch" href="/prepare/assets/js/276.4232d1e9.js"><link rel="prefetch" href="/prepare/assets/js/277.2fd42173.js"><link rel="prefetch" href="/prepare/assets/js/278.72e0b94d.js"><link rel="prefetch" href="/prepare/assets/js/279.fad0d7f5.js"><link rel="prefetch" href="/prepare/assets/js/28.d519562e.js"><link rel="prefetch" href="/prepare/assets/js/280.edaf079e.js"><link rel="prefetch" href="/prepare/assets/js/281.271f7db4.js"><link rel="prefetch" href="/prepare/assets/js/282.63be0e01.js"><link rel="prefetch" href="/prepare/assets/js/283.3101d9d7.js"><link rel="prefetch" href="/prepare/assets/js/284.9bf856ec.js"><link rel="prefetch" href="/prepare/assets/js/285.aa087ba1.js"><link rel="prefetch" href="/prepare/assets/js/286.c59b368f.js"><link rel="prefetch" href="/prepare/assets/js/287.b5036873.js"><link rel="prefetch" href="/prepare/assets/js/288.ffd18f5a.js"><link rel="prefetch" href="/prepare/assets/js/289.64df4465.js"><link rel="prefetch" href="/prepare/assets/js/29.d758b9c5.js"><link rel="prefetch" href="/prepare/assets/js/290.e6fa8dd0.js"><link rel="prefetch" href="/prepare/assets/js/291.89c29699.js"><link rel="prefetch" href="/prepare/assets/js/292.26278f8f.js"><link rel="prefetch" href="/prepare/assets/js/293.7fbf0601.js"><link rel="prefetch" href="/prepare/assets/js/294.29fd758f.js"><link rel="prefetch" href="/prepare/assets/js/295.2cf12446.js"><link rel="prefetch" href="/prepare/assets/js/296.9e8a45fe.js"><link rel="prefetch" href="/prepare/assets/js/297.0318d861.js"><link rel="prefetch" href="/prepare/assets/js/298.b0fe029d.js"><link rel="prefetch" href="/prepare/assets/js/299.42f126fd.js"><link rel="prefetch" href="/prepare/assets/js/30.bd16a50a.js"><link rel="prefetch" href="/prepare/assets/js/300.ad24501f.js"><link rel="prefetch" href="/prepare/assets/js/301.201a2ff4.js"><link rel="prefetch" href="/prepare/assets/js/302.dcd29c9a.js"><link rel="prefetch" href="/prepare/assets/js/303.9924a881.js"><link rel="prefetch" href="/prepare/assets/js/304.4dab1dc5.js"><link rel="prefetch" href="/prepare/assets/js/305.5471223b.js"><link rel="prefetch" href="/prepare/assets/js/306.cfd57303.js"><link rel="prefetch" href="/prepare/assets/js/307.be52b828.js"><link rel="prefetch" href="/prepare/assets/js/308.1e9b4809.js"><link rel="prefetch" href="/prepare/assets/js/309.f199adb0.js"><link rel="prefetch" href="/prepare/assets/js/31.a79de2ff.js"><link rel="prefetch" href="/prepare/assets/js/310.0870b0c7.js"><link rel="prefetch" href="/prepare/assets/js/311.5bd47996.js"><link rel="prefetch" href="/prepare/assets/js/312.f5a17ba0.js"><link rel="prefetch" href="/prepare/assets/js/313.1c77d95b.js"><link rel="prefetch" href="/prepare/assets/js/314.6132aff6.js"><link rel="prefetch" href="/prepare/assets/js/315.2542cba8.js"><link rel="prefetch" href="/prepare/assets/js/316.c79e7973.js"><link rel="prefetch" href="/prepare/assets/js/317.3fbe0feb.js"><link rel="prefetch" href="/prepare/assets/js/318.6fe5a822.js"><link rel="prefetch" href="/prepare/assets/js/319.05507ad2.js"><link rel="prefetch" href="/prepare/assets/js/32.f91b65de.js"><link rel="prefetch" href="/prepare/assets/js/320.394e3adc.js"><link rel="prefetch" href="/prepare/assets/js/321.d48d6e89.js"><link rel="prefetch" href="/prepare/assets/js/322.afeaed92.js"><link rel="prefetch" href="/prepare/assets/js/323.17a22470.js"><link rel="prefetch" href="/prepare/assets/js/324.92d343dd.js"><link rel="prefetch" href="/prepare/assets/js/325.9a8bd412.js"><link rel="prefetch" href="/prepare/assets/js/326.f87ec168.js"><link rel="prefetch" href="/prepare/assets/js/327.8ffc0921.js"><link rel="prefetch" href="/prepare/assets/js/328.2c99d806.js"><link rel="prefetch" href="/prepare/assets/js/329.e1d7c42b.js"><link rel="prefetch" href="/prepare/assets/js/33.f8a3d404.js"><link rel="prefetch" href="/prepare/assets/js/330.c6175c93.js"><link rel="prefetch" href="/prepare/assets/js/331.a1f8a10e.js"><link rel="prefetch" href="/prepare/assets/js/332.aa6923d3.js"><link rel="prefetch" href="/prepare/assets/js/333.7fffa3cf.js"><link rel="prefetch" href="/prepare/assets/js/334.ae38eaf5.js"><link rel="prefetch" href="/prepare/assets/js/335.96da4e59.js"><link rel="prefetch" href="/prepare/assets/js/336.177c016f.js"><link rel="prefetch" href="/prepare/assets/js/337.0b9e1d17.js"><link rel="prefetch" href="/prepare/assets/js/338.14d2641b.js"><link rel="prefetch" href="/prepare/assets/js/339.52602304.js"><link rel="prefetch" href="/prepare/assets/js/34.0f99aed1.js"><link rel="prefetch" href="/prepare/assets/js/340.e59207a4.js"><link rel="prefetch" href="/prepare/assets/js/341.aec6baae.js"><link rel="prefetch" href="/prepare/assets/js/342.b7c8ea86.js"><link rel="prefetch" href="/prepare/assets/js/343.ac3e521b.js"><link rel="prefetch" href="/prepare/assets/js/344.4d703fb7.js"><link rel="prefetch" href="/prepare/assets/js/345.850d1bb0.js"><link rel="prefetch" href="/prepare/assets/js/346.f7d6d9e4.js"><link rel="prefetch" href="/prepare/assets/js/347.11f3f78d.js"><link rel="prefetch" href="/prepare/assets/js/348.c2fdf53d.js"><link rel="prefetch" href="/prepare/assets/js/349.98e4295c.js"><link rel="prefetch" href="/prepare/assets/js/35.d3846361.js"><link rel="prefetch" href="/prepare/assets/js/350.727ebd98.js"><link rel="prefetch" href="/prepare/assets/js/351.ea38d960.js"><link rel="prefetch" href="/prepare/assets/js/352.2eb07fa8.js"><link rel="prefetch" href="/prepare/assets/js/353.7d2f3f06.js"><link rel="prefetch" href="/prepare/assets/js/354.1164edef.js"><link rel="prefetch" href="/prepare/assets/js/355.f8187c23.js"><link rel="prefetch" href="/prepare/assets/js/356.df01254a.js"><link rel="prefetch" href="/prepare/assets/js/357.5e821aed.js"><link rel="prefetch" href="/prepare/assets/js/358.380ce6b5.js"><link rel="prefetch" href="/prepare/assets/js/359.08da3d60.js"><link rel="prefetch" href="/prepare/assets/js/36.ab3a1a80.js"><link rel="prefetch" href="/prepare/assets/js/360.c83b25ba.js"><link rel="prefetch" href="/prepare/assets/js/361.f13e82b1.js"><link rel="prefetch" href="/prepare/assets/js/362.9d8c4049.js"><link rel="prefetch" href="/prepare/assets/js/363.81f976d7.js"><link rel="prefetch" href="/prepare/assets/js/364.7685cdd7.js"><link rel="prefetch" href="/prepare/assets/js/365.7aea54da.js"><link rel="prefetch" href="/prepare/assets/js/366.31b9ea17.js"><link rel="prefetch" href="/prepare/assets/js/367.41d6d880.js"><link rel="prefetch" href="/prepare/assets/js/368.741a7b42.js"><link rel="prefetch" href="/prepare/assets/js/369.415ce305.js"><link rel="prefetch" href="/prepare/assets/js/37.f6b19d4d.js"><link rel="prefetch" href="/prepare/assets/js/370.a4238bc8.js"><link rel="prefetch" href="/prepare/assets/js/371.d872f2b8.js"><link rel="prefetch" href="/prepare/assets/js/372.ae4b64fe.js"><link rel="prefetch" href="/prepare/assets/js/373.0e39eabc.js"><link rel="prefetch" href="/prepare/assets/js/374.be7eb163.js"><link rel="prefetch" href="/prepare/assets/js/375.fe1c9fe2.js"><link rel="prefetch" href="/prepare/assets/js/376.2b9bea0c.js"><link rel="prefetch" href="/prepare/assets/js/377.1c1c9b16.js"><link rel="prefetch" href="/prepare/assets/js/378.8f6d91a8.js"><link rel="prefetch" href="/prepare/assets/js/379.968947db.js"><link rel="prefetch" href="/prepare/assets/js/38.171b0736.js"><link rel="prefetch" href="/prepare/assets/js/380.d8164c0a.js"><link rel="prefetch" href="/prepare/assets/js/381.7aed9b58.js"><link rel="prefetch" href="/prepare/assets/js/382.828131e0.js"><link rel="prefetch" href="/prepare/assets/js/383.8bd6b7e3.js"><link rel="prefetch" href="/prepare/assets/js/384.568a16f7.js"><link rel="prefetch" href="/prepare/assets/js/385.5878f7cd.js"><link rel="prefetch" href="/prepare/assets/js/386.013af9a2.js"><link rel="prefetch" href="/prepare/assets/js/387.40834279.js"><link rel="prefetch" href="/prepare/assets/js/388.93cfa086.js"><link rel="prefetch" href="/prepare/assets/js/389.fa4a4c5e.js"><link rel="prefetch" href="/prepare/assets/js/39.5adbfd75.js"><link rel="prefetch" href="/prepare/assets/js/390.a885df12.js"><link rel="prefetch" href="/prepare/assets/js/391.ec52132d.js"><link rel="prefetch" href="/prepare/assets/js/392.f10c27d4.js"><link rel="prefetch" href="/prepare/assets/js/393.0f49da6e.js"><link rel="prefetch" href="/prepare/assets/js/394.a6c5d82f.js"><link rel="prefetch" href="/prepare/assets/js/395.1866fd78.js"><link rel="prefetch" href="/prepare/assets/js/396.c5b90eee.js"><link rel="prefetch" href="/prepare/assets/js/397.2203683f.js"><link rel="prefetch" href="/prepare/assets/js/398.f44f4614.js"><link rel="prefetch" href="/prepare/assets/js/399.6ee0f8b9.js"><link rel="prefetch" href="/prepare/assets/js/4.472cf525.js"><link rel="prefetch" href="/prepare/assets/js/40.04545306.js"><link rel="prefetch" href="/prepare/assets/js/400.403424de.js"><link rel="prefetch" href="/prepare/assets/js/401.72e6e69a.js"><link rel="prefetch" href="/prepare/assets/js/402.01b0660d.js"><link rel="prefetch" href="/prepare/assets/js/403.1e3254bb.js"><link rel="prefetch" href="/prepare/assets/js/404.14460e65.js"><link rel="prefetch" href="/prepare/assets/js/405.7f98234a.js"><link rel="prefetch" href="/prepare/assets/js/406.177d0602.js"><link rel="prefetch" href="/prepare/assets/js/407.e07f1818.js"><link rel="prefetch" href="/prepare/assets/js/408.3ed6c3ef.js"><link rel="prefetch" href="/prepare/assets/js/409.64bf91a9.js"><link rel="prefetch" href="/prepare/assets/js/41.93c682ea.js"><link rel="prefetch" href="/prepare/assets/js/410.55edf02e.js"><link rel="prefetch" href="/prepare/assets/js/411.8723e9ce.js"><link rel="prefetch" href="/prepare/assets/js/412.5f1e5cf3.js"><link rel="prefetch" href="/prepare/assets/js/413.285188e4.js"><link rel="prefetch" href="/prepare/assets/js/414.e49a34a8.js"><link rel="prefetch" href="/prepare/assets/js/415.53df1fd9.js"><link rel="prefetch" href="/prepare/assets/js/416.b6ad9480.js"><link rel="prefetch" href="/prepare/assets/js/417.64f0661c.js"><link rel="prefetch" href="/prepare/assets/js/418.5e74a187.js"><link rel="prefetch" href="/prepare/assets/js/419.bba1e2c3.js"><link rel="prefetch" href="/prepare/assets/js/42.db2a0388.js"><link rel="prefetch" href="/prepare/assets/js/420.3af7f88e.js"><link rel="prefetch" href="/prepare/assets/js/421.d96fc9f3.js"><link rel="prefetch" href="/prepare/assets/js/422.2692777a.js"><link rel="prefetch" href="/prepare/assets/js/423.fcd7c8c7.js"><link rel="prefetch" href="/prepare/assets/js/424.b5d4af41.js"><link rel="prefetch" href="/prepare/assets/js/425.48cb1f5a.js"><link rel="prefetch" href="/prepare/assets/js/426.154c75bd.js"><link rel="prefetch" href="/prepare/assets/js/427.f5df1875.js"><link rel="prefetch" href="/prepare/assets/js/428.7bd9f855.js"><link rel="prefetch" href="/prepare/assets/js/429.9612a055.js"><link rel="prefetch" href="/prepare/assets/js/43.8ca4fa1f.js"><link rel="prefetch" href="/prepare/assets/js/430.17b843ef.js"><link rel="prefetch" href="/prepare/assets/js/431.bd9b822b.js"><link rel="prefetch" href="/prepare/assets/js/432.a394a1d2.js"><link rel="prefetch" href="/prepare/assets/js/433.b5400cc0.js"><link rel="prefetch" href="/prepare/assets/js/434.f2272a1a.js"><link rel="prefetch" href="/prepare/assets/js/435.fca87afa.js"><link rel="prefetch" href="/prepare/assets/js/436.b2d72a50.js"><link rel="prefetch" href="/prepare/assets/js/437.01a22fb0.js"><link rel="prefetch" href="/prepare/assets/js/438.397c1b35.js"><link rel="prefetch" href="/prepare/assets/js/439.fb86551c.js"><link rel="prefetch" href="/prepare/assets/js/44.de05defa.js"><link rel="prefetch" href="/prepare/assets/js/440.b297476f.js"><link rel="prefetch" href="/prepare/assets/js/441.1b258d7b.js"><link rel="prefetch" href="/prepare/assets/js/442.984d2a96.js"><link rel="prefetch" href="/prepare/assets/js/443.c19283f7.js"><link rel="prefetch" href="/prepare/assets/js/444.cd291341.js"><link rel="prefetch" href="/prepare/assets/js/445.f429b215.js"><link rel="prefetch" href="/prepare/assets/js/446.f026b04d.js"><link rel="prefetch" href="/prepare/assets/js/447.5d8af619.js"><link rel="prefetch" href="/prepare/assets/js/448.a0af235e.js"><link rel="prefetch" href="/prepare/assets/js/449.07c3f21e.js"><link rel="prefetch" href="/prepare/assets/js/45.7fedd2f9.js"><link rel="prefetch" href="/prepare/assets/js/450.93635421.js"><link rel="prefetch" href="/prepare/assets/js/451.dde4689a.js"><link rel="prefetch" href="/prepare/assets/js/452.43fda804.js"><link rel="prefetch" href="/prepare/assets/js/453.2110ad6d.js"><link rel="prefetch" href="/prepare/assets/js/454.8550dbb9.js"><link rel="prefetch" href="/prepare/assets/js/455.357967e2.js"><link rel="prefetch" href="/prepare/assets/js/456.11261a82.js"><link rel="prefetch" href="/prepare/assets/js/457.aadb707d.js"><link rel="prefetch" href="/prepare/assets/js/458.c890d13e.js"><link rel="prefetch" href="/prepare/assets/js/459.4acfabc3.js"><link rel="prefetch" href="/prepare/assets/js/46.1dc7cafa.js"><link rel="prefetch" href="/prepare/assets/js/460.684543d5.js"><link rel="prefetch" href="/prepare/assets/js/461.9bd702da.js"><link rel="prefetch" href="/prepare/assets/js/462.f390ba09.js"><link rel="prefetch" href="/prepare/assets/js/463.6bdef083.js"><link rel="prefetch" href="/prepare/assets/js/464.9f2b65d4.js"><link rel="prefetch" href="/prepare/assets/js/465.9d2a2435.js"><link rel="prefetch" href="/prepare/assets/js/466.eb61125f.js"><link rel="prefetch" href="/prepare/assets/js/467.61a0ce04.js"><link rel="prefetch" href="/prepare/assets/js/468.8fd58011.js"><link rel="prefetch" href="/prepare/assets/js/469.b5989db0.js"><link rel="prefetch" href="/prepare/assets/js/47.98f2b096.js"><link rel="prefetch" href="/prepare/assets/js/470.2fa1b955.js"><link rel="prefetch" href="/prepare/assets/js/471.dbb71476.js"><link rel="prefetch" href="/prepare/assets/js/472.fed2edaa.js"><link rel="prefetch" href="/prepare/assets/js/473.df4b89fc.js"><link rel="prefetch" href="/prepare/assets/js/474.ec45147c.js"><link rel="prefetch" href="/prepare/assets/js/475.e7990055.js"><link rel="prefetch" href="/prepare/assets/js/476.dcc08f1d.js"><link rel="prefetch" href="/prepare/assets/js/477.71825b3f.js"><link rel="prefetch" href="/prepare/assets/js/478.767f52e2.js"><link rel="prefetch" href="/prepare/assets/js/479.cfb6b9ae.js"><link rel="prefetch" href="/prepare/assets/js/48.1b79e312.js"><link rel="prefetch" href="/prepare/assets/js/480.e8e07573.js"><link rel="prefetch" href="/prepare/assets/js/481.50540aff.js"><link rel="prefetch" href="/prepare/assets/js/482.dde332ff.js"><link rel="prefetch" href="/prepare/assets/js/483.7a90dcac.js"><link rel="prefetch" href="/prepare/assets/js/484.ddfe8904.js"><link rel="prefetch" href="/prepare/assets/js/485.036dc732.js"><link rel="prefetch" href="/prepare/assets/js/486.6db4f558.js"><link rel="prefetch" href="/prepare/assets/js/487.21245903.js"><link rel="prefetch" href="/prepare/assets/js/488.0d91c382.js"><link rel="prefetch" href="/prepare/assets/js/489.0b77301e.js"><link rel="prefetch" href="/prepare/assets/js/49.a82412c8.js"><link rel="prefetch" href="/prepare/assets/js/490.96b639c9.js"><link rel="prefetch" href="/prepare/assets/js/491.9b08213c.js"><link rel="prefetch" href="/prepare/assets/js/492.70cdf230.js"><link rel="prefetch" href="/prepare/assets/js/493.feaf053b.js"><link rel="prefetch" href="/prepare/assets/js/494.30ab5ba2.js"><link rel="prefetch" href="/prepare/assets/js/495.5e8335d7.js"><link rel="prefetch" href="/prepare/assets/js/496.75cdbc00.js"><link rel="prefetch" href="/prepare/assets/js/497.47680534.js"><link rel="prefetch" href="/prepare/assets/js/499.233a57bc.js"><link rel="prefetch" href="/prepare/assets/js/5.a57b603d.js"><link rel="prefetch" href="/prepare/assets/js/50.2be84f1c.js"><link rel="prefetch" href="/prepare/assets/js/500.fd489cd4.js"><link rel="prefetch" href="/prepare/assets/js/501.52b29e55.js"><link rel="prefetch" href="/prepare/assets/js/502.ced3c2ec.js"><link rel="prefetch" href="/prepare/assets/js/503.18ee74e1.js"><link rel="prefetch" href="/prepare/assets/js/504.4a599fc4.js"><link rel="prefetch" href="/prepare/assets/js/505.b0d3d858.js"><link rel="prefetch" href="/prepare/assets/js/506.f3d50aa1.js"><link rel="prefetch" href="/prepare/assets/js/507.635fdff5.js"><link rel="prefetch" href="/prepare/assets/js/508.a668aa88.js"><link rel="prefetch" href="/prepare/assets/js/509.11ddfad2.js"><link rel="prefetch" href="/prepare/assets/js/51.2a8121ce.js"><link rel="prefetch" href="/prepare/assets/js/510.4782c408.js"><link rel="prefetch" href="/prepare/assets/js/511.30b8f2cc.js"><link rel="prefetch" href="/prepare/assets/js/512.0234bca1.js"><link rel="prefetch" href="/prepare/assets/js/513.be57de29.js"><link rel="prefetch" href="/prepare/assets/js/514.3dd38b21.js"><link rel="prefetch" href="/prepare/assets/js/515.30b4a2be.js"><link rel="prefetch" href="/prepare/assets/js/516.d09402ee.js"><link rel="prefetch" href="/prepare/assets/js/517.e2e96c87.js"><link rel="prefetch" href="/prepare/assets/js/518.53ff6c74.js"><link rel="prefetch" href="/prepare/assets/js/519.b3a2f2e6.js"><link rel="prefetch" href="/prepare/assets/js/52.f3ce0642.js"><link rel="prefetch" href="/prepare/assets/js/520.4a66bc4d.js"><link rel="prefetch" href="/prepare/assets/js/521.6ad1e3aa.js"><link rel="prefetch" href="/prepare/assets/js/522.0ea83427.js"><link rel="prefetch" href="/prepare/assets/js/523.1a6951ea.js"><link rel="prefetch" href="/prepare/assets/js/524.ea959ca4.js"><link rel="prefetch" href="/prepare/assets/js/525.75b38db7.js"><link rel="prefetch" href="/prepare/assets/js/526.89abe86d.js"><link rel="prefetch" href="/prepare/assets/js/527.ec68a275.js"><link rel="prefetch" href="/prepare/assets/js/528.b7943097.js"><link rel="prefetch" href="/prepare/assets/js/529.cf4943fb.js"><link rel="prefetch" href="/prepare/assets/js/53.37afb476.js"><link rel="prefetch" href="/prepare/assets/js/530.ef96861b.js"><link rel="prefetch" href="/prepare/assets/js/531.2934570e.js"><link rel="prefetch" href="/prepare/assets/js/532.0c705f44.js"><link rel="prefetch" href="/prepare/assets/js/533.6cf34a39.js"><link rel="prefetch" href="/prepare/assets/js/534.b01afa3a.js"><link rel="prefetch" href="/prepare/assets/js/535.97470c34.js"><link rel="prefetch" href="/prepare/assets/js/536.1cdbfa3c.js"><link rel="prefetch" href="/prepare/assets/js/537.c3eea82c.js"><link rel="prefetch" href="/prepare/assets/js/538.18f986f8.js"><link rel="prefetch" href="/prepare/assets/js/539.6b3f9286.js"><link rel="prefetch" href="/prepare/assets/js/54.8223069c.js"><link rel="prefetch" href="/prepare/assets/js/540.f845a727.js"><link rel="prefetch" href="/prepare/assets/js/541.8b1b50e9.js"><link rel="prefetch" href="/prepare/assets/js/542.afaed2c1.js"><link rel="prefetch" href="/prepare/assets/js/543.67272f05.js"><link rel="prefetch" href="/prepare/assets/js/544.12d51376.js"><link rel="prefetch" href="/prepare/assets/js/545.9c1e2adb.js"><link rel="prefetch" href="/prepare/assets/js/546.6c7c8942.js"><link rel="prefetch" href="/prepare/assets/js/547.7e371375.js"><link rel="prefetch" href="/prepare/assets/js/548.9c483d7b.js"><link rel="prefetch" href="/prepare/assets/js/549.5df843c6.js"><link rel="prefetch" href="/prepare/assets/js/55.e8f21965.js"><link rel="prefetch" href="/prepare/assets/js/550.1cf5e5c4.js"><link rel="prefetch" href="/prepare/assets/js/551.39aedc2d.js"><link rel="prefetch" href="/prepare/assets/js/552.4fe60093.js"><link rel="prefetch" href="/prepare/assets/js/553.cc0a3817.js"><link rel="prefetch" href="/prepare/assets/js/554.8c5cc6b1.js"><link rel="prefetch" href="/prepare/assets/js/555.ea475414.js"><link rel="prefetch" href="/prepare/assets/js/556.94cdba64.js"><link rel="prefetch" href="/prepare/assets/js/557.37e0a6ad.js"><link rel="prefetch" href="/prepare/assets/js/558.ca89d2f9.js"><link rel="prefetch" href="/prepare/assets/js/559.b8ea6712.js"><link rel="prefetch" href="/prepare/assets/js/56.e9b03975.js"><link rel="prefetch" href="/prepare/assets/js/560.a366d9af.js"><link rel="prefetch" href="/prepare/assets/js/561.61767850.js"><link rel="prefetch" href="/prepare/assets/js/562.892d7a2b.js"><link rel="prefetch" href="/prepare/assets/js/563.5fe1b014.js"><link rel="prefetch" href="/prepare/assets/js/564.706eeed4.js"><link rel="prefetch" href="/prepare/assets/js/565.620ed2ee.js"><link rel="prefetch" href="/prepare/assets/js/566.6dc4987e.js"><link rel="prefetch" href="/prepare/assets/js/567.83f0e2f7.js"><link rel="prefetch" href="/prepare/assets/js/568.303348ac.js"><link rel="prefetch" href="/prepare/assets/js/569.943cf512.js"><link rel="prefetch" href="/prepare/assets/js/57.5b21b298.js"><link rel="prefetch" href="/prepare/assets/js/570.825bb104.js"><link rel="prefetch" href="/prepare/assets/js/571.40924dce.js"><link rel="prefetch" href="/prepare/assets/js/572.eeba81d4.js"><link rel="prefetch" href="/prepare/assets/js/573.75a58328.js"><link rel="prefetch" href="/prepare/assets/js/574.ed5eaf8b.js"><link rel="prefetch" href="/prepare/assets/js/575.14fdb463.js"><link rel="prefetch" href="/prepare/assets/js/576.5e1d3a32.js"><link rel="prefetch" href="/prepare/assets/js/577.ecf565c0.js"><link rel="prefetch" href="/prepare/assets/js/578.79d12e12.js"><link rel="prefetch" href="/prepare/assets/js/579.08c764de.js"><link rel="prefetch" href="/prepare/assets/js/58.7e00389c.js"><link rel="prefetch" href="/prepare/assets/js/580.de6e4bf3.js"><link rel="prefetch" href="/prepare/assets/js/581.91466d27.js"><link rel="prefetch" href="/prepare/assets/js/582.1bcc38aa.js"><link rel="prefetch" href="/prepare/assets/js/583.ce8a7731.js"><link rel="prefetch" href="/prepare/assets/js/584.62bc22f5.js"><link rel="prefetch" href="/prepare/assets/js/585.5a5d740e.js"><link rel="prefetch" href="/prepare/assets/js/586.a085271f.js"><link rel="prefetch" href="/prepare/assets/js/587.d517b76d.js"><link rel="prefetch" href="/prepare/assets/js/588.57cb8ab9.js"><link rel="prefetch" href="/prepare/assets/js/589.5ebdea6e.js"><link rel="prefetch" href="/prepare/assets/js/59.ebd4169f.js"><link rel="prefetch" href="/prepare/assets/js/590.086bed0d.js"><link rel="prefetch" href="/prepare/assets/js/591.c0e14b6e.js"><link rel="prefetch" href="/prepare/assets/js/592.19573c64.js"><link rel="prefetch" href="/prepare/assets/js/593.31c6e7dc.js"><link rel="prefetch" href="/prepare/assets/js/594.6d7e3c69.js"><link rel="prefetch" href="/prepare/assets/js/595.09ae2169.js"><link rel="prefetch" href="/prepare/assets/js/596.93b631d7.js"><link rel="prefetch" href="/prepare/assets/js/597.0dd98264.js"><link rel="prefetch" href="/prepare/assets/js/598.6ad999bf.js"><link rel="prefetch" href="/prepare/assets/js/599.789ca55e.js"><link rel="prefetch" href="/prepare/assets/js/6.97c357fb.js"><link rel="prefetch" href="/prepare/assets/js/60.97774042.js"><link rel="prefetch" href="/prepare/assets/js/600.4686c5b1.js"><link rel="prefetch" href="/prepare/assets/js/601.b24dad4e.js"><link rel="prefetch" href="/prepare/assets/js/602.ee91bc7e.js"><link rel="prefetch" href="/prepare/assets/js/603.02bad262.js"><link rel="prefetch" href="/prepare/assets/js/604.660164c6.js"><link rel="prefetch" href="/prepare/assets/js/605.381cc7dd.js"><link rel="prefetch" href="/prepare/assets/js/606.8e272e9c.js"><link rel="prefetch" href="/prepare/assets/js/607.6ba6eb1a.js"><link rel="prefetch" href="/prepare/assets/js/608.028e1348.js"><link rel="prefetch" href="/prepare/assets/js/609.7d7d6c56.js"><link rel="prefetch" href="/prepare/assets/js/61.c11c58b7.js"><link rel="prefetch" href="/prepare/assets/js/610.23dcdcab.js"><link rel="prefetch" href="/prepare/assets/js/611.4bfccf13.js"><link rel="prefetch" href="/prepare/assets/js/612.8a2f5d1f.js"><link rel="prefetch" href="/prepare/assets/js/613.dc33f084.js"><link rel="prefetch" href="/prepare/assets/js/614.8f586efe.js"><link rel="prefetch" href="/prepare/assets/js/615.c478604b.js"><link rel="prefetch" href="/prepare/assets/js/616.7a90dd0e.js"><link rel="prefetch" href="/prepare/assets/js/617.a12a6988.js"><link rel="prefetch" href="/prepare/assets/js/618.24a6e3e4.js"><link rel="prefetch" href="/prepare/assets/js/619.4712600e.js"><link rel="prefetch" href="/prepare/assets/js/62.5a8ae4c7.js"><link rel="prefetch" href="/prepare/assets/js/620.b7f87f65.js"><link rel="prefetch" href="/prepare/assets/js/621.e141d9de.js"><link rel="prefetch" href="/prepare/assets/js/622.0f960929.js"><link rel="prefetch" href="/prepare/assets/js/623.0fdc415a.js"><link rel="prefetch" href="/prepare/assets/js/624.64a060a9.js"><link rel="prefetch" href="/prepare/assets/js/625.123cf432.js"><link rel="prefetch" href="/prepare/assets/js/626.2087fc1d.js"><link rel="prefetch" href="/prepare/assets/js/627.a68939b0.js"><link rel="prefetch" href="/prepare/assets/js/628.489a5b8e.js"><link rel="prefetch" href="/prepare/assets/js/629.fbd63704.js"><link rel="prefetch" href="/prepare/assets/js/63.1372c82c.js"><link rel="prefetch" href="/prepare/assets/js/630.a4e5c4af.js"><link rel="prefetch" href="/prepare/assets/js/631.d33a1849.js"><link rel="prefetch" href="/prepare/assets/js/632.28d1340e.js"><link rel="prefetch" href="/prepare/assets/js/633.0f34851c.js"><link rel="prefetch" href="/prepare/assets/js/634.50c76ed7.js"><link rel="prefetch" href="/prepare/assets/js/635.89765e9a.js"><link rel="prefetch" href="/prepare/assets/js/636.f5f68d7c.js"><link rel="prefetch" href="/prepare/assets/js/637.68f8912a.js"><link rel="prefetch" href="/prepare/assets/js/638.0021624b.js"><link rel="prefetch" href="/prepare/assets/js/639.ab5cbf6e.js"><link rel="prefetch" href="/prepare/assets/js/64.a1e3d982.js"><link rel="prefetch" href="/prepare/assets/js/640.fe108e30.js"><link rel="prefetch" href="/prepare/assets/js/641.ec9253a0.js"><link rel="prefetch" href="/prepare/assets/js/642.066f7547.js"><link rel="prefetch" href="/prepare/assets/js/643.f1c02de6.js"><link rel="prefetch" href="/prepare/assets/js/644.31802784.js"><link rel="prefetch" href="/prepare/assets/js/645.cc4b383d.js"><link rel="prefetch" href="/prepare/assets/js/646.8bd184ac.js"><link rel="prefetch" href="/prepare/assets/js/647.631c8f0e.js"><link rel="prefetch" href="/prepare/assets/js/648.95bf84b3.js"><link rel="prefetch" href="/prepare/assets/js/649.26be152d.js"><link rel="prefetch" href="/prepare/assets/js/65.7a74267a.js"><link rel="prefetch" href="/prepare/assets/js/650.86cbe441.js"><link rel="prefetch" href="/prepare/assets/js/651.81a6e431.js"><link rel="prefetch" href="/prepare/assets/js/652.a301f462.js"><link rel="prefetch" href="/prepare/assets/js/653.bf065c73.js"><link rel="prefetch" href="/prepare/assets/js/654.0cd34cca.js"><link rel="prefetch" href="/prepare/assets/js/655.144cb6d9.js"><link rel="prefetch" href="/prepare/assets/js/656.a39e62de.js"><link rel="prefetch" href="/prepare/assets/js/657.919559bc.js"><link rel="prefetch" href="/prepare/assets/js/658.67094e05.js"><link rel="prefetch" href="/prepare/assets/js/659.3e78d6c9.js"><link rel="prefetch" href="/prepare/assets/js/66.06079dcc.js"><link rel="prefetch" href="/prepare/assets/js/660.32f0c96e.js"><link rel="prefetch" href="/prepare/assets/js/661.cfed0ab7.js"><link rel="prefetch" href="/prepare/assets/js/662.2a63452f.js"><link rel="prefetch" href="/prepare/assets/js/663.0577f204.js"><link rel="prefetch" href="/prepare/assets/js/664.ff6c9261.js"><link rel="prefetch" href="/prepare/assets/js/665.266aa2b5.js"><link rel="prefetch" href="/prepare/assets/js/666.e88bbe5d.js"><link rel="prefetch" href="/prepare/assets/js/667.90b94cb7.js"><link rel="prefetch" href="/prepare/assets/js/668.07872a6a.js"><link rel="prefetch" href="/prepare/assets/js/669.0ea365df.js"><link rel="prefetch" href="/prepare/assets/js/67.fe099c17.js"><link rel="prefetch" href="/prepare/assets/js/670.6f2b5cc8.js"><link rel="prefetch" href="/prepare/assets/js/671.4cd6423a.js"><link rel="prefetch" href="/prepare/assets/js/672.43fbee22.js"><link rel="prefetch" href="/prepare/assets/js/673.8255bffa.js"><link rel="prefetch" href="/prepare/assets/js/674.2a79d616.js"><link rel="prefetch" href="/prepare/assets/js/675.84a8a124.js"><link rel="prefetch" href="/prepare/assets/js/676.2512228d.js"><link rel="prefetch" href="/prepare/assets/js/677.6d39cd42.js"><link rel="prefetch" href="/prepare/assets/js/678.23a0f16d.js"><link rel="prefetch" href="/prepare/assets/js/679.84d7f77a.js"><link rel="prefetch" href="/prepare/assets/js/68.45032292.js"><link rel="prefetch" href="/prepare/assets/js/680.77080ee4.js"><link rel="prefetch" href="/prepare/assets/js/681.ae9ace4c.js"><link rel="prefetch" href="/prepare/assets/js/682.01d9dd26.js"><link rel="prefetch" href="/prepare/assets/js/683.3ca3838b.js"><link rel="prefetch" href="/prepare/assets/js/684.03a7d06a.js"><link rel="prefetch" href="/prepare/assets/js/685.74f3799f.js"><link rel="prefetch" href="/prepare/assets/js/686.9737fafc.js"><link rel="prefetch" href="/prepare/assets/js/687.0505270b.js"><link rel="prefetch" href="/prepare/assets/js/688.aaf713b5.js"><link rel="prefetch" href="/prepare/assets/js/689.beb9ac63.js"><link rel="prefetch" href="/prepare/assets/js/69.d9f4ff70.js"><link rel="prefetch" href="/prepare/assets/js/690.02239004.js"><link rel="prefetch" href="/prepare/assets/js/691.2855de65.js"><link rel="prefetch" href="/prepare/assets/js/692.e5dce548.js"><link rel="prefetch" href="/prepare/assets/js/693.3dee8218.js"><link rel="prefetch" href="/prepare/assets/js/694.14426901.js"><link rel="prefetch" href="/prepare/assets/js/695.8917c92a.js"><link rel="prefetch" href="/prepare/assets/js/696.6f984957.js"><link rel="prefetch" href="/prepare/assets/js/697.d16dd9e2.js"><link rel="prefetch" href="/prepare/assets/js/698.3d9b7f61.js"><link rel="prefetch" href="/prepare/assets/js/699.d67d510b.js"><link rel="prefetch" href="/prepare/assets/js/7.8f8c2a99.js"><link rel="prefetch" href="/prepare/assets/js/70.28441f3c.js"><link rel="prefetch" href="/prepare/assets/js/700.77a2a933.js"><link rel="prefetch" href="/prepare/assets/js/701.d694ad96.js"><link rel="prefetch" href="/prepare/assets/js/702.f3197516.js"><link rel="prefetch" href="/prepare/assets/js/703.3e89ba33.js"><link rel="prefetch" href="/prepare/assets/js/704.791dcd79.js"><link rel="prefetch" href="/prepare/assets/js/705.afe5a419.js"><link rel="prefetch" href="/prepare/assets/js/706.43783bb7.js"><link rel="prefetch" href="/prepare/assets/js/707.2757a267.js"><link rel="prefetch" href="/prepare/assets/js/708.f0d3b48b.js"><link rel="prefetch" href="/prepare/assets/js/709.eee9991c.js"><link rel="prefetch" href="/prepare/assets/js/71.46a3a3e7.js"><link rel="prefetch" href="/prepare/assets/js/710.135a5a48.js"><link rel="prefetch" href="/prepare/assets/js/711.b83181e1.js"><link rel="prefetch" href="/prepare/assets/js/712.37930fe9.js"><link rel="prefetch" href="/prepare/assets/js/713.70b23b38.js"><link rel="prefetch" href="/prepare/assets/js/714.cb0e6d6a.js"><link rel="prefetch" href="/prepare/assets/js/715.02c933ad.js"><link rel="prefetch" href="/prepare/assets/js/716.0839a445.js"><link rel="prefetch" href="/prepare/assets/js/717.d26314f2.js"><link rel="prefetch" href="/prepare/assets/js/718.13c9feaa.js"><link rel="prefetch" href="/prepare/assets/js/719.789fa63c.js"><link rel="prefetch" href="/prepare/assets/js/72.9f6ea290.js"><link rel="prefetch" href="/prepare/assets/js/720.8d13990d.js"><link rel="prefetch" href="/prepare/assets/js/721.92b0c7fc.js"><link rel="prefetch" href="/prepare/assets/js/722.9b53c1b1.js"><link rel="prefetch" href="/prepare/assets/js/723.6876095e.js"><link rel="prefetch" href="/prepare/assets/js/724.858b59a1.js"><link rel="prefetch" href="/prepare/assets/js/725.90598abb.js"><link rel="prefetch" href="/prepare/assets/js/726.30ab9f89.js"><link rel="prefetch" href="/prepare/assets/js/727.13c9f62a.js"><link rel="prefetch" href="/prepare/assets/js/728.a271b555.js"><link rel="prefetch" href="/prepare/assets/js/729.1fdbdd44.js"><link rel="prefetch" href="/prepare/assets/js/73.e1e33625.js"><link rel="prefetch" href="/prepare/assets/js/730.af812bd6.js"><link rel="prefetch" href="/prepare/assets/js/731.f56bddca.js"><link rel="prefetch" href="/prepare/assets/js/732.e4743ffe.js"><link rel="prefetch" href="/prepare/assets/js/733.738b91fb.js"><link rel="prefetch" href="/prepare/assets/js/734.9194ea51.js"><link rel="prefetch" href="/prepare/assets/js/735.64a67a41.js"><link rel="prefetch" href="/prepare/assets/js/736.a228b363.js"><link rel="prefetch" href="/prepare/assets/js/737.2c8e8564.js"><link rel="prefetch" href="/prepare/assets/js/738.9b6781d1.js"><link rel="prefetch" href="/prepare/assets/js/739.4a855685.js"><link rel="prefetch" href="/prepare/assets/js/74.db92607f.js"><link rel="prefetch" href="/prepare/assets/js/740.cbb8011a.js"><link rel="prefetch" href="/prepare/assets/js/741.9261764c.js"><link rel="prefetch" href="/prepare/assets/js/742.c2af8b25.js"><link rel="prefetch" href="/prepare/assets/js/743.9960d07b.js"><link rel="prefetch" href="/prepare/assets/js/744.50d4fd07.js"><link rel="prefetch" href="/prepare/assets/js/745.bb678611.js"><link rel="prefetch" href="/prepare/assets/js/746.74975791.js"><link rel="prefetch" href="/prepare/assets/js/747.2338992a.js"><link rel="prefetch" href="/prepare/assets/js/748.5432ba42.js"><link rel="prefetch" href="/prepare/assets/js/749.ccf2667e.js"><link rel="prefetch" href="/prepare/assets/js/75.69111272.js"><link rel="prefetch" href="/prepare/assets/js/750.1c767702.js"><link rel="prefetch" href="/prepare/assets/js/751.05ad7a69.js"><link rel="prefetch" href="/prepare/assets/js/76.1d35ad5a.js"><link rel="prefetch" href="/prepare/assets/js/77.2a19a118.js"><link rel="prefetch" href="/prepare/assets/js/78.05ae30f6.js"><link rel="prefetch" href="/prepare/assets/js/79.7b2a38e0.js"><link rel="prefetch" href="/prepare/assets/js/8.567ced01.js"><link rel="prefetch" href="/prepare/assets/js/80.95e5eb0b.js"><link rel="prefetch" href="/prepare/assets/js/81.ef465f68.js"><link rel="prefetch" href="/prepare/assets/js/82.d6d7b82b.js"><link rel="prefetch" href="/prepare/assets/js/83.a63a99e3.js"><link rel="prefetch" href="/prepare/assets/js/84.942f63e5.js"><link rel="prefetch" href="/prepare/assets/js/85.b4137613.js"><link rel="prefetch" href="/prepare/assets/js/86.56deb31f.js"><link rel="prefetch" href="/prepare/assets/js/87.b524b28f.js"><link rel="prefetch" href="/prepare/assets/js/88.2b795af1.js"><link rel="prefetch" href="/prepare/assets/js/89.54136ec5.js"><link rel="prefetch" href="/prepare/assets/js/9.3ac69323.js"><link rel="prefetch" href="/prepare/assets/js/90.13373682.js"><link rel="prefetch" href="/prepare/assets/js/91.5dca7fa1.js"><link rel="prefetch" href="/prepare/assets/js/92.84495cbd.js"><link rel="prefetch" href="/prepare/assets/js/93.67f9097b.js"><link rel="prefetch" href="/prepare/assets/js/94.b21b9ded.js"><link rel="prefetch" href="/prepare/assets/js/95.75f3bddf.js"><link rel="prefetch" href="/prepare/assets/js/96.10ab970e.js"><link rel="prefetch" href="/prepare/assets/js/97.62e0d8c4.js"><link rel="prefetch" href="/prepare/assets/js/98.96b8b43b.js"><link rel="prefetch" href="/prepare/assets/js/99.6f1f904e.js">
    <link rel="stylesheet" href="/prepare/assets/css/0.styles.792b4dee.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/prepare/" class="home-link router-link-active"><!----> <span class="site-name">Lu notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/prepare/" class="nav-link">首页</a></div><div class="nav-item"><a href="/prepare/js/" class="nav-link">Js</a></div><div class="nav-item"><a href="/prepare/react/" class="nav-link">React</a></div><div class="nav-item"><a href="/prepare/vue/" class="nav-link">Vue</a></div><div class="nav-item"><a href="/prepare/framework/" class="nav-link">框架通识</a></div><div class="nav-item"><a href="/prepare/safety/" class="nav-link">安全性能</a></div><div class="nav-item"><a href="/prepare/prepare/" class="nav-link router-link-active">Prepare</a></div><div class="nav-item"><a href="/prepare/fullstack/" class="nav-link">FullStack</a></div><div class="nav-item"><a href="/prepare/handrolledcode/" class="nav-link">手撸代码无敌</a></div><div class="nav-item"><a href="/prepare/dataalgorithm/" class="nav-link">数据算法</a></div><div class="nav-item"><a href="/prepare/engineering/" class="nav-link">工程化</a></div><div class="nav-item"><a href="/prepare/other/" class="nav-link">其他</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/prepare/" class="nav-link">首页</a></div><div class="nav-item"><a href="/prepare/js/" class="nav-link">Js</a></div><div class="nav-item"><a href="/prepare/react/" class="nav-link">React</a></div><div class="nav-item"><a href="/prepare/vue/" class="nav-link">Vue</a></div><div class="nav-item"><a href="/prepare/framework/" class="nav-link">框架通识</a></div><div class="nav-item"><a href="/prepare/safety/" class="nav-link">安全性能</a></div><div class="nav-item"><a href="/prepare/prepare/" class="nav-link router-link-active">Prepare</a></div><div class="nav-item"><a href="/prepare/fullstack/" class="nav-link">FullStack</a></div><div class="nav-item"><a href="/prepare/handrolledcode/" class="nav-link">手撸代码无敌</a></div><div class="nav-item"><a href="/prepare/dataalgorithm/" class="nav-link">数据算法</a></div><div class="nav-item"><a href="/prepare/engineering/" class="nav-link">工程化</a></div><div class="nav-item"><a href="/prepare/other/" class="nav-link">其他</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/prepare/prepare/css/" class="sidebar-heading clickable"><span>css</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/prepare/prepare/Daily Interview Question/" class="sidebar-heading clickable"><span>Daily Interview Question</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/prepare/prepare/ECMAScript/" class="sidebar-heading clickable"><span>ECMAScript</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/prepare/prepare/html/" class="sidebar-heading clickable"><span>html</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/prepare/prepare/jquery/" class="sidebar-heading clickable"><span>jquery</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/prepare/prepare/Js/" class="sidebar-heading clickable"><span>Js</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/prepare/prepare/know/" class="sidebar-heading clickable"><span>know</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/prepare/prepare/Mobile/" class="sidebar-heading clickable"><span>Mobile</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/prepare/prepare/New/" class="sidebar-heading clickable router-link-active open"><span>New</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/prepare/prepare/New/01-CSS.html" class="sidebar-link">01-CSS</a></li><li><a href="/prepare/prepare/New/02-Html.html" class="sidebar-link">02-Html</a></li><li><a href="/prepare/prepare/New/03-Js.html" class="sidebar-link">03-Js</a></li><li><a href="/prepare/prepare/New/04-ES6.html" class="sidebar-link">04-ES6</a></li><li><a href="/prepare/prepare/New/05-浏览器.html" class="sidebar-link">05-浏览器</a></li><li><a href="/prepare/prepare/New/06-服务端与网络.html" class="sidebar-link">06-服务端与网络</a></li><li><a href="/prepare/prepare/New/07-Vue.html" class="sidebar-link">07-Vue</a></li><li><a href="/prepare/prepare/New/08-React.html" class="sidebar-link">08-React</a></li><li><a href="/prepare/prepare/New/09-webpack.html" class="active sidebar-link">09-webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_1-webpack-热更新原理" class="sidebar-link">1. webpack 热更新原理</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_2-webpack-与-grunt、gulp-的不同？" class="sidebar-link">2. webpack 与 grunt、gulp 的不同？</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_3-webpack、rollup、parcel-优劣？" class="sidebar-link">3. webpack、rollup、parcel 优劣？</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_4-有哪些常见的-loader？" class="sidebar-link">4. 有哪些常见的 Loader？</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_5-有哪些常见的-plugin？" class="sidebar-link">5. 有哪些常见的 Plugin？</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_6-分别介绍-bundle，chunk，module-是什么" class="sidebar-link">6. 分别介绍 bundle，chunk，module 是什么</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_7-loader-和-plugin-的不同？" class="sidebar-link">7. Loader 和 Plugin 的不同？</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_8-如何用-webpack-来优化前端性能？" class="sidebar-link">8. 如何用 webpack 来优化前端性能？</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_9-如何提高-webpack-的打包速度" class="sidebar-link">9. 如何提高 webpack 的打包速度?</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_10-如何提高-webpack-的构建速度？" class="sidebar-link">10. 如何提高 webpack 的构建速度？</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_11-code-split-介绍" class="sidebar-link">11. code split 介绍</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_12-webpack-优化" class="sidebar-link">12. webpack 优化</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_13-loader-加载器" class="sidebar-link">13. loader 加载器</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_14-plugin" class="sidebar-link">14. plugin</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_15-devtool-的-sourcemap" class="sidebar-link">15. devtool 的 sourceMap</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_16-全局变量引入，" class="sidebar-link">16. 全局变量引入，</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_17-webpack-merge-区分打包环境" class="sidebar-link">17. webpack-merge 区分打包环境</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_18-webpack-优化" class="sidebar-link">18. webpack 优化</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_19-webpack-事件机制" class="sidebar-link">19. webpack 事件机制</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_20-打包体积-优化思路" class="sidebar-link">20. 打包体积 优化思路</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_21-打包效率" class="sidebar-link">21. 打包效率</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_22-loader-编写一个-loader" class="sidebar-link">22. Loader 编写一个 loader</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_23-定义环境变量" class="sidebar-link">23. 定义环境变量</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_24-区分不同环境-生产与开发环境" class="sidebar-link">24. 区分不同环境(生产与开发环境)</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_25-打包多页应用" class="sidebar-link">25. 打包多页应用</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_26-babel-的原理是什么" class="sidebar-link">26. Babel 的原理是什么?</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_27-改造-webpack-config-js，实现多线程打包-js" class="sidebar-link">27. 改造 webpack.config.js，实现多线程打包 js</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_28-实现-js-和-css-的多线程打包" class="sidebar-link">28. 实现 js 和 css 的多线程打包</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_29-懒加载" class="sidebar-link">29. 懒加载</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_30-babel-loader-js" class="sidebar-link">30. babel-loader.js</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_31-banner-loader-js" class="sidebar-link">31. banner-loader.js</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_32-file-loader-js" class="sidebar-link">32. file-loader.js</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_33-url-loader-js" class="sidebar-link">33. url-loader.js</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_34-loader-的执行顺序为什么是后写的先执行" class="sidebar-link">34. loader 的执行顺序为什么是后写的先执行</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_35-webpack-性能优化" class="sidebar-link">35. webpack 性能优化</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_36-有没有去研究-webpack-的一些原理和机制，怎么实现的" class="sidebar-link">36. 有没有去研究 webpack 的一些原理和机制，怎么实现的</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_37-webpack-运行流程" class="sidebar-link">37. webpack 运行流程</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_38-webpack-的构建流程是什么" class="sidebar-link">38. webpack 的构建流程是什么?</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_39-webpack5-做了哪些事情" class="sidebar-link">39. webpack5 做了哪些事情</a></li><li class="sidebar-sub-header"><a href="/prepare/prepare/New/09-webpack.html#_40" class="sidebar-link">40.</a></li></ul></li><li><a href="/prepare/prepare/New/10-性能优化.html" class="sidebar-link">10-性能优化</a></li><li><a href="/prepare/prepare/New/11-算法.html" class="sidebar-link">11-算法</a></li><li><a href="/prepare/prepare/New/12-常用八种继承方案.html" class="sidebar-link">12-常用八种继承方案</a></li><li><a href="/prepare/prepare/New/13-开发中遇到的坑.html" class="sidebar-link">13-开发中遇到的坑</a></li><li><a href="/prepare/prepare/New/14-React开发项目过程遇到的问题.html" class="sidebar-link">14-React开发项目过程遇到的问题</a></li><li><a href="/prepare/prepare/New/15-js基础.html" class="sidebar-link">15-js基础</a></li><li><a href="/prepare/prepare/New/16-兼容.html" class="sidebar-link">16-兼容</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/prepare/prepare/NodeJs/" class="sidebar-heading clickable"><span>NodeJs</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/prepare/prepare/React/" class="sidebar-heading clickable"><span>React</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/prepare/prepare/Vue/" class="sidebar-heading clickable"><span>Vue</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/prepare/prepare/综合/" class="sidebar-heading clickable"><span>综合</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/prepare/prepare/软技能/" class="sidebar-heading clickable"><span>软技能</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/prepare/prepare/面经/" class="sidebar-heading clickable"><span>面经</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/prepare/prepare/面试/" class="sidebar-heading clickable"><span>面试</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="add-2020-webpack"><a href="#add-2020-webpack" aria-hidden="true" class="header-anchor">#</a> Add 2020 webpack</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-webpack-热更新原理">1. webpack 热更新原理</a></li><li><a href="#_2-webpack-与-grunt、gulp-的不同？">2. webpack 与 grunt、gulp 的不同？</a></li><li><a href="#_3-webpack、rollup、parcel-优劣？">3. webpack、rollup、parcel 优劣？</a></li><li><a href="#_4-有哪些常见的-loader？">4. 有哪些常见的 Loader？</a></li><li><a href="#_5-有哪些常见的-plugin？">5. 有哪些常见的 Plugin？</a></li><li><a href="#_6-分别介绍-bundle，chunk，module-是什么">6. 分别介绍 bundle，chunk，module 是什么</a></li><li><a href="#_7-loader-和-plugin-的不同？">7. Loader 和 Plugin 的不同？</a></li><li><a href="#_8-如何用-webpack-来优化前端性能？">8. 如何用 webpack 来优化前端性能？</a></li><li><a href="#_9-如何提高-webpack-的打包速度">9. 如何提高 webpack 的打包速度?</a></li><li><a href="#_10-如何提高-webpack-的构建速度？">10. 如何提高 webpack 的构建速度？</a></li><li><a href="#_11-code-split-介绍">11. code split 介绍</a></li><li><a href="#_12-webpack-优化">12. webpack 优化</a></li><li><a href="#_13-loader-加载器">13. loader 加载器</a><ul><li><a href="#loader-特性">loader 特性</a></li><li><a href="#loader-类型：">loader 类型：</a></li></ul></li><li><a href="#_14-plugin">14. plugin</a></li><li><a href="#_15-devtool-的-sourcemap">15. devtool 的 sourceMap</a></li><li><a href="#_16-全局变量引入，">16. 全局变量引入，</a></li><li><a href="#_17-webpack-merge-区分打包环境">17. webpack-merge 区分打包环境</a></li><li><a href="#_18-webpack-优化">18. webpack 优化</a><ul><li><a href="#webpack-内置优化">webpack 内置优化</a></li><li><a href="#生产环境代码压缩">生产环境代码压缩</a></li><li><a href="#抽取公共代码（多页面）">抽取公共代码（多页面）</a></li><li><a href="#noparse-不解析包的依赖">noParse 不解析包的依赖</a></li><li><a href="#include-exclude">include/exclude</a></li><li><a href="#webpack-ignoreplugin-忽略依赖文件">webpack.IgnorePlugin 忽略依赖文件</a></li><li><a href="#dllplugin-单独打包第三方公共模块">DllPlugin 单独打包第三方公共模块</a></li><li><a href="#happypack-多线程打包">happypack 多线程打包</a></li></ul></li><li><a href="#_19-webpack-事件机制">19. webpack 事件机制</a></li><li><a href="#_20-打包体积-优化思路">20. 打包体积 优化思路</a></li><li><a href="#_21-打包效率">21. 打包效率</a></li><li><a href="#_22-loader-编写一个-loader">22. Loader 编写一个 loader</a></li><li><a href="#_23-定义环境变量">23. 定义环境变量</a></li><li><a href="#_24-区分不同环境-生产与开发环境">24. 区分不同环境(生产与开发环境)</a></li><li><a href="#_25-打包多页应用">25. 打包多页应用</a></li><li><a href="#_26-babel-的原理是什么">26. Babel 的原理是什么?</a></li><li><a href="#_27-改造-webpack-config-js，实现多线程打包-js">27. 改造 webpack.config.js，实现多线程打包 js</a></li><li><a href="#_28-实现-js-和-css-的多线程打包">28. 实现 js 和 css 的多线程打包</a></li><li><a href="#_29-懒加载">29. 懒加载</a></li><li><a href="#_30-babel-loader-js">30. babel-loader.js</a></li><li><a href="#_31-banner-loader-js">31. banner-loader.js</a></li><li><a href="#_32-file-loader-js">32. file-loader.js</a></li><li><a href="#_33-url-loader-js">33. url-loader.js</a></li><li><a href="#_34-loader-的执行顺序为什么是后写的先执行">34. loader 的执行顺序为什么是后写的先执行</a></li><li><a href="#_35-webpack-性能优化">35. webpack 性能优化</a></li><li><a href="#_36-有没有去研究-webpack-的一些原理和机制，怎么实现的">36. 有没有去研究 webpack 的一些原理和机制，怎么实现的</a></li><li><a href="#_37-webpack-运行流程">37. webpack 运行流程</a></li><li><a href="#_38-webpack-的构建流程是什么">38. webpack 的构建流程是什么?</a></li><li><a href="#_39-webpack5-做了哪些事情">39. webpack5 做了哪些事情</a></li><li><a href="#_40">40.</a></li></ul></div><p></p> <h2 id="_1-webpack-热更新原理"><a href="#_1-webpack-热更新原理" aria-hidden="true" class="header-anchor">#</a> 1. webpack 热更新原理</h2> <ol><li>当修改了一个或多个文件；</li> <li>文件系统接收更改并通知 webpack；</li> <li>webpack 重新编译构建一个或多个模块，并通知 HMR 服务器进行更新；</li> <li>HMR Server 使用 webSocket 通知 HMR runtime 需要更新，HMR 运行时通过 HTTP 请求更新 jsonp；</li> <li>HMR 运行时替换更新中的模块，如果确定这些模块无法更新，则触发整个页面刷新。</li></ol> <h2 id="_2-webpack-与-grunt、gulp-的不同？"><a href="#_2-webpack-与-grunt、gulp-的不同？" aria-hidden="true" class="header-anchor">#</a> 2. webpack 与 grunt、gulp 的不同？</h2> <p>Grunt、Gulp 是基于任务运行的工具：</p> <p>它们会自动执行指定的任务，就像流水线，把资源放上去然后通过不同插件进行加工，它们包含活跃的社区，丰富的插件，能方便的打造各种工作流。</p> <p>Webpack 是基于模块化打包的工具:</p> <p>自动化处理模块,webpack 把一切当成模块，当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。</p> <p>因此这是完全不同的两类工具,而现在主流的方式是用 npm script 代替 Grunt、Gulp,npm script 同样可以打造任务流.</p> <h2 id="_3-webpack、rollup、parcel-优劣？"><a href="#_3-webpack、rollup、parcel-优劣？" aria-hidden="true" class="header-anchor">#</a> 3. webpack、rollup、parcel 优劣？</h2> <p><strong>webpack</strong>适用于大型复杂的前端站点构建: webpack 有强大的 loader 和插件生态, 打包后的文件实际上就是一个立即执行函数，这个立即执行函数接收一个参数，这个参数是模块对象，键为各个模块的路径，值为模块内容。立即执行函数内部则处理模块之间的引用，执行模块等,这种情况更适合文件依赖复杂的应用开发.</p> <p><strong>rollup</strong>适用于基础库的打包，如 vue、d3 等: Rollup 就是将各个模块打包进一个文件中，并且通过 Tree-shaking 来删除无用的代码,可以最大程度上降低代码体积,但是 rollup 没有 webpack 如此多的的如代码分割、按需加载等高级功能，其更聚焦于库的打包，因此更适合库的开发.</p> <p><strong>parcel</strong>适用于简单的实验性项目: 他可以满足低门槛的快速看到效果,但是生态差、报错信息不够全面都是他的硬伤，除了一些玩具项目或者实验项目不建议使用</p> <h2 id="_4-有哪些常见的-loader？"><a href="#_4-有哪些常见的-loader？" aria-hidden="true" class="header-anchor">#</a> 4. 有哪些常见的 Loader？</h2> <ul><li>file-loader：把文件输出到一个文件夹中，在代码中通过相对 URL 去引用输出的文件</li> <li>url-loader：和 file-loader 类似，但是能在文件很小的情况下以 base64 的方式把文件内容注入到代码中去</li> <li>source-map-loader：加载额外的 Source Map 文件，以方便断点调试</li> <li>image-loader：加载并且压缩图片文件</li> <li>babel-loader：把 ES6 转换成 ES5</li> <li>css-loader：加载 CSS，支持模块化、压缩、文件导入等特性</li> <li>style-loader：把 CSS 代码注入到 JavaScript 中，通过 DOM 操作去加载 CSS。</li> <li>eslint-loader：通过 ESLint 检查 JavaScript 代码</li></ul> <h2 id="_5-有哪些常见的-plugin？"><a href="#_5-有哪些常见的-plugin？" aria-hidden="true" class="header-anchor">#</a> 5. 有哪些常见的 Plugin？</h2> <ul><li>define-plugin：定义环境变量</li> <li>html-webpack-plugin：简化 html 文件创建</li> <li>uglifyjs-webpack-plugin：通过 UglifyES 压缩 ES6 代码</li> <li>webpack-parallel-uglify-plugin: 多核压缩,提高压缩速度</li> <li>webpack-bundle-analyzer: 可视化 webpack 输出文件的体积</li> <li>mini-css-extract-plugin: CSS 提取到单独的文件中,支持按需加载</li></ul> <h2 id="_6-分别介绍-bundle，chunk，module-是什么"><a href="#_6-分别介绍-bundle，chunk，module-是什么" aria-hidden="true" class="header-anchor">#</a> 6. 分别介绍 bundle，chunk，module 是什么</h2> <ul><li>bundle：是由 webpack 打包出来的文件</li> <li>chunk：代码块，一个 chunk 由多个模块组合而成，用于代码的合并和分割</li> <li>module：是开发中的单个模块，在 webpack 的世界，一切皆模块，一个模块对应一个文件，webpack 会从配置的 entry 中递归开始找出所有依赖的模块</li></ul> <h2 id="_7-loader-和-plugin-的不同？"><a href="#_7-loader-和-plugin-的不同？" aria-hidden="true" class="header-anchor">#</a> 7. Loader 和 Plugin 的不同？</h2> <p><strong>不同的作用</strong>:</p> <ul><li><strong>Loader</strong>直译为&quot;加载器&quot;。Webpack 将一切文件视为模块，但是 webpack 原生是只能解析 js 文件，如果想将其他文件也打包的话，就会用到<code>loader</code>。 所以 Loader 的作用是让 webpack 拥有了加载和解析<em>非 JavaScript 文件</em>的能力。</li> <li><strong>Plugin</strong>直译为&quot;插件&quot;。Plugin 可以扩展 webpack 的功能，让 webpack 具有更多的灵活性。 在 Webpack 运行的生命周期中会广播出许多事件，Plugin 可以监听这些事件，在合适的时机通过 Webpack 提供的 API 改变输出结果。</li></ul> <p><strong>不同的用法</strong>:</p> <ul><li><strong>Loader</strong>在<code>module.rules</code>中配置，也就是说他作为模块的解析规则而存在。 类型为数组，每一项都是一个<code>Object</code>，里面描述了对于什么类型的文件（<code>test</code>），使用什么加载(<code>loader</code>)和使用的参数（<code>options</code>）</li> <li><strong>Plugin</strong>在<code>plugins</code>中单独配置。 类型为数组，每一项是一个<code>plugin</code>的实例，参数都通过构造函数传入。</li></ul> <h2 id="_8-如何用-webpack-来优化前端性能？"><a href="#_8-如何用-webpack-来优化前端性能？" aria-hidden="true" class="header-anchor">#</a> 8. 如何用 webpack 来优化前端性能？</h2> <p>用 webpack 优化前端性能是指优化 webpack 的输出结果，让打包的最终结果在浏览器运行快速高效。</p> <ul><li>压缩代码:删除多余的代码、注释、简化代码的写法等等方式。可以利用 webpack 的<code>UglifyJsPlugin</code>和<code>ParallelUglifyPlugin</code>来压缩 JS 文件， 利用<code>cssnano</code>（css-loader?minimize）来压缩 css</li> <li>利用 CDN 加速: 在构建过程中，将引用的静态资源路径修改为 CDN 上对应的路径。可以利用 webpack 对于<code>output</code>参数和各 loader 的<code>publicPath</code>参数来修改资源路径</li> <li>Tree Shaking: 将代码中永远不会走到的片段删除掉。可以通过在启动 webpack 时追加参数<code>--optimize-minimize</code>来实现</li> <li>Code Splitting: 将代码按路由维度或者组件分块(chunk),这样做到按需加载,同时可以充分利用浏览器缓存</li> <li>提取公共第三方库: SplitChunksPlugin 插件来进行公共模块抽取,利用浏览器缓存可以长期缓存这些无需频繁变动的公共代码</li></ul> <h2 id="_9-如何提高-webpack-的打包速度"><a href="#_9-如何提高-webpack-的打包速度" aria-hidden="true" class="header-anchor">#</a> 9. 如何提高 webpack 的打包速度?</h2> <ul><li>happypack: 利用进程并行编译 loader,利用缓存来使得 rebuild 更快,遗憾的是作者表示已经不会继续开发此项目,类似的替代者是<a href="https://github.com/webpack-contrib/thread-loader" target="_blank" rel="noopener noreferrer">thread-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://webpack.docschina.org/configuration/externals/" target="_blank" rel="noopener noreferrer">外部扩展(externals)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: 将不怎么需要更新的第三方库脱离 webpack 打包，不被打入 bundle 中，从而减少打包时间,比如 jQuery 用 script 标签引入</li> <li>dll: 采用 webpack 的 DllPlugin 和 DllReferencePlugin 引入 dll，让一些基本不会改动的代码先打包成静态资源,避免反复编译浪费时间</li> <li>利用缓存: <code>webpack.cache</code>、babel-loader.cacheDirectory、HappyPack.cache 都可以利用缓存提高 rebuild 效率</li> <li>缩小文件搜索范围: 比如 babel-loader 插件,如果你的文件仅存在于 src 中,那么可以<code>include: path.resolve(__dirname, 'src')</code>,当然绝大多数情况下这种操作的提升有限,除非不小心 build 了 node_modules 文件</li></ul> <h2 id="_10-如何提高-webpack-的构建速度？"><a href="#_10-如何提高-webpack-的构建速度？" aria-hidden="true" class="header-anchor">#</a> 10. 如何提高 webpack 的构建速度？</h2> <ol><li>多入口情况下，使用<code>CommonsChunkPlugin</code>来提取公共代码</li> <li>通过<code>externals</code>配置来提取常用库</li> <li>利用<code>DllPlugin</code>和<code>DllReferencePlugin</code>预编译资源模块 通过<code>DllPlugin</code>来对那些我们引用但是绝对不会修改的 npm 包来进行预编译，再通过<code>DllReferencePlugin</code>将预编译的模块加载进来。</li> <li>使用<code>Happypack</code> 实现多线程加速编译</li> <li>使用<code>webpack-uglify-parallel</code>来提升<code>uglifyPlugin</code>的压缩速度。 原理上<code>webpack-uglify-parallel</code>采用了多核并行压缩来提升压缩速度</li> <li>使用<code>Tree-shaking</code>和<code>Scope Hoisting</code>来剔除多余代码</li></ol> <h2 id="_11-code-split-介绍"><a href="#_11-code-split-介绍" aria-hidden="true" class="header-anchor">#</a> 11. code split 介绍</h2> <p>为了减少 HTTP 请求，通常我们会讲所有代码打包到一个文件中，但是如果文件过大，也会影响页面的加载速度，尤其是会增加白屏时间，所以我们不妨将代码分成一块一块的；并且只在需要的时候去加载它；还可以利用浏览器将这些模块缓存起来；一般情况下分离有两种</p> <ul><li>将第三方代码从业务代码中抽离（verdor）</li> <li>根据不同入口的业务代码按需加载（利用 import()语法）</li></ul> <h2 id="_12-webpack-优化"><a href="#_12-webpack-优化" aria-hidden="true" class="header-anchor">#</a> 12. webpack 优化</h2> <ul><li><p>loader 处理结果缓存</p> <ol><li>babel-loader 缓存,通过<code>cacheDirectory</code>开启缓存<div class="language-js line-numbers-mode"><pre class="language-js"><code>webpack<span class="token punctuation">.</span>module<span class="token punctuation">.</span>rules<span class="token punctuation">:</span><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'babel-loader'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        babelrc<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token comment">// 将 babel 编译过的模块缓存在 webpack_cache 目录下，下次优先复用</span>
        cacheDirectory<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li>eslint-loader 缓存,通过<code>cache</code>选项指定缓存路径；注：配置更后如果不起作用则需要将<code>cache</code>文件删除<div class="language-js line-numbers-mode"><pre class="language-js"><code>webpack<span class="token punctuation">.</span>module<span class="token punctuation">.</span>rules<span class="token punctuation">:</span><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.(js|vue)$/</span><span class="token punctuation">,</span>
  enforce<span class="token punctuation">:</span> <span class="token string">'pre'</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 启动缓存</span>
        cache<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      loader<span class="token punctuation">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'eslint-loader'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li>css/scss 缓存通过 cache-loader 辅助构建结果缓存</li></ol></li> <li><p>缩小编译范围，减少不必要的编译工作</p> <ol><li>指定模块解析路径，加速模块查找<div class="language-js line-numbers-mode"><pre class="language-js"><code>webpack<span class="token punctuation">.</span>resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 指定以下目录寻找第三方模块，避免webpack往父级目录递归搜索</span>
  modules<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'node_modules'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>projectDir<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>projectDir<span class="token punctuation">,</span> <span class="token string">'node_modules'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li>忽略未用模块化的库，不去解析它们以提升编译速度<div class="language-js line-numbers-mode"><pre class="language-js"><code>webpack<span class="token punctuation">.</span>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  noParse<span class="token punctuation">:</span> <span class="token regex">/node_modules\/(jQuery|chart\.js)/</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li>为 loader 添加<code>include/exclude</code>缩小 babel 的编译范围<div class="language-js line-numbers-mode"><pre class="language-js"><code>webpack<span class="token punctuation">.</span>module<span class="token punctuation">.</span>rules<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
    use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
      query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 将 babel 编译过的模块缓存在 webpack_cache 目录下，下次优先复用</span>
        cacheDirectory<span class="token punctuation">:</span> <span class="token string">'./webpack_cache/'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 减少 babel 编译范围，忘记设置会让 webpack 编译慢上好几倍</span>
    include<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ol></li> <li><p>通过<code>webpack-parallel-uglify-plugin</code>插件开启多个子线程压缩代码</p></li> <li><p>通过<code>Happypack</code>开启多线程加速 loader 对文件的转换速度</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js?$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;happypack/loader?id=babel&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        include<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HappyPack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token string">&quot;babel&quot;</span><span class="token punctuation">,</span>
      loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
          query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            cacheDirectory<span class="token punctuation">:</span> <span class="token string">&quot;./webpack_cache/&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></li> <li><p>用<code>DllPlugin</code>和<code>DllReferencePlugin</code>提前打包公共模块；注：不建议将所有公共模块放在 dll 中，否则无法用 webpack 的<code>代码分割</code>和<code>按需加载</code>功能</p></li> <li><p>使用<code>ModuleConcatenationPlugin</code>插件开启<code>scope-hoisting(作用域提升)</code>功能，尽可能的把打包出来的模块合并到一个函数中去（代码需要符合 es6 的 module 规范）</p> <blockquote><p>注意： webpack4 中，去掉了这个插件改为<code>optimization.concatenateModules</code>配置，默认<code>在生产环境是开启的</code></p></blockquote></li> <li><p>使用 ES6 模块来开启 <code>tree shaking</code></p></li> <li><p>按照路由拆分代码，实现按需加载</p></li> <li><p>使用<code>webpack-bundle-analyzer对</code>打包文件进行分析，将大文件模块提取出来在 html 中单独加载
webpack 配置：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ...</span>
externals<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'element-ui'</span><span class="token punctuation">:</span> <span class="token string">'Element'</span><span class="token punctuation">,</span>
    <span class="token string">'v-charts'</span><span class="token punctuation">:</span> <span class="token string">'VCharts'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>html:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/element-ui@2.10.0/lib/index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>webpack 持久化缓存</p></li></ul> <h2 id="_13-loader-加载器"><a href="#_13-loader-加载器" aria-hidden="true" class="header-anchor">#</a> 13. loader 加载器</h2> <p>loader 本身是一个函数，用于对模块的源代码进行转换，在配置文件的 module.rules 中配置 loader。</p> <h3 id="loader-特性"><a href="#loader-特性" aria-hidden="true" class="header-anchor">#</a> loader 特性</h3> <ol><li>执行顺序：默认从右到左，从下到上</li> <li>支持链式传递，支持同异步，命名约定为 <code>xxx-loader</code></li></ol> <table><thead><tr><th>常用 loader</th> <th>功能</th></tr></thead> <tbody><tr><td>css-loader</td> <td>处理 CSS 文件，如 @import/url 等</td></tr> <tr><td>style-loader</td> <td>处理 CSS 文件插入到 html 中</td></tr> <tr><td>post-loader</td> <td>补全浏览器前缀，配合 autoprefixer 使用，并先于 css-loader 执行，额外配置文件 .bowerlistrc/postcss.config.js</td></tr> <tr><td>less-loader</td> <td>配合 less 处理</td></tr> <tr><td>sass-loader</td> <td>配合 sass 处理</td></tr> <tr><td>babel-loader</td> <td>处理 ES6 转换，@babel/core @babel/preset-env @babel/plugin-transform-runtime</td></tr> <tr><td>eslint-loader</td> <td>处理语法校验</td></tr> <tr><td>file-loader</td> <td>生成文件到 build 目录，并返回地址</td></tr> <tr><td>url-loader</td> <td>能限制图片大小转换 base64，超出则类似 file-loader</td></tr> <tr><td>html-withimg-loader</td> <td>处理 html 中的图片命名，与 file-loader 同步</td></tr> <tr><td>expose-loader</td> <td>暴露给全局对象</td></tr></tbody></table> <h3 id="loader-类型："><a href="#loader-类型：" aria-hidden="true" class="header-anchor">#</a> loader 类型：</h3> <ul><li>前置 loader <code>enforce: 'pre'</code> 优先执行</li> <li>后置 loader <code>enforce: 'post'</code> 延后执行</li> <li>普通 loader</li> <li>内联 loader <code>expose?$!jquery</code></li> <li>行内 loader <code>inline-loader!./a.js</code></li></ul> <h2 id="_14-plugin"><a href="#_14-plugin" aria-hidden="true" class="header-anchor">#</a> 14. plugin</h2> <p>plugin 本身是一个具有 <code>apply()</code> 方法的类，目的在于解决 loader 无法实现的其它问题。</p> <table><thead><tr><th>常用 plugin</th> <th>功能</th></tr></thead> <tbody><tr><td>html-webpack-plugin</td> <td>打包生成 html 文件</td></tr> <tr><td>mini-css-extract-plugin</td> <td>将 CSS 文件抽离成单独文件以 link 方式插入到 html 中</td></tr> <tr><td>optimize-css-assets-plugin</td> <td>处理 CSS 压缩，使用该插件后，需自行处理 js 压缩</td></tr> <tr><td>uglify-js-plugin</td> <td>处理 js 压缩</td></tr> <tr><td>clean-webpack-plugin</td> <td>处理每次打包清除指定文件夹，默认是 dist</td></tr> <tr><td>copy-webpack-plugin</td> <td>处理文件拷贝</td></tr> <tr><td>happpack</td> <td>多线程打包</td></tr></tbody></table> <p>webpack 本身也集成了部分常用的 plugin</p> <table><thead><tr><th>webpack/plugin</th> <th>功能</th></tr></thead> <tbody><tr><td>BannerPlugin</td> <td>向 js 文件插入注释内容</td></tr> <tr><td>IgnorePlugin</td> <td>忽略打包指定引用文件，如屏蔽 moment 全语言包引入</td></tr> <tr><td>DllPlugin</td> <td>用于第三方分离打包</td></tr> <tr><td>DefinePlugin</td> <td>定义环境变量</td></tr> <tr><td>ProvidePlugin</td> <td>暴露模块，不必通过 import/require 引用</td></tr></tbody></table> <h2 id="_15-devtool-的-sourcemap"><a href="#_15-devtool-的-sourcemap" aria-hidden="true" class="header-anchor">#</a> 15. devtool 的 sourceMap</h2> <table><thead><tr><th>类型</th> <th>功能</th></tr></thead> <tbody><tr><td>source-map</td> <td>增加映射文件，大而全</td></tr> <tr><td>eval-source-map</td> <td>无单独文件，可显示行列</td></tr> <tr><td>cheap-module-source-map</td> <td>单独映射文件，显示行不显示列</td></tr> <tr><td>cheap-module-eval-source-map</td> <td>无单独文件，有行无列</td></tr></tbody></table> <h2 id="_16-全局变量引入，"><a href="#_16-全局变量引入，" aria-hidden="true" class="header-anchor">#</a> 16. 全局变量引入，</h2> <ul><li>expose-loader 暴露到 window 上；</li> <li>webpack.ProvidePlugin 暴露到每个模块；</li> <li>CDN 外链与 import 共用时，使用 exteneral 避免重复打包</li></ul> <h2 id="_17-webpack-merge-区分打包环境"><a href="#_17-webpack-merge-区分打包环境" aria-hidden="true" class="header-anchor">#</a> 17. webpack-merge 区分打包环境</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.common.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> 'dist<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.dev.js</span>
<span class="token keyword">const</span> webpackMerge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">webpackMerge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    port<span class="token punctuation">:</span> <span class="token string">'8080'</span><span class="token punctuation">,</span>
    contentBase<span class="token punctuation">:</span> <span class="token string">'dist'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.prod.js</span>
<span class="token keyword">const</span> webpackMerge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-merge&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">webpackMerge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimize<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>// 开发环境构建
webpack --config webpack.dev.js
// 生成环境构建
webpack --config webpack.prod.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_18-webpack-优化"><a href="#_18-webpack-优化" aria-hidden="true" class="header-anchor">#</a> 18. webpack 优化</h2> <h3 id="webpack-内置优化"><a href="#webpack-内置优化" aria-hidden="true" class="header-anchor">#</a> webpack 内置优化</h3> <ul><li>tree-shaking</li> <li>scope hosting 作用域提升</li></ul> <h3 id="生产环境代码压缩"><a href="#生产环境代码压缩" aria-hidden="true" class="header-anchor">#</a> 生产环境代码压缩</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 处理 js/css 压缩</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        cache<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        parallel<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">OptimizeCSSAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="抽取公共代码（多页面）"><a href="#抽取公共代码（多页面）" aria-hidden="true" class="header-anchor">#</a> 抽取公共代码（多页面）</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        common<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          chunks<span class="token punctuation">:</span> <span class="token string">&quot;initial&quot;</span><span class="token punctuation">,</span>
          name<span class="token punctuation">:</span> <span class="token string">&quot;common&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        vendor<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          chunks<span class="token punctuation">:</span> <span class="token string">&quot;initial&quot;</span><span class="token punctuation">,</span>
          test<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
          name<span class="token punctuation">:</span> <span class="token string">&quot;vendor&quot;</span><span class="token punctuation">,</span>
          priority<span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="noparse-不解析包的依赖"><a href="#noparse-不解析包的依赖" aria-hidden="true" class="header-anchor">#</a> noParse 不解析包的依赖</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> $ <span class="token keyword">from</span> 'jquery
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>webpack 默认会去解析引用的包是否有依赖，如上 webpack 会去解析 jquery 这个包是否还有其它依赖项，但 jquery 是个独立的包，并没有其它依赖，因此可使用 noParse 让 webpack 构建时屏蔽对 jquery 包中依赖项进行检查和解析。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    noParse<span class="token punctuation">:</span> <span class="token operator">/</span>jquery<span class="token operator">/</span> <span class="token comment">// 不去解析 jquery 中的依赖关系</span>
    <span class="token comment">//...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="include-exclude"><a href="#include-exclude" aria-hidden="true" class="header-anchor">#</a> include/exclude</h3> <p>缩小 loader 处理文件的范围：include 包含 / exclude 排除</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        include<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            preset<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="webpack-ignoreplugin-忽略依赖文件"><a href="#webpack-ignoreplugin-忽略依赖文件" aria-hidden="true" class="header-anchor">#</a> webpack.IgnorePlugin 忽略依赖文件</h3> <p>针对 moment 语言包全部引入的情况下，使用后需手动引入需要的语言包文件。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 使用 moment</span>
<span class="token keyword">import</span> moment <span class="token keyword">from</span> <span class="token string">&quot;moment&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;moment/locale/zh-cn&quot;</span><span class="token punctuation">;</span>
moment<span class="token punctuation">.</span><span class="token function">locale</span><span class="token punctuation">(</span><span class="token string">&quot;zh-cn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">endOf</span><span class="token punctuation">(</span><span class="token string">&quot;day&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">fromNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack 配置</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>IgnorePlugin</span><span class="token punctuation">(</span><span class="token regex">/\.\/locale/</span><span class="token punctuation">,</span> <span class="token regex">/moment/</span><span class="token punctuation">)</span>
    <span class="token comment">// 如果从 moment 中 引入了 ./locale/* 文件，就会自动屏蔽构建</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="dllplugin-单独打包第三方公共模块"><a href="#dllplugin-单独打包第三方公共模块" aria-hidden="true" class="header-anchor">#</a> DllPlugin 单独打包第三方公共模块</h3> <p>针对第三包，在开发环境时无需频繁构建，因此可针对第三包单独构建，并生成映射。
<a href="https://github.com/ZengLingYong/Blog/tree/master/Webpack/DllPlugin" target="_blank" rel="noopener noreferrer">查看源码<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="happypack-多线程打包"><a href="#happypack-多线程打包" aria-hidden="true" class="header-anchor">#</a> happypack 多线程打包</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Happypack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;happypack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">Happpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token string">&quot;css&quot;</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span> use<span class="token punctuation">:</span> <span class="token string">&quot;Happypack/loader?id=css&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_19-webpack-事件机制"><a href="#_19-webpack-事件机制" aria-hidden="true" class="header-anchor">#</a> 19. webpack 事件机制</h2> <p>Webpack 事件流机制核心：Tapable，类似 NodeJs 的 events 库，原理是 &quot;发布订阅模式&quot;</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>
  SyncHook<span class="token punctuation">,</span>
  SyncBailHook<span class="token punctuation">,</span>
  SyncWaterfallHook<span class="token punctuation">,</span>
  SyncLoopHook<span class="token punctuation">,</span>
  AsyncParalleHook<span class="token punctuation">,</span>
  AsyncParelleBailHook<span class="token punctuation">,</span>
  AsyncSeriesHook<span class="token punctuation">,</span>
  AsyncSeriesBailHook<span class="token punctuation">,</span>
  AsyncSeriesWaterfailHook
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;tapable&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><table><thead><tr><th>Tabable 钩子</th> <th>功能</th></tr></thead> <tbody><tr><td>SyncHook</td> <td>同步钩子，顺序执行 forEach</td></tr> <tr><td>SyncBailHook</td> <td>同步容断钩子，当某个 tap 事件有返回值时（非 undefined)，中断后续执行 do...while</td></tr> <tr><td>SyncWaterfallHook</td> <td>同步瀑布钩子，钩子回调函数数据往下传递 reduce</td></tr> <tr><td>SyncLoopHook</td> <td>同步多次执行，当某个 tap 事件有返回值时（非 undefined)，循环执行</td></tr> <tr><td>AsyncParalleHook</td> <td>异步并行钩子，每个 tapAsync 事件调用回调，所有都执行方可执行 caaSync 的回调</td></tr> <tr><td>AsyncParalleBailHook</td> <td>异步并行容断钩子</td></tr> <tr><td>AsyncSeriesHook</td> <td>异步串行钩子</td></tr> <tr><td>AsyncSeriesBailHook</td> <td>异步串行容断钩子</td></tr> <tr><td>AsyncSeriesWaterfallHook</td> <td>异步串行瀑布钩子</td></tr></tbody></table> <ul><li>Sync 同步钩子使用 <code>tap/call</code></li> <li>Async 异步钩子使用 <code>tapAsync/callAsync</code> 和 <code>tapPromie/promise</code></li></ul> <h2 id="_20-打包体积-优化思路"><a href="#_20-打包体积-优化思路" aria-hidden="true" class="header-anchor">#</a> 20. 打包体积 优化思路</h2> <ol><li>提取第三方库或通过引用外部文件的方式引入第三方库</li> <li>代码压缩插件 UglifyJsPlugin</li> <li>服务器启用 gzip 压缩</li> <li>按需加载资源文件 require.ensure</li> <li>优化 devtool 中的 source-map</li> <li>剥离 css 文件，单独打包</li> <li>去除不必要插件，通常就是开发环境与生产环境用同一套配置文件导致</li></ol> <h2 id="_21-打包效率"><a href="#_21-打包效率" aria-hidden="true" class="header-anchor">#</a> 21. 打包效率</h2> <ol><li>开发环境采用增量构建，启用热更新</li> <li>开发环境不做无意义的工作如提取 css 计算文件 hash 等</li> <li>配置 devtool</li> <li>选择合适的 loader</li> <li>个别 loader 开启 cache 如 babel-loader</li> <li>第三方库采用引入方式</li> <li>提取公共代码</li> <li>优化构建时的搜索路径 指明需要构建目录及不需要构建目录</li> <li>模块化引入需要的部分</li></ol> <h2 id="_22-loader-编写一个-loader"><a href="#_22-loader-编写一个-loader" aria-hidden="true" class="header-anchor">#</a> 22. Loader 编写一个 loader</h2> <p>loader 就是一个 node 模块，它输出了一个函数。当某种资源需要用这个 loader 转换时，这个函数会被调用。并且，这个函数可以通过提供给它的 this 上下文访问 Loader API。</p> <p>reverse-txt-loader</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// reverse-txt-loader</span>
<span class="token comment">// 定义</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">src</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//src是原文件内容（abcde），下面对内容进行处理，这里是反转</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//返回JavaScript源码，必须是String或者Buffer</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">module.exports = '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用</span>
<span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.txt$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token string">'./path/reverse-txt-loader'</span>
     <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="_23-定义环境变量"><a href="#_23-定义环境变量" aria-hidden="true" class="header-anchor">#</a> 23. 定义环境变量</h2> <p>当我们在配置的时候，需要区分所配置的属性参数是属于生产环境还是开发环境。每个环境对应的配置都不同。这就是环境变量最重要的意义</p> <p>当然，要实现上面所说的效果，就需要用到 webpack 内置插件<code>webpack.DefinePlugin</code></p> <p>环境变量配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//webpack.config.js</span>
<span class="token keyword">let</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
plugins<span class="token punctuation">:</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">//DEV:'dev'//这样独到的DEV是dev，但是dev是变量，而不是字符串，如果要是字符串，那就应该写成“’dev‘”</span>
		<span class="token comment">//上面的写法比较恶心，要用两个引号，那么可以换下面这种方式</span>
		<span class="token constant">DEV</span><span class="token punctuation">:</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'dev'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//解析出来的就是“’dev‘”</span>
		<span class="token constant">EXPRESSION</span><span class="token punctuation">:</span><span class="token string">'1+1'</span><span class="token punctuation">,</span><span class="token comment">//这样解析出来就是2，而不是'1+1'，如果要解析出来是'1+1',那就应该写成JSON.stringify('1+1')</span>
		<span class="token constant">FLAG</span>：<span class="token string">'true'</span><span class="token punctuation">,</span><span class="token comment">//解析出来就是true</span>
		<span class="token comment">//注意，这个大写的变量名称，是随你定义的</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_24-区分不同环境-生产与开发环境"><a href="#_24-区分不同环境-生产与开发环境" aria-hidden="true" class="header-anchor">#</a> 24. 区分不同环境(生产与开发环境)</h2> <blockquote><p>对 webpack.config.js 分成两个文件，一个用于开发，一个用于生产</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>项目根目录
    |
    --------webpack.base.js  //基本配置 公共配置 （原先我们写的webpack.config.js）
    |
    --------webpack.dev.js     //开发环境
    |
    --------weboack.prod.js    //生产环境
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>安装插件 <code>webpack-merge</code>: <code>npm i webpack-merge -D</code></p> <blockquote><p>这个插件内部有个<code>smart</code>函数，其作用：<code>合并两个配置文件</code></p></blockquote> <p>写开发环境和生产环境的配置文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//webpack.dev.js开发环境</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> smart <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-merge&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> base <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./webpack.base.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

modules<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">smart</span><span class="token punctuation">(</span>base<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">//这样就能够让后面的对象的属性覆盖到base对象的属性</span>
  mode<span class="token punctuation">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  devtool<span class="token punctuation">:</span> <span class="token string">&quot;source-map&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//webpack.prod.js</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> smart <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-merge&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> base <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./webpack.base.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

modules<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">smart</span><span class="token punctuation">(</span>base<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
  optioization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_25-打包多页应用"><a href="#_25-打包多页应用" aria-hidden="true" class="header-anchor">#</a> 25. 打包多页应用</h2> <ol><li><p>首先，多页应用应该有多个 js 文件，那么新建如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>src<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>index<span class="token punctuation">.</span>js
      <span class="token operator">|</span>
      <span class="token operator">--</span><span class="token operator">--</span>other<span class="token punctuation">.</span>js

<span class="token comment">//index.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'home'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//other.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'other'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>初始化这个项目</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> init
<span class="token function">npm</span> i webpack webpack-cli -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>新建并配置 webpack.config.js</p> <ol><li>多入口文件，那么 entry 就不能写成字符串形式，应该是一个对象</li> <li>出口，因为是多入口，所以出口也是多个，要配置成动态名字</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    home<span class="token punctuation">:</span> <span class="token string">&quot;./index.js&quot;</span><span class="token punctuation">,</span>
    other<span class="token punctuation">:</span> <span class="token string">&quot;./other.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">&quot;[name]:[hash:8].js&quot;</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li> <li><p>创建 html 文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>node_modules
  |
package.json
  |
src------index.js
  |     |
  |      ----other.js
  |
webpack.config.js
  |
index.html
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>虽然是多个入口 js，但是 html 创建只需要一个就可以了，然后更具多个入口 js，打包生成多个 html</p></blockquote></li></ol> <p>由于是多个入口，根据插件要求，2 个入口就要 new 两次<code>HtmlWebpackPlugin</code>，然后分别配置</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token comment">//webpack.config.js</span>
<span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    home<span class="token punctuation">:</span> <span class="token string">&quot;./index.js&quot;</span><span class="token punctuation">,</span>
    other<span class="token punctuation">:</span> <span class="token string">&quot;./other.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">&quot;[name]:[hash:8].js&quot;</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token punctuation">:</span> <span class="token string">&quot;./index.html&quot;</span><span class="token punctuation">,</span>
      filename<span class="token punctuation">:</span> <span class="token string">&quot;home.html&quot;</span><span class="token punctuation">,</span>
      chunks<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">]</span> <span class="token comment">//chunks代表代码块，也就是说，home.html中引入的对应js是entry为home的js，如果要引入other.js，那么这里就写['other']；如果两个都要，那么就写成['home','other']</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token punctuation">:</span> <span class="token string">&quot;./index.html&quot;</span><span class="token punctuation">,</span>
      filename<span class="token punctuation">:</span> <span class="token string">&quot;other.html&quot;</span><span class="token punctuation">,</span>
      chunks<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;other&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="_26-babel-的原理是什么"><a href="#_26-babel-的原理是什么" aria-hidden="true" class="header-anchor">#</a> 26. Babel 的原理是什么?</h2> <p>babel 的转译过程也分为三个阶段，这三步具体是：</p> <ol><li>解析 Parse: 将代码解析生成抽象语法树( 即 AST )，即词法分析与语法分析的过程</li> <li>转换 Transform: 对于 AST 进行变换一系列的操作，babel 接受得到 AST 并通过 babel-traverse 对其进行遍历，在此过程中进行添加、更新及移除等操作</li> <li>生成 Generate: 将变换后的 AST 再转换为 JS 代码, 使用到的模块是 babel-generator</li></ol> <img src="/prepare/images/engineering/2019102401.png" alt="images/engineering/2019102401.png"> <h2 id="_27-改造-webpack-config-js，实现多线程打包-js"><a href="#_27-改造-webpack-config-js，实现多线程打包-js" aria-hidden="true" class="header-anchor">#</a> 27. 改造 webpack.config.js，实现多线程打包 js</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> HappyPack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'happypack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token string">'HappyPack/loader?id=js'</span> <span class="token comment">//这个id=js就代表这是打包js的</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HappyPack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token string">'js'</span><span class="token punctuation">,</span> <span class="token comment">// 这个id: js就代表这是打包js的</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token comment">//use是一个数组，这里写原先在rules的use里的loader配置</span>
        loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          presets<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">'@babel/presets-env'</span><span class="token punctuation">,</span>
            <span class="token string">'@babel/presets-react'</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="_28-实现-js-和-css-的多线程打包"><a href="#_28-实现-js-和-css-的多线程打包" aria-hidden="true" class="header-anchor">#</a> 28. 实现 js 和 css 的多线程打包</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> HappyPack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'happypack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token string">'HappyPack/loader?id=js'</span> <span class="token comment">//这个id=js就代表这是打包js的</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token string">'HappyPack/loader?id=css'</span> <span class="token comment">//这个id=css就代表这是打包css的</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HappyPack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token string">'css'</span><span class="token punctuation">,</span> <span class="token comment">// 这个id: js就代表这是打包js的</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HappyPack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token string">'js'</span><span class="token punctuation">,</span> <span class="token comment">// 这个id: js就代表这是打包js的</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token comment">//use是一个数组，这里写原先在rules的use里的loader配置</span>
        loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          presets<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">'@babel/presets-env'</span><span class="token punctuation">,</span>
            <span class="token string">'@babel/presets-react'</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h2 id="_29-懒加载"><a href="#_29-懒加载" aria-hidden="true" class="header-anchor">#</a> 29. 懒加载</h2> <ol><li>案例情景：
<blockquote><p>当我点击按钮的时候，需要动态去加载 resource.js，并读取该文件导出的内容</p></blockquote></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//index.js</span>
<span class="token comment">/*在页面上有一个按钮，点击按钮去加载资源resource.js*/</span>
<span class="token keyword">let</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

button<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;点击&quot;</span><span class="token punctuation">;</span>

button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//es6草案中的语法,利用jsonp实现动态加载文件</span>
  <span class="token comment">//直接使用不支持，需要利用语法动态导入的插件@babel/plugin-syntax-dynamic-import</span>
  <span class="token comment">//vue的懒加载  react的懒加载都是这个原理，打包的时候会打包好resource.js文件，然后按需去动态加载</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./resource.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//数据是放在data的default属性里的</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//resource.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">&quot;youhuaResource&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ol start="2"><li>在上述代码中，直接使用<code>import()</code>去动态加载资源，是 es6 草案中语法，并不是正式语法，所以直接使用会报错，需要配置相关的语法动态导入的插件<code>@babel/plugin-syntax-dynamic-import</code>，并在 webpack 中做简单配置:</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            presets<span class="token punctuation">:</span> <span class="token punctuation">[</span>
              <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
              <span class="token string">'@babel/preset-react'</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
              <span class="token string">'@babel/plugin-syntax-dynamic-import'</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ol start="3"><li>配置完后，<code>import()</code>动态加载返回的是一个<code>promise</code>，得到的数据是存在<code>.then</code>的回调函数的<code>data.default</code>属性中的。</li></ol> <h2 id="_30-babel-loader-js"><a href="#_30-babel-loader-js" aria-hidden="true" class="header-anchor">#</a> 30. babel-loader.js</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * babel-loader
 * 功能：转化 ES6
 * 包依赖：
 * 1. @babel/core
 * 2. @babel/preset-env
 * 3. loader-utils
 */</span>

<span class="token keyword">let</span> babel <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@babel/core&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> loaderUtils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;loader-utils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> options <span class="token operator">=</span> loaderUtils<span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> cb <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  babel<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span>
    source<span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token operator">...</span>options<span class="token punctuation">,</span>
      filename<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resourcePath<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      sourceMaps<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>code<span class="token punctuation">,</span> result<span class="token punctuation">.</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> loader<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="_31-banner-loader-js"><a href="#_31-banner-loader-js" aria-hidden="true" class="header-anchor">#</a> 31. banner-loader.js</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * banner-loader
 * 功能：向输出文件添加注释内容
 * 包依赖：
 * 1. loader-utils
 * 2. schema-utils 验证 options 参数
 */</span>

<span class="token keyword">let</span> loaderUtls <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;loader-utils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> validateOptions <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;schema-utils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>cacheable <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cacheable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不开启缓存</span>
  <span class="token keyword">let</span> cb <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> options <span class="token operator">=</span> loaderUtls<span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> schema <span class="token operator">=</span> <span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span>
    properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      text<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      filename<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">validateOptions</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token string">&quot;banner-loader&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 将文件加入依赖，文件变化 webpack 会重新打包</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addDependency</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>filename<span class="token punctuation">,</span> <span class="token string">&quot;utf8&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">cb</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/**</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">**/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>source<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/**</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>text<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">**/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>source<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> loader<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h2 id="_32-file-loader-js"><a href="#_32-file-loader-js" aria-hidden="true" class="header-anchor">#</a> 32. file-loader.js</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * file-loader
 * 功能：根据文件生成一个 md5 发射到输出目录，返回当前文件路径
 * 包依赖：loader-utils
 */</span>

<span class="token keyword">let</span> loaderUtils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;loader-utils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> filename <span class="token operator">=</span> loaderUtils<span class="token punctuation">.</span><span class="token function">interpolateName</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;[hash:8].[ext]&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    content<span class="token punctuation">:</span> source
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emitFile</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 发射文件到输出目录</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">module.exports = &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>filename<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
loader<span class="token punctuation">.</span>raw <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// source 已被转成二进制</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> loader<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="_33-url-loader-js"><a href="#_33-url-loader-js" aria-hidden="true" class="header-anchor">#</a> 33. url-loader.js</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * url-loader
 * 功能：小于限制以 base64 插入文件，否则调用 file-loader 执行
 * 包依赖：
 * 1. loader-utils
 * 2. mime
 * 3. file-loader
 */</span>

<span class="token keyword">const</span> loaderUtls <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;loader-utils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> mime <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mime&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> limit <span class="token punctuation">}</span> <span class="token operator">=</span> loaderUtls<span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>limit <span class="token operator">&amp;&amp;</span> limit <span class="token operator">&gt;</span> source<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">module.exports=&quot;data:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mime<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>resourcePath
    <span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;base64,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>source<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">&quot;base64&quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

loader<span class="token punctuation">.</span>raw <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// source 已被转成二进制</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> loader<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="_34-loader-的执行顺序为什么是后写的先执行"><a href="#_34-loader-的执行顺序为什么是后写的先执行" aria-hidden="true" class="header-anchor">#</a> 34. loader 的执行顺序为什么是后写的先执行</h2> <p>其实为啥是从右往左，而不从左往右，只是 Webpack 选择了 compose 方式，而不是 pipe 的方式而已，在技术上实现从左往右也不会有难度</p> <p>在 Uninx 有 pipeline 的概念，平时应该也有接触，比如 ps aux | grep node，这些都是从左往右的。</p> <p>但是在函数式编程中有组合的概念，我们数学中常见的 f(g(x))，在函数式编程一般的实现方式是从右往左，如</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">compose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>fns</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> fns<span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v<span class="token punctuation">,</span> f</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">f</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">add1</span> <span class="token operator">=</span> <span class="token parameter">n</span> <span class="token operator">=&gt;</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//加1</span>
<span class="token keyword">const</span> <span class="token function-variable function">double</span> <span class="token operator">=</span> <span class="token parameter">n</span> <span class="token operator">=&gt;</span> n <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 乘2</span>
<span class="token keyword">const</span> add1ThenDouble <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>
  double<span class="token punctuation">,</span>
  add1
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">add1ThenDouble</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span>
<span class="token comment">// ((2 + 1 = 3) * 2 = 6)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这里可以看到我们先执行的加 1，然后执行的 double，在 compose 中是采用 reduceRight，所以我们传入参数的顺序编程了先传入 double，后传入 add1</p> <p>那么其实也可以实现从左往右</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">pipe</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>fns</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> fns<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v<span class="token punctuation">,</span> f</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">f</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> add1ThenDouble <span class="token operator">=</span> <span class="token function">pipe</span><span class="token punctuation">(</span>
  add1<span class="token punctuation">,</span>
  double
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">add1ThenDouble</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span>
<span class="token comment">// ((2 + 1 = 3) * 2 = 6)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>所以只不过 webpack 选择了函数式编程的方式，所以 loader 的顺序编程了从右往左，如果 webpack 选择了 pipe 的方式，那么大家现在写 loader 的时候的顺序就变成从左往右了</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>compose<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;style-loader!css-loader!sass-loader!./my-styles.sass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

pipe<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./my-styles.sass!sass-loader!css-loader!style-loader&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_35-webpack-性能优化"><a href="#_35-webpack-性能优化" aria-hidden="true" class="header-anchor">#</a> 35. webpack 性能优化</h2> <p>优化可以从两个方面考虑，一个是<code>优化开发体验</code>，一个是<code>优化输出质量</code>。</p> <p><strong>优化开发体验</strong></p> <ul><li>缩小文件搜索范围。涉及到 webpack 如何处理导入文件，不再赘述，不会的可以自行搜索。由于 loader 对文件转换操作很耗时，应该尽量减少 loader 处理的文件，可以使用 include 命中需要处理的文件，缩小命中范围。</li> <li>使用 DllPlugin，提升构建速度</li> <li>使用 happyPack 开启多线程</li> <li>使用 UglifyJs 压缩代码(只支持 es5)，uglifyes 支持 es6，两个插件不能同时开启。使用 ParalellUgifyPlugin 开启多个子进程压缩，既支持 UglifyJs 又支持 uglifyes</li> <li>使用自动刷新：监听到代码改变后，自动编译构建可运行代码并刷新页面</li> <li>开启模块热替换:在不刷新网页的同时实现实时预览</li></ul> <p><strong>优化输出质量</strong>减少首屏加载时间</p> <ul><li>区分环境</li> <li>压缩代码</li> <li>CDN 加速</li> <li>使用 Tree shaking</li> <li>提取公共代码</li> <li>按需加载</li> <li>提升流畅度，即代码性能:</li> <li>使用 PrePack 优化代码运行时的效率</li> <li>开启 Scope Hoisting，让 webpack 打包出来的代码更小、运行更快</li></ul> <h2 id="_36-有没有去研究-webpack-的一些原理和机制，怎么实现的"><a href="#_36-有没有去研究-webpack-的一些原理和机制，怎么实现的" aria-hidden="true" class="header-anchor">#</a> 36. 有没有去研究 webpack 的一些原理和机制，怎么实现的</h2> <ol><li>解析 webpack 配置参数，合并从 shell 传入和 webpack.config.js 文件里配置的参数，生产最后的配置结果。</li> <li>注册所有配置的插件，好让插件监听 webpack 构建生命周期的事件节点，以做出对应的反应。</li> <li>从配置的 entry 入口文件开始解析文件构建 AST 语法树，找出每个文件所依赖的文件，递归下去。</li> <li>在解析文件递归的过程中根据文件类型和 loader 配置找出合适的 loader 用来对文件进行转换。</li> <li>递归完后得到每个文件的最终结果，根据 entry 配置生成代码块 chunk。</li> <li>输出所有 chunk 到文件系统。</li></ol> <h2 id="_37-webpack-运行流程"><a href="#_37-webpack-运行流程" aria-hidden="true" class="header-anchor">#</a> 37. webpack 运行流程</h2> <p>分为<strong>初始化</strong>、<strong>编译</strong>、<strong>输出</strong>三个阶段.</p> <ol><li>初始化：
<ol><li>从配置文件和 shell 文件读取、合并参数；</li> <li>加载 plugin</li> <li>实例化 compiler</li></ol></li> <li>编译
<ol><li>从 entry 发出，针对每个 module 串行调用对应 loader 翻译文件内容</li> <li>找到 module 依赖的 module，递归进行编译处理</li></ol></li> <li>输出
<ol><li>把编译后 module 组合成 chunk</li> <li>把 chunk 转换成文件，输出到文件系统</li></ol></li></ol> <h2 id="_38-webpack-的构建流程是什么"><a href="#_38-webpack-的构建流程是什么" aria-hidden="true" class="header-anchor">#</a> 38. webpack 的构建流程是什么?</h2> <p>Webpack 的运行流程是一个串行的过程，从启动到结束会依次执行以下流程：</p> <ol><li>初始化参数：从配置文件和 Shell 语句中读取与合并参数，得出最终的参数；</li> <li>开始编译：用上一步得到的参数初始化 Compiler 对象，加载所有配置的插件，执行对象的 run 方法开始执行编译；</li> <li>确定入口：根据配置中的 entry 找出所有的入口文件；</li> <li>编译模块：从入口文件出发，调用所有配置的 Loader 对模块进行翻译，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理；</li> <li>完成模块编译：在经过第 4 步使用 Loader 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的依赖关系；</li> <li>输出资源：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会；</li> <li>输出完成：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统。</li></ol> <p>在以上过程中，Webpack 会在特定的时间点广播出特定的事件，插件在监听到感兴趣的事件后会执行特定的逻辑，并且插件可以调用 Webpack 提供的 API 改变 Webpack 的运行结果。</p> <h2 id="_39-webpack5-做了哪些事情"><a href="#_39-webpack5-做了哪些事情" aria-hidden="true" class="header-anchor">#</a> 39. webpack5 做了哪些事情</h2> <ul><li>使用长期缓存提升编译速度</li> <li>使用更好的算法和默认值来改善长期缓存</li> <li>通过更好的 Tree Shaking 和 Code Generation 来改善 bundle 大小</li> <li>重构内部结构，在不引入任何重大更改的情况下实现 v4 的功能</li> <li>通过引入重大更改来为将来的功能做准备，以使我们能够尽可能长时间的使用 v5</li></ul> <h2 id="_40"><a href="#_40" aria-hidden="true" class="header-anchor">#</a> 40.</h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/prepare/prepare/New/08-React.html" class="prev">08-React</a></span> <span class="next"><a href="/prepare/prepare/New/10-性能优化.html">10-性能优化</a>
      →
    </span></p></div> </main> <span data-v-2ae0ee72></span></div><div class="global-ui"></div></div>
    <script src="/prepare/assets/js/app.1447db77.js" defer></script><script src="/prepare/assets/js/3.e41e0c50.js" defer></script><script src="/prepare/assets/js/2.1e70219e.js" defer></script><script src="/prepare/assets/js/498.acc34f7b.js" defer></script>
  </body>
</html>
